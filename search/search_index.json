{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u5165\u9580 Docker","text":""},{"location":"#about","title":"About","text":"<p>Docker\u306e\u5165\u9580\u304b\u3089\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3067\u6d3b\u7528\u3059\u308b\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002 \u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3078\u5c0e\u5165\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306aDocker\u306e\u6982\u8981\u304b\u3089\u8a2d\u8a08\u307e\u3067\u3092\u306a\u308b\u3079\u304f\u6700\u77ed\u7d4c\u8def\u3067\u5b66\u3076\u3053\u3068\u304c\u76ee\u7684\u3067\u3059\u3002</p>"},{"location":"#_1","title":"\u60f3\u5b9a\u3059\u308b\u8aad\u8005\u5c64","text":"<ul> <li>WebAPI\u306e\u3088\u3046\u306a\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u3057\u305f\u3053\u3068\u304c\u3042\u308b</li> <li>Docker\u3092\u3053\u308c\u304b\u3089\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u3078\u5c0e\u5165\u3057\u3066\u307f\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u308b\u521d\u5b66\u8005</li> </ul>"},{"location":"#version","title":"Version","text":"<ul> <li>Docker<ul> <li>26.1.3</li> </ul> </li> </ul>"},{"location":"#_2","title":"\u5fc5\u8981\u306a\u74b0\u5883","text":"<ul> <li>Docker Hub \u306e\u30a2\u30ab\u30a6\u30f3\u30c8<ul> <li>Docker\u516c\u5f0f\u30ec\u30b8\u30b9\u30c8\u30ea</li> </ul> </li> <li>Play with Docker<ul> <li>Docker\u3092Web\u4e0a\u3067\u52d5\u304b\u305b\u308b\u74b0\u5883</li> <li>Play with Docker\u3092\u8d77\u52d5\u3059\u308b\u306e\u306b\u524d\u8ff0\u306eDockerHub\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u5fc5\u8981</li> <li>Docker for Mac(Windows)\u306e\u5834\u5408VM\u304c\u9593\u306b\u631f\u307e\u308a\u6319\u52d5\u304c\u7570\u306a\u308b\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968</li> </ul> </li> </ul>"},{"location":"#_3","title":"\u53c2\u8003","text":"<ul> <li>Docker Documentation | Docker Documentation<ul> <li>\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002</li> </ul> </li> <li>Docker \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u65e5\u672c\u8a9e\u5316\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 \u2014 Docker-docs-ja 24.0 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8<ul> <li>\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u6709\u5fd7\u3067\u7ffb\u8a33\u3057\u3066\u304f\u3060\u3055\u3063\u3066\u3044\u308b\u65e5\u672c\u8a9e\u7248\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"#_4","title":"\u5099\u8003","text":"<ul> <li>\u3053\u306eGitBook\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u30ea\u30dd\u30b8\u30c8\u30ea<ul> <li>y-ohgi/introduction-docker: Docker\u5165\u9580\u52c9\u5f37\u4f1a\u7528gitbook</li> </ul> </li> <li>\u7b46\u8005<ul> <li>@_y_ohgi</li> </ul> </li> <li>Privacy Policy<ul> <li>Google Analytics \u306b\u3088\u3063\u3066\u5404\u7ae0\u306e\u6ede\u5728\u6642\u9593\u3084\u30bb\u30af\u30b7\u30e7\u30f3\u6bce\u306e\u30cb\u30fc\u30ba\u3092\u628a\u63e1\u3059\u308b\u3053\u3068\u304c\u76ee\u7684\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"privacy-policy/","title":"Privacy Policy","text":""},{"location":"privacy-policy/#_1","title":"\u500b\u4eba\u60c5\u5831\u306e\u7b2c\u4e09\u8005\u3078\u306e\u958b\u793a","text":"<p>\u5f53\u30b5\u30a4\u30c8\u3067\u306f\u3001\u500b\u4eba\u60c5\u5831\u306f\u9069\u5207\u306b\u7ba1\u7406\u3057\u3001\u4ee5\u4e0b\u306b\u8a72\u5f53\u3059\u308b\u5834\u5408\u3092\u9664\u3044\u3066\u7b2c\u4e09\u8005\u306b\u958b\u793a\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <ul> <li>\u672c\u4eba\u306e\u3054\u4e86\u89e3\u304c\u3042\u308b\u5834\u5408</li> <li>\u6cd5\u4ee4\u7b49\u3078\u306e\u5354\u529b\u306e\u305f\u3081\u3001\u958b\u793a\u304c\u5fc5\u8981\u3068\u306a\u308b\u5834\u5408</li> </ul> <p>\u500b\u4eba\u60c5\u5831\u306e\u958b\u793a\u3001\u8a02\u6b63\u3001\u8ffd\u52a0\u3001\u524a\u9664\u3001\u5229\u7528\u505c\u6b62</p> <p>\u3054\u672c\u4eba\u304b\u3089\u306e\u500b\u4eba\u30c7\u30fc\u30bf\u306e\u958b\u793a\u3001\u8a02\u6b63\u3001\u8ffd\u52a0\u3001\u524a\u9664\u3001\u5229\u7528\u505c\u6b62\u306e\u3054\u5e0c\u671b\u306e\u5834\u5408\u306b\u306f\u3001\u3054\u672c\u4eba\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u305f\u4e0a\u3001\u901f\u3084\u304b\u306b\u5bfe\u5fdc\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002</p>"},{"location":"privacy-policy/#_2","title":"\u30a2\u30af\u30bb\u30b9\u89e3\u6790\u30c4\u30fc\u30eb\u306b\u3064\u3044\u3066","text":"<p>\u5f53\u30b5\u30a4\u30c8\u3067\u306f\u3001Google\u306b\u3088\u308b\u30a2\u30af\u30bb\u30b9\u89e3\u6790\u30c4\u30fc\u30eb\u300cGoogle\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u300d\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eGoogle\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306f\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30c7\u30fc\u30bf\u306e\u53ce\u96c6\u306e\u305f\u3081\u306bCookie\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30c7\u30fc\u30bf\u306f\u533f\u540d\u3067\u53ce\u96c6\u3055\u308c\u3066\u304a\u308a\u3001\u500b\u4eba\u3092\u7279\u5b9a\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u6a5f\u80fd\u306fCookie\u3092\u7121\u52b9\u306b\u3059\u308b\u3053\u3068\u3067\u53ce\u96c6\u3092\u62d2\u5426\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u306e\u3067\u3001\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u306e\u8a2d\u5b9a\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u898f\u7d04\u306b\u95a2\u3057\u3066\u3001\u8a73\u3057\u304f\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"privacy-policy/#_3","title":"\u514d\u8cac\u4e8b\u9805","text":"<p>\u5f53\u30b5\u30a4\u30c8\u304b\u3089\u30ea\u30f3\u30af\u3084\u30d0\u30ca\u30fc\u306a\u3069\u306b\u3088\u3063\u3066\u4ed6\u306e\u30b5\u30a4\u30c8\u306b\u79fb\u52d5\u3055\u308c\u305f\u5834\u5408\u3001\u79fb\u52d5\u5148\u30b5\u30a4\u30c8\u3067\u63d0\u4f9b\u3055\u308c\u308b\u60c5\u5831\u3001\u30b5\u30fc\u30d3\u30b9\u7b49\u306b\u3064\u3044\u3066\u4e00\u5207\u306e\u8cac\u4efb\u3092\u8ca0\u3044\u307e\u305b\u3093\u3002</p> <p>\u5f53\u30b5\u30a4\u30c8\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u30fb\u60c5\u5831\u306b\u3064\u304d\u307e\u3057\u3066\u3001\u53ef\u80fd\u306a\u9650\u308a\u6b63\u78ba\u306a\u60c5\u5831\u3092\u63b2\u8f09\u3059\u308b\u3088\u3046\u52aa\u3081\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u8aa4\u60c5\u5831\u304c\u5165\u308a\u8fbc\u3093\u3060\u308a\u3001\u60c5\u5831\u304c\u53e4\u304f\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3082\u3054\u3056\u3044\u307e\u3059\u3002</p> <p>\u5f53\u30b5\u30a4\u30c8\u306b\u63b2\u8f09\u3055\u308c\u305f\u5185\u5bb9\u306b\u3088\u3063\u3066\u751f\u3058\u305f\u640d\u5bb3\u7b49\u306e\u4e00\u5207\u306e\u8cac\u4efb\u3092\u8ca0\u3044\u304b\u306d\u307e\u3059\u306e\u3067\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"privacy-policy/#_4","title":"\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u30dd\u30ea\u30b7\u30fc\u306e\u5909\u66f4\u306b\u3064\u3044\u3066","text":"<p>\u5f53\u30b5\u30a4\u30c8\u306f\u3001\u500b\u4eba\u60c5\u5831\u306b\u95a2\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u65e5\u672c\u306e\u6cd5\u4ee4\u3092\u9075\u5b88\u3059\u308b\u3068\u3068\u3082\u306b\u3001\u672c\u30dd\u30ea\u30b7\u30fc\u306e\u5185\u5bb9\u3092\u9069\u5b9c\u898b\u76f4\u3057\u305d\u306e\u6539\u5584\u306b\u52aa\u3081\u307e\u3059\u3002</p> <p>\u4fee\u6b63\u3055\u308c\u305f\u6700\u65b0\u306e\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u30dd\u30ea\u30b7\u30fc\u306f\u5e38\u306b\u672c\u30da\u30fc\u30b8\u306b\u3066\u958b\u793a\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"1_introduction/docker/","title":"Docker\u3068\u306f","text":""},{"location":"1_introduction/docker/#docker","title":"Docker\u3068\u306f\uff1f","text":"<p>\u3082\u306f\u3084\u30d0\u30ba\u30ef\u30fc\u30c9\u3067\u306f\u306a\u304f\u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u306e\u7acb\u3061\u4f4d\u7f6e\u3092\u78ba\u7acb\u3057\u306f\u3058\u3081\u305fDocker\u3067\u3059\u3002  </p> <p>\u521d\u5b66\u8005\u5411\u3051\u306e\u5165\u9580\u8cc7\u6599\u3068\u3057\u3066\u3001Docker\u3092\u4f55\u6545\u4f7f\u3046\u306e\u304b\u3001VM\u3068\u306e\u9055\u3044\u3001\u3069\u3093\u306a\u6280\u8853\u3067\u3067\u304d\u3066\u3044\u308b\u306e\u304b\u3001\u305d\u3057\u3066Docker\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"1_introduction/docker/#docker_1","title":"\u306a\u305cDocker\u3092\u4f7f\u3046\u306e\u304b","text":""},{"location":"1_introduction/docker/#1","title":"1. \u30dd\u30fc\u30bf\u30d3\u30ea\u30c6\u30a3","text":"<p>Docker\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u306e\u305f\u3081\u306e\u6280\u8853\u3068\u8a00\u3063\u3066\u3082\u904e\u8a00\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u3002 \u7279\u5b9a\u306e\u74b0\u5883\u3092\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u3001\u3069\u306e\u74b0\u5883\u3067\u3082\u52d5\u304f\u30dd\u30fc\u30bf\u30d3\u30ea\u30c6\u30a3(\u53ef\u642c\u6027)\u3092\u4fdd\u8a3c\u3057\u307e\u3059\u3002</p> <p>Docker\u306f\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u72b6\u614b\uff08\u30e9\u30f3\u30bf\u30a4\u30e0\u30fb\u30e9\u30a4\u30d6\u30e9\u30ea\u30fb\u30b3\u30fc\u30c9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff09\u30921\u3064\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002 \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306f\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u72b6\u614b\u3092\u518d\u73fe\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3001\u305d\u3057\u3066\u305d\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4ed6\u306e\u958b\u767a\u8005\u3084\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3084\u672c\u756a\u74b0\u5883\u3078\u9ad8\u3044\u79fb\u690d\u6027\u3068\u53ef\u642c\u6027\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"1_introduction/docker/#2","title":"2. \u30aa\u30fc\u30d0\u30d8\u30c3\u30c9","text":"<p>\u5f93\u6765\u306eVM\u578b\u306e\u4eee\u60f3\u5316\u306e\u5834\u5408\u3001\u7269\u7406\u30ec\u30a4\u30e4\u30fc\u306e\u4eee\u60f3\u5316\u304b\u3089\u884c\u3044\u307e\u3059\u304c\u3001Docker\u306fLinux\u30ab\u30fc\u30cd\u30eb\u306e\u6a5f\u80fd\u3092\u7528\u3044\u30661\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u4eee\u60f3\u5316\u30ec\u30a4\u30e4\u30fc\u304c\u5c11\u306a\u304f\u3001VM\u3068\u6bd4\u8f03\u3057\u3066\u8efd\u91cf\u3067\u5c11\u306a\u3044\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3067\u74b0\u5883\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>VM\u3068Docker\u306e\u9055\u3044\u306f\u6b21\u306e VM\u3068Docker \u306e\u7ae0\u3067\u8aac\u660e\u3057\u307e\u3059</p>"},{"location":"1_introduction/docker/#3-immutable-infrastructure","title":"3. Immutable Infrastructure","text":"<p>Docker\u306fImmutable Infrastructure\u3068\u3057\u3066\u30a4\u30f3\u30d5\u30e9\u3092\u4e0d\u5909\u306a\u3082\u306e\u3068\u3057\u3066\u6271\u3044\u307e\u3059\u3002  </p> <p>\u4eca\u307e\u3067\u306e\u30a4\u30f3\u30d5\u30e9\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3084\u65b0\u3057\u3044\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\u3092\u3059\u308b\u969b\u306f\u30b5\u30fc\u30d0\u30fc\u5185\u3078\"\u5909\u66f4\"\u3092\u52a0\u3048\u3066\u5b9f\u73fe\u3059\u308b\u3001 Mutable Infrastructure \u3068\u547c\u3070\u308c\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u30b5\u30fc\u30d0\u30fc\u306e\u66f4\u65b0\u3092\u884c\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002 \u305d\u306e\u30a4\u30f3\u30d5\u30e9\u3092\u5909\u66f4\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u306f\u9006\u306b\u3001\u30b5\u30fc\u30d0\u30fc\u5185\u3078\u306e\u5909\u66f4\u3092\u884c\u308f\u306a\u3044\u30a2\u30d7\u30ed\u30fc\u30c1\u304c Immutable Infrastructure \u3067\u3059\u3002  </p> <p>\u3053\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u3088\u308a\u3001\u4efb\u610f\u306e\u6642\u70b9\u306e\u78ba\u5b9f\u306b\u52d5\u4f5c\u3059\u308b\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u624b\u306b\u5165\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u5909\u66f4\u3084\u8ffd\u52a0\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u306f\u65b0\u3057\u304f\u69cb\u7bc9\u3057\u3066\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4fdd\u5b58\u3057\u3001\u305d\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u5143\u306b\u30b5\u30fc\u30d0\u30fc\u3092\u65b0\u3057\u304f\u7acb\u3061\u4e0a\u3052\u307e\u3059\u3002  </p> <p>Docker\u306b\u306f\u6a19\u6e96\u3067Immutable Infrastructure\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b \"Dockerfile\" \u3068 \"Image\" \u3068\u3044\u3046\u6a5f\u80fd\u304c\u6a19\u6e96\u3067\u5099\u308f\u3063\u3066\u3044\u307e\u3059\u3002  </p> <p>Dockerfile\u306f Infrastructure as Code(IaC) \u3068\u3057\u3066\u306e\u6a5f\u80fd\u3067\u3059\u3002 Infrastructure as Code\u306f\u30a4\u30f3\u30d5\u30e9\u306e\u69cb\u6210\u3092\u30b3\u30fc\u30c9\u3067\u7ba1\u7406\u3057\u3001\u5ba3\u8a00\u7684\u306b\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u624b\u6cd5\u3067\u3059\u3002 \u305d\u3057\u3066\u3001Dockerfile\u304b\u3089\u751f\u6210\u3055\u308c\u305fDocker Image\u306f\u5148\u8ff0\u3057\u305f\u7279\u5b9a\u306e\u6642\u70b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306b\u306a\u308a\u307e\u3059\u3002  </p> <p>Docker\u306f\u81ea\u7136\u306b\u3053\u306eImmutable Infrastructure\u306b\u53d6\u308a\u7d44\u3080\u3053\u3068\u304c\u3067\u304d\u3001\u78ba\u5b9f\u306b\u52d5\u304f\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u306b\u53d6\u308a\u7d44\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u307e\u305f\u3001\u3053\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3067\u3042\u308bImage\u306b\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4ed8\u304f\u305f\u3081\u3001\u5bb9\u6613\u306b\u904e\u53bb\u306eImage\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u53ef\u80fd\u306b\u306a\u308a\u30a4\u30f3\u30d5\u30e9\u306e\u53ef\u7528\u6027\u306b\u7e4b\u304c\u308a\u307e\u3059\u3002</p> <p>Docker\u304c\u6d41\u884c\u3063\u305f\u7406\u7531</p> <p>\u30b3\u30f3\u30c6\u30ca\u81ea\u4f53\u306f\u53e4\u304f\u304b\u3089\u3042\u308b\u6982\u5ff5\u3067\u3001\u53e4\u304f\u304b\u3089chroot\u30fbJail\u30fbLXC\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3057\u307e\u3059\u3002 \u306a\u305cDocker\u304c\u6d41\u884c\u3063\u305f\u306e\u304b\u3001\u7406\u7531\u306e1\u3064\u3068\u3057\u3066\u7b46\u8005\u306f \u914d\u5e03\u306e\u5bb9\u6613\u6027 \u3068\u3044\u3046\u306e\u304c\u80cc\u666f\u3068\u3057\u3066\u3042\u308b\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002 Docker\u306f\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u306e\u6280\u8853\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u53d6\u5f97\u3057\u3066\u914d\u5e03\u3092\u6a19\u6e96\u306e\u6a5f\u80fd\u3068\u3057\u3066\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002 \u3053\u306e\u4ed5\u7d44\u307f\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u30ed\u30fc\u30ab\u30eb\u304b\u3089\u672c\u756a\u74b0\u5883\u307e\u3067\u5bb9\u6613\u306b\u540c\u4e00\u306e\u74b0\u5883\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002</p>"},{"location":"1_introduction/hello-docker/","title":"Hello Docker !","text":"<p>\u307e\u305a\u306fDocker\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01 \u3053\u306e\u7ae0\u3067\u306fDocker\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066nginx\u3092\u5b9f\u969b\u306b\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u3092\u76ee\u6a19\u3068\u3057\u307e\u3059\u3002</p>"},{"location":"1_introduction/hello-docker/#1-play-with-docker","title":"1. Play With Docker\u3078\u30ed\u30b0\u30a4\u30f3","text":"<p>\u5f53\u8cc7\u6599\u3067\u306fDocker\u306e\u74b0\u5883\u3068\u3057\u3066Play with Docker \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 \u30ed\u30fc\u30ab\u30eb\u74b0\u5883 (Mac/Windows/Linux) \u3067Docker Desktop\u306a\u3069Docker\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u304cmacOS/Windows/Linux\u3067\u305d\u308c\u305e\u308c\u306eOS\u3067\u306e\u5b9f\u88c5\u304c\u7570\u306a\u3063\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306fDocker\u793e\u304c\u63d0\u4f9b\u3059\u308bDocker\u306e\u30d7\u30ec\u30a4\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u3042\u308b Play with Docker \u3092\u4f7f\u7528\u3057\u3066\u30cf\u30f3\u30ba\u30aa\u30f3\u74b0\u5883\u3092\u7d71\u4e00\u3057\u307e\u3059\u3002</p> <p></p> <p>Play With Docker\u3067\u306fDockerHub\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3001\u307e\u3060\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u306a\u3044\u65b9\u306f\u4f5c\u6210\u3092\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>https://hub.docker.com</p>"},{"location":"1_introduction/hello-docker/#2","title":"2. \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u8d77\u52d5","text":"<p>\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u307e\u305a\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 \u30b5\u30a4\u30c9\u30d0\u30fc\u306e <code>+ ADD NEW INSTANCE</code> \u3092\u62bc\u3057\u3066\u8d77\u52d5\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <p></p>"},{"location":"1_introduction/hello-docker/#3-nginx","title":"3. nginx\u306e\u8d77\u52d5","text":"<p>\u307e\u305a\u306f\u5358\u7d14\u306bnginx\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u8d77\u52d5\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002</p> <pre><code>$ docker run -P nginx\n</code></pre> <p>\u5f8c\u306e\u7ae0\u3067docker\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066\u89e3\u8aac\u3092\u3057\u307e\u3059\u304c\u7c21\u5358\u306b\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306e\u8aac\u660e\u3059\u308b\u3068\u3001 \u300cnginx\u3092\u8d77\u52d5( <code>docker run nginx</code> )\u3057\u3001\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u3092\u516c\u958b( <code>-P</code> )\u3002\u300d\u3068\u3044\u3046\u610f\u5473\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>Play With Docker\u3067\u306f\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\u3068Web\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u753b\u50cf\u306e\u3088\u3046\u306bIP\u306e\u6a2a\u306b\u30dd\u30fc\u30c8\u756a\u53f7(\u753b\u50cf\u3067\u306f <code>32768</code> )\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u8d77\u52d5\u6210\u529f\u3067\u3059\uff01</p> <p></p>"},{"location":"1_introduction/hello-docker/#4-nginx","title":"4. \u8d77\u52d5\u3057\u305fnginx\u3078\u30a2\u30af\u30bb\u30b9","text":"<p>\u8a66\u3057\u306b\u8d77\u52d5\u3057\u305fnginx\u30b5\u30fc\u30d0\u30fc\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 \u8868\u793a\u3055\u308c\u305f\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306bnginx\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002  </p> <p></p>"},{"location":"1_introduction/hello-docker/#5-docker","title":"5. Docker\u306e\u505c\u6b62","text":"<p>Play With Docker\u306e\u753b\u9762\u306b\u623b\u3063\u3066 <code>Ctrl + c</code> \u3067\u8d77\u52d5\u3057\u305fnginx\u3092\u7d42\u4e86\u3055\u305b\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"1_introduction/hello-docker/#_1","title":"\u307e\u3068\u3081","text":"<p><code>docker run -P nginx</code> \u3060\u3051\u3067nginx\u304c\u7c21\u5358\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002 docker\u306e\u624b\u8efd\u3055\u306e\u7b2c\u4e00\u6b69\u3092\u611f\u3058\u3066\u3082\u3089\u3048\u305f\u3089\u5e78\u3044\u3067\u3059\uff01</p>"},{"location":"1_introduction/vm-docker/","title":"VM\u3068Docker","text":"<p>VM\u3068Docker\u306f\u3069\u3061\u3089\u3082\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306e\u6280\u8853\u3067\u3059\u3002 \u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u3001VM\u306f \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u81ea\u4f53 \u3092\u62bd\u8c61\u5316(\u4eee\u60f3\u5316)\u3059\u308b\u306e\u306b\u5bfe\u3057\u3066\u3001Docker\u306f \u30d7\u30ed\u30bb\u30b9 \u306e\u81ea\u4f53\u306e\u62bd\u8c61\u5316(\u30b3\u30f3\u30c6\u30ca\u5316)\u3092\u884c\u3044\u307e\u3059\u3002  </p> <p>\u3053\u306e2\u3064\u306f\u7af6\u5408\u3059\u308b\u6280\u8853\u3067\u306f\u306a\u304f\u3001\u3080\u3057\u308d\u5171\u5b58\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002 \u307e\u305f\u3001VM\u304c\u9069\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3082\u3042\u308b\u306e\u3067\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u8981\u4ef6\u306b\u5fdc\u3058\u3066Docker\u3068VM\u3092\u9078\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"1_introduction/vm-docker/#virtualmachine","title":"VirtualMachine","text":"<p>VirtualMachine(\u4ee5\u4e0bVM)\u306f\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u304b\u3089\u4e0a\u3001\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30fb\u30ab\u30fc\u30cd\u30eb(OS)\u30fb\u30e6\u30fc\u30b6\u30fc\u30b9\u30da\u30fc\u30b9\u306e\u4f4e\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u4eee\u60f3\u5316\u3092\u884c\u3046\u305f\u3081\u306e\u6280\u8853\u3067\u3059\u3002 \u4f8b\u3048\u3070macOS\u4e0a\u3067Windows\u3092\u52d5\u304b\u3059\u3053\u3068\u3001x86\u74b0\u5883\u3067ARM\u3092\u52d5\u304b\u3059\u3053\u3068\u304c\u53ef\u80fd\u3067 \u975e\u5e38\u306b\u81ea\u7531\u5ea6\u304c\u9ad8\u3044 \u3067\u3059\u3002 \u305d\u306e\u305f\u3081\u5f53\u7136\u306a\u304c\u3089OS(\u3084\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2)\u304c\u5bfe\u8c61\u306b\u306a\u308a\u3001\u4eee\u60f3\u5316\u3092\u3059\u308b\u9818\u57df\u304c\u5e83\u3044\u305f\u3081\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u5927\u304d\u304f\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"1_introduction/vm-docker/#docker","title":"Docker","text":"<p>Docker\u306f\u30b3\u30f3\u30c6\u30ca\u3068\u3044\u3046\u6280\u8853\u3067\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u306fLinux\u30ab\u30fc\u30cd\u30eb\u306e\u6a5f\u80fd\u3092\u7528\u3044\u305f\u6280\u8853\u3067\u3001cgroup\u30fbnamespace\u30fbCapability\u306e\u3088\u3046\u306a\u6a5f\u80fd\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002 \u305d\u306e\u305f\u3081VM\u3068\u306f\u7570\u306a\u308a\u30db\u30b9\u30c8OS\u3068\u30ea\u30bd\u30fc\u30b9\u3092\u5171\u6709\u3057\u3001\u52b9\u7387\u7684\u306b\u30db\u30b9\u30c8OS\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u9ad8\u901f\u304b\u3064\u8efd\u91cf\u306a\u4eee\u60f3\u5316\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u8907\u96d1\u3067\u3059\u304c\u3001\u53b3\u5bc6\u306b\u306fDocker\u306f\u4eee\u60f3\u5316\u6280\u8853\u3068\u306f\u7570\u306a\u308a\u3001\u30d7\u30ed\u30bb\u30b9\u30ec\u30d9\u30eb\u306e\u62bd\u8c61\u5316\u3092\u884c\u3046 \u30b3\u30f3\u30c6\u30ca\u6280\u8853 \u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u30b3\u30f3\u30c6\u30ca\u3067\u4f7f\u7528\u3055\u308c\u308b\u6280\u8853</p> <p>Linux\u306e\u6a5f\u80fd\u3092\u7528\u3044\u3066\u30b3\u30f3\u30c6\u30ca\u306f\u5b9f\u73fe\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"1_introduction/vm-docker/#cgroup","title":"cgroup","text":"<p>\u30e1\u30e2\u30ea\u30fbCPU\u306e\u3088\u3046\u306a\u8a08\u7b97\u30ea\u30bd\u30fc\u30b9\u3092\u9694\u96e2\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u3078\u30ea\u30bd\u30fc\u30b9\u306e\u5272\u308a\u5f53\u3066\u3068\u5236\u9650\u3092\u884c\u3044\u307e\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u306f\u305d\u308c\u305e\u308c\u5c02\u7528\u306e\u8a08\u7b97\u30ea\u30bd\u30fc\u30b9\u3092\u5272\u308a\u5f53\u3066\u3001\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u306f\u304a\u4e92\u3044\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002 \u305d\u3057\u3066\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u6d88\u8cbb\u3057\u3066\u3082\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u5f71\u97ff\u3092\u53ca\u307c\u3055\u306a\u3044\u3088\u3046\u306b\u5236\u9650\u3092\u884c\u3063\u3066\u304f\u308c\u307e\u3059\u3002</p>"},{"location":"1_introduction/vm-docker/#namespace","title":"namespace","text":"<p>\u540c\u3058\u304f\u9694\u96e2\u306e\u305f\u3081\u306e\u6280\u8853\u3067\u3059\u3002 namespace\u306f\u30d7\u30ed\u30bb\u30b9\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u30d5\u30a1\u30a4\u30eb\u30a2\u30af\u30bb\u30b9\u306a\u3069\u8907\u6570\u306e\u7a2e\u985e\u304c\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u9694\u96e2\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"1_introduction/vm-docker/#capability","title":"Capability","text":"<p>\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u306e\u6a29\u9650\u3092\u5236\u9650\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3067\u3059\u3002 HostOS\u306eroot\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3092\u5236\u9650\u3057\u3001\u6700\u5c0f\u9650\u306e\u6a29\u9650\u3092\u4ed8\u4e0e/\u7ba1\u7406\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"2_component/container/","title":"Docker Container\u3068\u306f","text":""},{"location":"2_component/container/#docker-container","title":"Docker Container\u3068\u306f","text":"<p> Docker Image \u304c\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3060\u3068\u3057\u305f\u3089Docker Container \u306f\u305d\u306e \u300c\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u8d77\u52d5\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u300d \u3067\u3059\u3002  </p> <p>\u3088\u308a\u5177\u4f53\u7684\u306b\u3044\u3046\u3068 <code>docker run</code> \u3092\u5b9f\u884c\u3059\u308b\u3068Docker Image \u3092\u3082\u3068\u306b\u3057\u3066Docker Container\u304c\u4f5c\u6210\u3055\u308c\u3001\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 Docker Container\u306fDocker Image\u3092\u5143\u306b\u3057\u3066\u4f5c\u6210\u3055\u308c\u3001\u30ea\u30bd\u30fc\u30b9\u306e\u8a31\u3059\u9650\u308a\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u610f\u8b58\u3059\u308b\u70b9\u3068\u3057\u3066\u3001Docker Container \u306f\u300c1\u3064\u306e\u30b3\u30de\u30f3\u30c9(\u30d7\u30ed\u30bb\u30b9)\u3092\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u52d5\u304b\u3059\u300d\u3088\u3046\u8a2d\u8a08\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002 Docker Container\u306f1\u3064\u306e\u30b3\u30de\u30f3\u30c9\u3092\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3067\u5b9f\u884c\u3057\u3001\u305d\u306e\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u304c\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u7d42\u4e86\u3059\u308b\u307e\u3067\u751f\u5b58\u3057\u307e\u3059\u3002</p>"},{"location":"2_component/container/#_1","title":"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb","text":"<p>Docker Container \u306f\u5927\u304d\u304f5\u3064\u306e\u72b6\u614b\u3092\u9077\u79fb\u3057\u307e\u3059\u3002  </p> <ol> <li><code>Image</code><ul> <li>\u6307\u5b9a\u3057\u305fDocker Image \u304b\u3089Docker Container\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</li> </ul> </li> <li><code>RUNNING</code><ul> <li>Docker Container\u304c\u8d77\u52d5\u3057\u305f\u72b6\u614b\u3067\u3059\u3002</li> <li>Dockerfile\u306e <code>CMD</code> \u3082\u3057\u304f\u306f <code>ENTRYPOINT</code> \u3067\u6307\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u304c\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u52d5\u3044\u3066\u3044\u308b\u9593\u304cRUNNING\u306e\u72b6\u614b\u3067\u3059\u3002</li> <li>\u4f8b\u3048\u3070 <code>docker run -P nginx</code> \u306e\u3088\u3046\u306bnginx\u3092\u8d77\u52d5\u3057\u305f\u5834\u5408\u3001nginx\u304c\u8d77\u52d5\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3092\u5f85\u3061\u53d7\u3051\u3066\u308b\u9593\u306fRUNNING\u306e\u72b6\u614b\u3068\u306a\u308a\u307e\u3059</li> </ul> </li> <li><code>STOPPED</code><ul> <li>\u8d77\u52d5\u3057\u305fContainer\u304c\u7d42\u4e86\u3057\u305f\u72b6\u614b\u3067\u3059\u3002</li> <li>\u6b63\u5e38\u7d42\u4e86\u30fb\u7570\u5e38\u7d42\u4e86\u3001\u3069\u306e\u3088\u3046\u306a\u5f62\u3067\u3042\u3063\u3066\u3082\u7d42\u4e86\u3057\u305fContainer\u306fSTOPPED\u3078\u9077\u79fb\u3057\u307e\u3059\u3002</li> </ul> </li> <li><code>PAUSED</code><ul> <li>Container\u304c\u505c\u6b62\u3057\u305f\u72b6\u614b\u3067\u3059\u3002</li> <li>\u30e6\u30fc\u30b6\u30fc\u304c <code>docker pause &lt;CONTAINER ID&gt;</code> \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u73fe\u5728\u306e\u72b6\u614b\u3092\u4fdd\u6301\u3057\u3066\u4e00\u6642\u505c\u6b62\u3057\u307e\u3059\u3002</li> <li><code>docker unpause &lt;CONTAINER ID&gt;</code> \u3067\u4e00\u6642\u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30caID\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u518d\u958b\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</li> <li>\u30e6\u30fc\u30b6\u30fc\u304c\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u3044\u9650\u308a\u3053\u306e\u72b6\u614b\u3078\u306f\u9077\u79fb\u3057\u307e\u305b\u3093\u3002</li> </ul> </li> <li><code>DELETED</code><ul> <li>Docker Container \u306f\u660e\u793a\u7684\u306b\u524a\u9664\u3092\u884c\u308f\u306a\u3044\u9650\u308a\u505c\u6b62\u3057\u305f\u72b6\u614b\u3067\u6b8b\u308a\u7d9a\u3051\u307e\u3059\u3002</li> <li><code>docker rm &lt;CONTAINER ID&gt;</code> \u3067\u660e\u793a\u7684\u306b\u524a\u9664\u3059\u308b\u3068DELETED\u306e\u72b6\u614b\u3078\u9077\u79fb\u3057\u3001\u524a\u9664\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> </ol>"},{"location":"2_component/container/#_2","title":"\u30d7\u30ed\u30bb\u30b9\u306e\u9694\u96e2","text":"<p>\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d7\u30ed\u30bb\u30b9\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u3084\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u3068\u9694\u96e2\u3055\u308c\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002 \u4e0a\u8a18\u306e\u56f3\u306e\u3088\u3046\u306b\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306eDocker\u3067\u4f5c\u6210\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u306f\u65b0\u3057\u3044\u74b0\u5883\u3092\u4f5c\u6210\u3057\u3001 <code>CMD</code> (\u3082\u3057\u304f\u306f <code>ENTRYPOINT</code> )\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30d7\u30ed\u30bb\u30b9\u306f <code>PID 1</code> \u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u305f\u3081\u3057\u306b <code>ps</code> \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308bDocker\u3092\u8d77\u52d5\u3057\u3001\u305d\u306e\u74b0\u5883\u306e\u6700\u521d\u306e\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ docker run ubuntu ps\n  PID TTY          TIME CMD\n      1 ?        00:00:00 ps\n</code></pre></p> <p>\u30db\u30b9\u30c8\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u304c\u3069\u3046\u898b\u3048\u308b\u304b\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 \u6e96\u5099\u3068\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u306e\u95a2\u4fc2\u3092\u898b\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306b <code>pstree</code> \u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 <pre><code>$ apk add --no-cache pstree\n</code></pre></p> <p>nginx\u306eDocker\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30fc\u30e2\u30f3\u3068\u3057\u3066\u8d77\u52d5\u3057\u3066\u3001 <code>pstree</code> \u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker run -d nginx\nUnable to find image 'nginx:latest' locally\nlatest: Pulling from library/nginx\n27833a3ba0a5: Pull complete\ne83729dd399a: Pull complete\nebc6a67df66d: Pull complete\nDigest: sha256:c8a861b8a1eeef6d48955a6c6d5dff8e2580f13ff4d0f549e082e7c82a8617a2\nStatus: Downloaded newer image for nginx:latest\neef4217efa74c65b36b7c80012eeaf0a9a8928717f5602a641dc20ddc91daf10\n$ pstree\n-+= 00001 root /bin/sh -c cat /etc/hosts &gt;/etc/hosts.bak &amp;&amp;     sed 's/^::1.*//' /etc/hosts.bak &gt; /\n |--- 00033 root /usr/sbin/sshd -o PermitRootLogin=yes -o PrintMotd=no\n |-|- 00009 root script -q -c /bin/bash -l /dev/null\n | \\-+= 00010 root /bin/bash -l\n |   \\--= 02850 root pstree\n \\-|- 00008 root dockerd\n   \\-+= 00038 root containerd --config /var/run/docker/containerd/containerd.toml --log-level debug\n     \\-+= 02629 root containerd-shim -namespace moby -workdir /var/lib/docker/containerd/daemon/io.\n       \\-+= 02647 root nginx: master process nginx -g daemon off;\n         \\--- 02686 #101 nginx: worker process\n</code></pre></p>"},{"location":"2_component/container/#_3","title":"\u304a\u307e\u3051","text":"<ul> <li><code>$ docker run ubuntu echo hoge</code> \u306e\u3088\u3046\u306a\u4e00\u77ac\u3060\u3051\u8d77\u52d5\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3060\u3068\u3069\u306e\u3088\u3046\u306b\u898b\u3048\u308b\u3067\u3057\u3087\u3046\u304b</li> <li><code>$ docker run -d nginx</code> \u3092\u8907\u6570\u8d77\u52d5\u3059\u308b\u3068\u3069\u306e\u3088\u3046\u306b\u898b\u3048\u308b\u3067\u3057\u3087\u3046\u304b</li> </ul>"},{"location":"2_component/container/#_4","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30b3\u30f3\u30c6\u30ca\u306f\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3067\u5b9f\u884c\u3055\u308c\u308b</li> <li>Docker\u30b3\u30f3\u30c6\u30ca\u306f1\u3064\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u3092\u5b9f\u884c\u3059\u308b<ul> <li>\u57fa\u672c\u7684\u306b\u300c1\u30b3\u30f3\u30c6\u30ca = 1\u30d7\u30ed\u30bb\u30b9\u300d</li> </ul> </li> <li>\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306f\u5b9f\u884c\u3055\u308c\u305f\u30b3\u30de\u30f3\u30c9\u304c\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u671f\u9593<ul> <li>\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u30d7\u30ed\u30bb\u30b9\u304c\u7acb\u3061\u4e0a\u3052\u3089\u308c\u3066\u3044\u3066\u3082\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u30b3\u30de\u30f3\u30c9\u304c\u7d42\u4e86\u3057\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u306f\u505c\u6b62\u3059\u308b</li> </ul> </li> </ul>"},{"location":"2_component/dockerfile/","title":"Dockerfile","text":""},{"location":"2_component/dockerfile/#docker-image","title":"Docker Image","text":"<p>Docker Image \u304c\u7279\u5b9a\u306e\u74b0\u5883\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002 \u6b21\u306bDocker Image \u3092\u81ea\u5206\u3067\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3092\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066</p> <p>Docker Image \u3092\u4f5c\u308b\u305f\u3081\u306e\u65b9\u6cd5\u306f\u8907\u6570\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f \u300c\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3078Docker\u3092\u5c0e\u5165\u3059\u308b\u305f\u3081\u306e\u77e5\u8b58\u3092\u30cf\u30f3\u30ba\u30aa\u30f3\u5f62\u5f0f\u3067\u6700\u77ed\u7d4c\u8def\u3067\u5b66\u3076\u300d \u3068\u3044\u3046\u3053\u3068\u3092\u76ee\u6a19\u306b\u3057\u3066\u3044\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001\u73fe\u5728\u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u3067\u3042\u308b <code>Dockerfile</code> \u306e\u307f\u53d6\u308a\u6271\u3044\u307e\u3059\u3002 \u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u8abf\u3079\u3066\u307f\u308b\u3068\u826f\u3044\u3067\u3059\u304c\u3001Dockerfile\u4ee5\u5916\u306f\u57fa\u672c\u7684\u306b\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"2_component/dockerfile/#dockerfile","title":"Dockerfile","text":"<p>Docker Image \u306f <code>Dockerfile</code> \u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u8a18\u8ff0\u3057\u3001\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5143\u306b\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u3067\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u4f5c\u6210\u304c\u3067\u304d\u307e\u3059\u3002  </p> <p>\u8a66\u3057\u306b <code>Dockerfile</code> \u3092\u8a18\u8ff0\u3057\u3066Docker Image \u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/dockerfile/#dockerfile_1","title":"Dockerfile\u3092\u8a18\u8ff0\u3057\u3066\u307f\u308b","text":"<p>\u307e\u305a\u306f <code>echo hello!</code> \u3092\u5b9f\u884c\u3059\u308bDocker Image \u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/dockerfile/#1","title":"1. \u74b0\u5883\u306e\u7528\u610f","text":"<p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066vi\u3067 <code>Dockerfile</code> \u3078\u30c6\u30ad\u30b9\u30c8\u5165\u529b\u306e\u958b\u59cb\u3092\u3057\u307e\u3059\u3002 <pre><code>$ cd ~\n$ mkdir -p docker/ubuntu\n$ cd docker/ubuntu\n$ echo \"hello docker !\" &gt; hello.txt\n$ vi Dockerfile\n</code></pre></p>"},{"location":"2_component/dockerfile/#2-dockerfile","title":"2. <code>Dockerfile</code> \u306e\u7de8\u96c6","text":"<p>Dockerfile\u306f\u72ec\u81ea\u306eDSL\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002 DSL\u306f\u5f8c\u307b\u3069\u89e3\u8aac\u3057\u307e\u3059\u304c\u3001\u4ee5\u4e0b\u306eDockerfile\u306f\u300c <code>ubuntu</code> \u3068\u3044\u3046Docker Image\u3092\u3082\u3068\u306b\u3001\u30db\u30b9\u30c8\u306e <code>hello.txt</code> \u3092\u30b3\u30f3\u30c6\u30ca\u306e <code>/tmp/hello.txt</code> \u3078\u30b3\u30d4\u30fc\u3057\u3066\u3001 <code>cat /tmp/hello.txt</code> \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u300d\u3068\u3044\u3046\u610f\u5473\u306b\u306a\u308a\u307e\u3059\u3002</p> <pre><code>FROM ubuntu\n\nCOPY hello.txt /tmp/hello.txt\n\nCMD [\"cat\", \"/tmp/hello.txt\"]\n</code></pre>"},{"location":"2_component/dockerfile/#3-docker-image","title":"3. Docker Image \u306e\u30d3\u30eb\u30c9&amp;\u5b9f\u884c","text":"<p><code>docker build</code> \u30b3\u30de\u30f3\u30c9\u3067 <code>Dockerfile</code> \u304b\u3089Docker Image \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 <code>-t hello</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u300cDocker Image\u3092 <code>hello</code> \u3068\u3044\u3046\u540d\u524d\u306b\u3059\u308b\u300d\u3068\u3044\u3046\u610f\u5473\u3067\u3059\u3002 <code>.</code> \u306fdocker build \u5b9f\u884c\u6642\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u6307\u5b9a\u3067\u3059\u3002 <code>.</code> \u306f <code>COPY</code> \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u969b\u306b\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8d77\u70b9\u3068\u3059\u308b\u304b\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>$ docker build -t hello .\n</code></pre> <p>Docker Image \u304c\u30d3\u30eb\u30c9\u3067\u304d\u305f\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <code>docker images</code> \u3067\u73fe\u5728\u30ed\u30fc\u30ab\u30eb\u306b\u5b58\u5728\u3059\u308bDocker Image \u306e\u4e00\u89a7\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <pre><code>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nhello               latest              59e1a587fe86        13 seconds ago      88.9MB\nubuntu              latest              94e814e2efa8        6 days ago          88.9MB\nnode                latest              9ff38e3a6d9d        10 days ago         904MB\n</code></pre></p> <p><code>docker run image</code> \u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <code>CMD</code> \u3067\u6307\u5b9a\u3057\u305f <code>cat /tmp/hello.txt</code> \u304c\u5b9f\u884c\u3055\u308c\u3001\"hello docker !\"\u3068\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002 <pre><code>$ docker run hello\nhello docker !\n</code></pre></p>"},{"location":"2_component/dockerfile/#docker-hub","title":"Docker Hub \u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9","text":"<p>\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3084\u672c\u756a\u74b0\u5883\u3067\u52d5\u304b\u3059\u306b\u306fDocker\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 Docker\u30ec\u30b8\u30b9\u30c8\u30ea\u306fDocker Image \u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u5834\u6240\u3067\u3001Docker\u7248\u306eGitHub\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002 Docker\u516c\u5f0f\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bDockerHub\u3078\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f <code>hello</code> \u30a4\u30e1\u30fc\u30b8\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u30af\u30e9\u30a6\u30c9\u306e\u5834\u5408</p> <p>AWS\u306e\u5834\u5408\"Elastic Container Registry\"\u304c\u3001GCP\u306e\u5834\u5408\"Google Artifact Registry\" \u3068\u3044\u3046Docker\u30ec\u30b8\u30b9\u30c8\u30ea\u30b5\u30fc\u30d3\u30b9\u304c\u5b58\u5728\u3057\u307e\u3059\u3002 \u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u672c\u756a\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u69cb\u7bc9\u3059\u308b\u30af\u30e9\u30a6\u30c9\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bDocker\u30ec\u30b8\u30b9\u30c8\u30ea\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/dockerfile/#1-docker-hub","title":"1. Docker Hub\u3078\u30ed\u30b0\u30a4\u30f3","text":"<p><code>docker login</code> \u30b3\u30de\u30f3\u30c9\u3067Docker Hub \u3078\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002 \u307e\u3060DockerHub\u306e\u767b\u9332\u304c\u6e08\u3093\u3067\u3044\u306a\u3044\u5834\u5408\u306f https://hub.docker.com/ \u306b\u3066\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u3092\u3057\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ docker login\nUsername: &lt;YOUR USER NAME&gt;\nPassword: &lt;YOUR PASSWORD&gt;\nLogin Succeeded\n</code></pre>"},{"location":"2_component/dockerfile/#2-docker-image","title":"2. Docker Image \u306e\u547d\u540d","text":"<p>Docker Hub \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306b\u306fDocker Hub \u306eDocker Image \u306e\u547d\u540d\u898f\u5247\u306b\u5247\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30e6\u30fc\u30b6\u30fc\u306e\u30aa\u30ea\u30b8\u30ca\u30eb\u30a4\u30e1\u30fc\u30b8\u306f <code>&lt;USER NAME&gt;/&lt;IMAGE NAME&gt;:&lt;TAG&gt;</code> \u3068\u3044\u3046\u547d\u540d\u306b\u3057\u307e\u3059\u3002( <code>:&lt;TAG&gt;</code> \u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3059\u308b\u3068 <code>:latest</code> \u3068\u547d\u540d\u3055\u308c\u307e\u3059)</p> <p>\u307e\u305a\u306f <code>docker tag</code> \u30b3\u30de\u30f3\u30c9\u3067\u547d\u540d\u3057\u307e\u3057\u3087\u3046\u3002 <code>&lt;USER NAME&gt;</code> \u306f\u81ea\u5206\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>$ docker tag hello &lt;USER NAME&gt;/hello\n</code></pre></p> <p>\u547d\u540d\u3067\u304d\u305f\u304b\u306e\u78ba\u8a8d\u3092\u3057\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nhello               latest              59e1a587fe86        19 minutes ago      88.9MB\n&lt;USER NAME&gt;/hello   latest              59e1a587fe86        19 minutes ago      88.9MB\nubuntu              latest              94e814e2efa8        6 days ago          88.9MB\n</code></pre></p>"},{"location":"2_component/dockerfile/#3-docker-image_1","title":"3. Docker Image\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9","text":"<p>Docker Image \u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u3044\u307e\u3059\u3002  </p> <pre><code>$ docker push &lt;USER NAME&gt;/hello\nThe push refers to repository [docker.io/&lt;USER NAME&gt;/hello]\nb57c79f4a9f3: Mounted from library/ubuntu\nd60e01b37e74: Mounted from library/ubuntu\ne45cfbc98a50: Mounted from library/ubuntu\n762d8e1a6054: Mounted from library/ubuntu\nlatest: digest: sha256:99aab145aaa0bf0e51a2ab995e0051b1756e1016cbc7d82bcee663c79f56b5c3 size: 1150\n</code></pre>"},{"location":"2_component/dockerfile/#4-docker-hub","title":"4. Docker Hub \u306e\u78ba\u8a8d","text":"<p>https://hub.docker.com/ \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001 <code>&lt;USER NAME&gt;/hello</code> \u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/dockerfile/#5-docker-hub-docker-image","title":"5. Docker Hub \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305fDocker Image\u306e\u5b9f\u884c","text":"<p>\u307e\u305a\u306f\u73fe\u5728\u5b58\u5728\u3059\u308b\u30ed\u30fc\u30ab\u30eb\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u3002 \u540c\u540d\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u5b58\u5728\u3059\u308b\u3068DockerHub\u304b\u3089\u53d6\u5f97\u305b\u305a\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u5b58\u5728\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u3057\u307e\u3046\u304b\u3089\u3067\u3059\u3002</p> <p>\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664 <pre><code>$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES\n429c028bcf74        ubuntu              \"echo hoge\"         16 seconds ago      Exited (0) 15 seconds ago                       stoic_greider\n$ docker container prune\nWARNING! This will remove all stopped containers.\nAre you sure you want to continue? [y/N] y\nDeleted\n</code></pre></p> <p>\u30ed\u30fc\u30ab\u30eb\u306eImage\u3092\u524a\u9664 <pre><code>$ docker image prune -a\nWARNING! This will remove all images without at least one container associated to them.\nAre you sure you want to continue? [y/N] y\nDeleted Images:\n</code></pre> <pre><code>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n$ \n</code></pre></p> <p>Docker Hub \u304b\u3089\u4f5c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u306e\u53d6\u5f97 <pre><code>$ docker pull &lt;USER NAME&gt;/hello\nUsing default tag: latest\nlatest: Pulling from &lt;USER NAME&gt;/hello\n898c46f3b1a1: Pull complete\n63366dfa0a50: Pull complete\n041d4cd74a92: Pull complete\n6e1bee0f8701: Pull complete\nDigest: sha256:99aab145aaa0bf0e51a2ab995e0051b1756e1016cbc7d82bcee663c79f56b5c3\nStatus: Downloaded newer image for &lt;USER NAME&gt;/hello:latest\n</code></pre></p> <p>Docker\u30a4\u30e1\u30fc\u30b8\u306e\u5b9f\u884c <pre><code>$ docker run &lt;USER NAME&gt;/hello\nhello docker !\n</code></pre></p>"},{"location":"2_component/dockerfile/#dsl","title":"DSL","text":""},{"location":"2_component/dockerfile/#_1","title":"\u30b3\u30de\u30f3\u30c9","text":"<p>Dockerfile\u306b\u306f17\u306e\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p><code>FROM</code> , <code>ENV</code> , <code>WORKDIR</code> , <code>RUN</code> , <code>ADD</code> , <code>ARGS</code> , <code>CMD</code> , <code>ONBUILD</code> , <code>LABEL</code> , <code>ENTRYPOINT</code> , <code>STOPSIGNAL</code> , <code>MAINTAINER</code> , <code>VOLUME</code> , <code>HEALTHCHECK</code> , <code>EXPOSE</code> , <code>USER</code> , <code>SHELL</code></p> <p>MAINTAINER\u30b3\u30de\u30f3\u30c9</p> <p><code>MAINTAINER</code> \u30b3\u30de\u30f3\u30c9\u306f\u975e\u63a8\u5968\u3067\u3059\u3002 \u3053\u306e\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308bDockerfile\u306f\u65e2\u306b\u53e4\u304f\u306a\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/dockerfile/#_2","title":"\u57fa\u672c\u7684\u306a\u30b3\u30de\u30f3\u30c9","text":"<p>\u500b\u4eba\u7684\u306b\u3001Dockerfile\u3092\u672c\u756a\u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u4ee5\u4e0b\u306e8\u3064\u306e\u30b3\u30de\u30f3\u30c9\u3092\u899a\u3048\u308b\u3060\u3051\u3067\u5341\u5206\u3060\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002  </p> <p><code>FROM</code> , <code>COPY</code> , <code>RUN</code> , <code>CMD</code> , <code>WORKDIR</code> , <code>ENV</code> , <code>USER</code> , <code>EXPOSE</code></p> <p>Node.js\u3092\u52d5\u304b\u3059\u969b\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u7528\u610f\u3057\u305f\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u306eDockerfile\u3092\u3082\u3068\u306b\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002 \u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 introduction-docker/handson/dockerfile at master \u00b7 y-ohgi/introduction-docker</p> <pre><code>FROM node\n\nENV NODE_ENV=production\n\nWORKDIR /scripts\n\nCOPY package* .\n\nRUN &lt;&lt;EOF\nnpm install\ngroupadd app\nuseradd -g app -m app\nmv /root/.config /home/app/ \\\nchown -R app:app /scripts /home/app/.config\nEOF\n\nCOPY . .\n\nRUN npm run build\n\nUSER app\n\nEXPOSE 3000\n\nCMD [\"npm\", \"run\", \"start\"]\n</code></pre>"},{"location":"2_component/dockerfile/#from","title":"FROM","text":"<p>\u30d9\u30fc\u30b9\u3068\u306a\u308bDocker Image\uff08\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\uff09\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 Docker\u306f\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u4e0a\u306b <code>COPY</code> \u3084 <code>RUN</code> \u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3092\u91cd\u306d\u3066\u30a4\u30e1\u30fc\u30b8\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002 \u307e\u305f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306fDocker Hub\u3084Google Cloud\u306a\u3069\u306e\u4fe1\u983c\u3067\u304d\u308b\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u306e\u304c\u4e00\u822c\u7684\u3067\u3059\u3002</p> <pre><code>FROM node\n</code></pre>"},{"location":"2_component/dockerfile/#env","title":"ENV","text":"<p>Docker\u5185\u3067\u4f7f\u7528\u3059\u308b\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002 <code>NODE_ENV</code> \u306e\u3088\u3046\u306aDocker\u306e\u8d77\u52d5\u6642\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u307b\u3057\u3044\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p> <pre><code>ENV NODE_ENV=production\n</code></pre>"},{"location":"2_component/dockerfile/#workdir","title":"WORKDIR","text":"<p>Dockerfile\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u969b\u306b\u57fa\u6e96\u3068\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \u3053\u306e\u969b\u5b58\u5728\u3057\u306a\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u591a\u304f\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3067 <code>/</code> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u65b0\u305f\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p> <pre><code>WORKDIR /scripts\n</code></pre>"},{"location":"2_component/dockerfile/#copy","title":"COPY","text":"<p>Docker\u5185\u3078\u30db\u30b9\u30c8\u306e\u30d5\u30a1\u30a4\u30eb/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <code>COPY</code> \u306f\u57fa\u672c\u7684\u306b2\u3064\u306e\u5f15\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u30021\u3064\u76ee\u306f\u30db\u30b9\u30c8\u5074\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30012\u3064\u76ee\u306fDocker\u5074\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002 \u30db\u30b9\u30c8\u5074\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f <code>docker build .</code> \u3067\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002\u3053\u306e\u5834\u5408 <code>.</code> \u3092\u6307\u5b9a\u3057\u3066\u304a\u308a\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u53c2\u7167\u3055\u308c\u307e\u3059\u3002 Docker\u5074\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d1\u30b9\u3001\u3082\u3057\u304f\u306f <code>WORKDIR</code> \u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53c2\u7167\u3057\u307e\u3059\u3002</p> <pre><code>COPY . .\n</code></pre>"},{"location":"2_component/dockerfile/#run","title":"RUN","text":"<p>Docker\u5185\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u3053\u3053\u3067\u30b3\u30f3\u30c6\u30ca\u3078\u4f9d\u5b58\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u8a2d\u5b9a\u306a\u3069\u306e\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002  </p> <pre><code>RUN npm install\n</code></pre>"},{"location":"2_component/dockerfile/#user","title":"USER","text":"<p>\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u6642\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>root</code> \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u5225\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p> <pre><code>USER app\n</code></pre>"},{"location":"2_component/dockerfile/#expose","title":"EXPOSE","text":"<p>\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u6642\u306b\u516c\u958b\u3059\u308b\u30dd\u30fc\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 <code>EXPOSE</code> \u3092\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u4ed6\u306e\u4eba\u304b\u3089\u300c\u3053\u306eDocker\u306f\u3069\u306e\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u306e\u304b\u300d\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u306a\u308b\u305f\u3081\u3001\u8a18\u8ff0\u3059\u308b\u3068\u4e01\u5be7\u3067\u3059\u3002 <pre><code>EXPOSE 3000\n</code></pre></p>"},{"location":"2_component/dockerfile/#cmd","title":"CMD","text":"<p>Docker\u8d77\u52d5\u6642\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002 Docker\u306f\u3053\u3053\u3067\u8a2d\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u304c\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u9593\u304c\u751f\u5b58\u671f\u9593\u306b\u306a\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001\u30d7\u30ed\u30bb\u30b9\u306e\u51e6\u7406\u304c\u8d70\u3063\u3066\u3044\u308b\u9593\u306f\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059(\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3059\u308b\u3068Docker\u304c\u7d42\u4e86\u3057\u3066\u3057\u307e\u3044\u307e\u3059)\u3002</p> <pre><code>CMD [\"npm\", \"run\", \"start\"]\n</code></pre>"},{"location":"2_component/dockerfile/#_3","title":"\u3088\u304f\u4f7f\u7528\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9","text":"<p>\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u5c11\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u305d\u306e\u4ed6\u306e\u983b\u51fa\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002 \u899a\u3048\u3066\u304a\u304f\u3068\u4ed6\u306e\u4eba\u306eDockerfile\u3092\u8aad\u3080\u969b\u306b\u5f79\u7acb\u3064\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/dockerfile/#volume","title":"VOLUME","text":"<p>Data Volume\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002Volume\u306b\u3064\u3044\u3066\u306f\u5f8c\u306e\u7ae0\u3067\u8aac\u660e\u3057\u307e\u3059\u3002 \u6c38\u7d9a\u7684\u306a\u30c7\u30fc\u30bf\u30fb\u5171\u6709\u3059\u308b\u305f\u3081\u306e\u30c7\u30fc\u30bf\u30fb\u66f4\u65b0\u983b\u5ea6\u306e\u6fc0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u6271\u3046\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002 \u57fa\u672c\u7684\u306b\u6c38\u7d9a\u7684\u306a\u30c7\u30fc\u30bf\u306fDocker\u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u306f\u63a8\u5968\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u57fa\u672c\u7684\u306b\u30ed\u30b0\u306e\u3088\u3046\u306a\u66f4\u65b0\u983b\u5ea6\u306e\u6fc0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3067\u4f7f\u7528\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p> <pre><code>VOLUME [\"/app/log\"]\n</code></pre>"},{"location":"2_component/dockerfile/#arg","title":"ARG","text":"<p>Dockerfile\u306e\u30d3\u30eb\u30c9\u6642\u306b\u5909\u6570\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002 \u4f8b\u3048\u3070 <code>NODE_ENV</code> \u3092\u57fa\u672cproduction\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306bdevelopment\u306b\u3057\u305f\u3044\u5834\u5408\u306e\u4f8b\u3067\u3059\u3002</p> <p><pre><code>ARG ${NODE_END:-production}\nENV NODE_END=${CONT_IMG_VER}\n</code></pre> <pre><code>$ docker buildx build --build-arg NODE_ENV=development .\n</code></pre></p>"},{"location":"2_component/dockerfile/#add","title":"ADD","text":"<p><code>COPY</code> \u30b3\u30de\u30f3\u30c9\u3092\u62e1\u5f35\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3067\u3001\u57fa\u672c\u7684\u306b\u975e\u63a8\u5968\u3067\u3059\u3002 \u4e3b\u306b\u4ee5\u4e0b\u306e3\u3064\u306e\u6a5f\u80fd\u3092\u6301\u3061\u307e\u3059\u3002</p> <ol> <li><code>COPY</code> \u3068\u540c\u3058\u304f\u6307\u5b9a\u3057\u305f\u30d1\u30b9\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u3078\u30b3\u30d4\u30fc</li> <li>URL\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u305d\u306eURL\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u3078\u30b3\u30d4\u30fc</li> <li>\u30b3\u30d4\u30fc\u3055\u308c\u305f\u30d1\u30b9\u304c <code>.tar</code> \u3082\u3057\u304f\u306f <code>.tar.gz</code> \u306e\u5834\u5408\u89e3\u51cd\u3059\u308b</li> </ol> <p>ADD vs COPY</p> <p>\u57fa\u672c\u7684\u306b <code>ADD</code> \u3092\u4f7f\u3046\u306e\u306f\u907f\u3051\u3001 <code>COPY</code> \u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002 <code>ADD</code> \u306f\u300c\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\u300d\u30fb\u300c\u6307\u5b9a\u3057\u305fURL\u306e\u53d6\u5f97 \u300d\u30fb\u300c\u5727\u7e2e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u89e3\u51cd\u300d\u3068\u975e\u5e38\u306b\u9ad8\u6a5f\u80fd\u306a\u53cd\u9762\u3001Dockerfile\u306e\u8907\u96d1\u5ea6\u304c\u5897\u3057\u307e\u3059\u3002 \u307e\u305f\u3001URL\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3059\u308b\u306e\u306f\u30d1\u30d6\u30ea\u30c3\u30af\u3078\u4f9d\u5b58\u304c\u767a\u751f\u3057\u3001URL\u306e\u53c2\u7167\u5148\u304c\u5909\u66f4\u3055\u308c\u305f\u969b\u306b\u30d3\u30eb\u30c9\u4e0d\u53ef\u306aDockerfile\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002 <code>COPY</code> \u306e\u5834\u5408\u6a5f\u80fd\u304c\u30b7\u30f3\u30d7\u30eb\u306a\u306e\u3067\u30b7\u30f3\u30d7\u30eb\u306aDockerfile\u306e\u4f5c\u6210\u306b\u7e4b\u304c\u308a\u307e\u3059\u3002</p>"},{"location":"2_component/dockerfile/#entrypoint","title":"ENTRYPOINT","text":"<p>\u6307\u5b9a\u3055\u308c\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 CMD\u3068\u306f\u7570\u306a\u308a\u3001 <code>docker run</code> \u6642\u306b\u6307\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092 <code>ENTRYPOINT</code> \u306e\u5f15\u6570\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>ENTRYPOINT [\"echo\"]\n</code></pre> <p>\u5f15\u6570\u306b \"hello\" \u3092\u6e21\u3059\u3068 <code>echo \"hello\"</code> \u304c\u5b9f\u884c\u3055\u308c\u308b <pre><code>$ docker run &lt;IMAGE NAME&gt; \"hello!\"\nhello!\n</code></pre></p> <p><code>entrypoint</code> \u306f\u5b9f\u884c\u6642\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd <pre><code>$ docker run --entrypoint date &lt;IMAGE NAME&gt;\nMon Mar 18 22:36:19 JST 2019\n</code></pre></p> <p>ENTRYPOINT vs CMD</p> <p>\u57fa\u672c\u7684\u306b <code>CMD</code> \u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002 <code>ENTRYPOINT</code> \u306fDocker\u8d77\u52d5\u6642\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5f37\u5236\u3057\u307e\u3059\u3002 \u30b3\u30de\u30f3\u30c9\u306e\u30e9\u30c3\u30d7\u3092\u3059\u308bDocker Image \u306e\u5834\u5408\u306f <code>ENTRYPOINT</code> \u306e\u307b\u3046\u304c\u597d\u307e\u3057\u3044\u3067\u3059\u304c\u3001\u4e00\u822c\u7684\u306aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5834\u5408\u306f <code>CMD</code> \u3092\u4f7f\u7528\u3059\u308b\u65b9\u304c\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u4f7f\u3044\u3084\u3059\u3044Docker Image \u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"2_component/dockerfile/#_4","title":"\u307e\u3068\u3081","text":"<ul> <li>Dockerfile\u3092\u5143\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u751f\u6210\u3059\u308b\u3002</li> <li>\u30a4\u30e1\u30fc\u30b8\u306f\u306fDocker\u30ec\u30b8\u30b9\u30c8\u30ea\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u5bb9\u6613\u306b\u4fdd\u7ba1/\u914d\u5e03\u304c\u3067\u304d\u308b</li> <li>Dockerfile\u306f\u57fa\u672c\u7684\u306b8\u500b\u306e\u30b3\u30de\u30f3\u30c9\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u4f5c\u6210\u3067\u304d\u308b</li> </ul>"},{"location":"2_component/image/","title":"Docker Image\u3068\u306f","text":""},{"location":"2_component/image/#docker-image","title":"Docker Image\u3068\u306f","text":"<p>Image\u306f \"\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\" \u3068\u3057\u3066\u306e\u5f79\u5272\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002 \u4f8b\u3048\u3070CentOS\u3084Ubuntu\u3084Alpine\u306a\u3069\u306eOS\u3001Nginx\u3084MySQL\u306e\u3088\u3046\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001PHP\u3084Ruby\u306e\u3088\u3046\u306a\u30e9\u30f3\u30bf\u30a4\u30e0\u306a\u3069\u306e\u74b0\u5883\u3092\u63d0\u4f9b\u3057\u3066\u304f\u308c\u307e\u3059\u3002</p> <p>\u3053\u306e\u7ae0\u3067\u306f\u3053\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u4ed5\u7d44\u307f\u3067\u3042\u308bDocker Image\u306b\u3064\u3044\u3066\u30cf\u30f3\u30ba\u30aa\u30f3\u5f62\u5f0f\u3067\u5b66\u3093\u3067\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"2_component/image/#ubuntu","title":"Ubuntu\u3092\u52d5\u304b\u3059","text":"<p>\u306f\u3058\u3081\u306b\u3001Docker\u4e0a\u3067Ubuntu\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 \u5148\u7a0b\u306fNginx\u306e\u3088\u3046\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u52d5\u304b\u3057\u307e\u3057\u305f\u304c\u3001Docker\u3067\u306fUbuntu\u306e\u3088\u3046\u306aOS\u3082\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"2_component/image/#imagepull","title":"Image\u306ePull","text":"<p>Docker Image \u306fDocker\u306e\u516c\u5f0f\u304c DockerHub \u3068\u547c\u3070\u308c\u308b\u30b5\u30fc\u30d3\u30b9\u4e0a\u3067\u69d8\u3005\u306aOS\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002 DockerHub\u4e0a\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308bUbuntu\u3092\u4eca\u56de\u306f\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p>\u307e\u305a\u306fUbuntu\u306eDocker Image\u3092DockerHub\u4e0a\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002 <code>docker pull ubuntu</code> \u3067DockerHub\u4e0a\u304b\u3089\u30ed\u30fc\u30ab\u30eb\u3078\u53d6\u5f97\u3057\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ docker pull ubuntu\nUsing default tag: latest\nlatest: Pulling from library/ubuntu\n898c46f3b1a1: Pull complete\n63366dfa0a50: Pull complete\n041d4cd74a92: Pull complete\n6e1bee0f8701: Pull complete\nDigest: sha256:017eef0b616011647b269b5c65826e2e2ebddbe5d1f8c1e56b3599fb14fabec8\nStatus: Downloaded newer image for ubuntu:latest\n</code></pre>"},{"location":"2_component/image/#ubuntu_1","title":"Ubuntu\u4e0a\u3067\u30b3\u30de\u30f3\u30c9\u3092\u52d5\u304b\u3059","text":"<p><code>docker run</code> \u30b3\u30de\u30f3\u30c9\u3067Image\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u5148\u7a0b\u53d6\u5f97\u3057\u305fubuntu\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3057\u3001 <code>cat /etc/issue</code> \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u5b9f\u969b\u306bUbuntu\u304c\u52d5\u304f\u306e\u304b\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <p>\u307e\u305a\u306fPlay with Docker\u4e0a\u306e\u30db\u30b9\u30c8\u304cAlpineLinux\u3067\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d <pre><code>$ cat /etc/issue\nWelcome to Alpine Linux 3.9\nKernel \\r on an \\m (\\l)\n</code></pre></p> <p>\u6b21\u306bDocker\u4e0a\u3067Ubuntu\u3092\u5b9f\u884c\u3057\u3001Ubuntu\u304c\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <code>docker run ubuntu</code> \u3067Ubuntu\u306eImage\u3092\u5b9f\u884c\u3057\u3001\u305d\u306e\u5f15\u6570\u3078 <code>cat /etc/hosts</code> \u3092\u6e21\u3057\u307e\u3059\u3002 <pre><code>$ docker run ubuntu cat /etc/issue\nUbuntu 18.04.1 LTS\n</code></pre></p>"},{"location":"2_component/image/#bash","title":"bash\u3092\u4f7f\u7528\u3059\u308b","text":"<p>\u6b21\u306fbash\u3092\u4f7f\u7528\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <p><code>bash</code> \u306e\u3088\u3046\u306a\u5bfe\u8a71\u7684\u306a\u5165\u529b\u304c\u5fc5\u8981\u306a\u30d7\u30ed\u30bb\u30b9\u3082\u5b9f\u884c\u304c\u53ef\u80fd\u3067\u3059\u3002 \u5bfe\u8a71\u7684\u306b\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f <code>-i -t</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p>Ubuntu\u4e0a\u3067bash\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ docker run -i -t ubuntu bash\n# \n</code></pre> <p>bash\u306e\u4e2d\u306b\u5165\u308c\u305f\u3089\u8a66\u3057\u306b\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u3001Ubuntu\u4e0a\u306b\u5c45\u308b\u304b\u78ba\u304b\u3081\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <pre><code># cat /etc/issue\nUbuntu 18.04.1 LTS\n</code></pre> <p>\u30db\u30b9\u30c8\u3068\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u7570\u306a\u308b\u74b0\u5883\u3068\u3044\u3046\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3067\u3057\u3087\u3046\u304b\u3002 \u4ed6\u306b\u3082 <code>ls</code> , <code>env</code> , <code>ps</code> \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u9762\u767d\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p>\u4e00\u901a\u308a\u78ba\u8a8d\u3057\u7d42\u308f\u3063\u305f\u3089 <code>exit</code> \u30b3\u30de\u30f3\u30c9\u3067\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u8131\u51fa\u3057\u307e\u3057\u3087\u3046\u3002</p> <pre><code># exit\n$\n</code></pre> <p> <code>-i</code> <code>-t</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p><code>-i</code> \u306f\u30b3\u30f3\u30c6\u30ca\u306e\u6a19\u6e96\u5165\u529b\u3092\u6709\u52b9\u5316\u3001 <code>-t</code> \u306ftty\u3092\u6709\u52b9\u5316\u3059\u308b\u305f\u3081\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002 <code>docker run -it ...</code> \u306e\u3088\u3046\u306b\u7701\u7565\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"2_component/image/#docker","title":"\u597d\u304d\u306a\u8a00\u8a9e\u3067Docker\u3092\u8d77\u52d5\u3059\u308b","text":"<p>\u3053\u3053\u307e\u3067nginx\u3068ubuntu\u3092\u8d77\u52d5\u3057\u3066\u304d\u307e\u3057\u305f\u304c\u3001\u4ed6\u306eDocker Image\u3082\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002  </p> <p>\u8a66\u3057\u306b\u3042\u306a\u305f\u304c\u597d\u304d\u306a\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u304c\u4f7f\u7528\u53ef\u80fd\u304b\u63a2\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <code>docker search &lt;LANGUAGE&gt;</code> \u3067\u30d1\u30d6\u30ea\u30c3\u30af\u306aDocker Image \u3092\u63a2\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u3053\u3067\u306f\u8a66\u3057\u306bRuby\u3092\u63a2\u3057\u3066\u307f\u307e\u3059\u3002 <pre><code>$ docker search ruby\nNAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nruby                              Ruby is a dynamic, reflective, object-orient\u2026   1621                [OK]\nredmine                           Redmine is a flexible project management web\u2026   712                 [OK]\njruby                             JRuby (http://www.jruby.org) is an implement\u2026   82                  [OK]\ncircleci/ruby                     Ruby is a dynamic, reflective, object-orient\u2026   56\nstarefossen/ruby-node             Docker Image with Ruby and Node.js installed    26                                      [OK]\n  :\n</code></pre></p> <p>\u8907\u6570 <code>ruby</code> \u306b\u30de\u30c3\u30c1\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002 <code>OFFICIAL</code> \u30ab\u30e9\u30e0\u306b <code>[OK]</code> \u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u304cDocker\u516c\u5f0f\u306b\u8a8d\u3081\u3089\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002  </p> <p>\u3055\u3066\u3001\u6b21\u306f\u898b\u3064\u3051\u305f\u30a4\u30e1\u30fc\u30b8\u3078\u30b3\u30de\u30f3\u30c9\u3092\u4e0e\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002 \u4eca\u56de\u306f\u300c <code>ruby</code> \u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u6a19\u6e96\u51fa\u529b\u3092\u51fa\u529b\u3059\u308b\u300d\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u4e0e\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ docker run ruby ruby -e 'puts \"Hello, Docker!\"'\nUnable to find image 'ruby:latest' locally\nlatest: Pulling from library/ruby\n741437d97401: Pull complete\n34d8874714d7: Pull complete\n0a108aa26679: Pull complete\n7f0334c36886: Pull complete\n49ea0d2b5c48: Pull complete\n5238ef6d63d6: Pull complete\n6c57ebbe7911: Pull complete\n6cf2f39ff067: Pull complete\nDigest: sha256:20830a7eb2c48390644cc233fd17520794e5bfce523516fc904068930de16a45\nStatus: Downloaded newer image for ruby:latest\nHello, Docker!\n</code></pre> <p>Pull\u306e\u7701\u7565</p> <p><code>docker pull &lt;\u30a4\u30e1\u30fc\u30b8\u540d&gt;</code> \u3067\u53d6\u5f97\u3057\u3066\u3044\u306a\u3044Docker Image\u3092 <code>docker run</code> \u306e\u969b\u306b\u6307\u5b9a\u3059\u308b\u3068\u81ea\u52d5\u7684\u306bDockerHub\u3078\u53d6\u5f97\u3057\u306b\u884c\u304d\u307e\u3059\u3002 \u57fa\u672c\u7684\u306b <code>docker pull &lt;\u30a4\u30e1\u30fc\u30b8\u540d&gt;</code> \u306f\u7701\u7565\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u304c\u3001\u7701\u7565\u3057\u305f\u5834\u5408\u306b\u3082\u6697\u9ed9\u7684\u306b <code>pull</code> \u3092\u884c\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u610f\u8b58\u3057\u3066\u4f7f\u7528\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"2_component/image/#image","title":"\u4ed6\u306eImage\u3067\u306e\u4f7f\u7528\u4f8b","text":""},{"location":"2_component/image/#centos","title":"CentOS","text":"<pre><code>$ docker run -it centos bash\nUnable to find image 'centos:latest' locally\nlatest: Pulling from library/centos\n8ba884070f61: Pull complete\nDigest: sha256:8d487d68857f5bc9595793279b33d082b03713341ddec91054382641d14db861\nStatus: Downloaded newer image for centos:latest\n# cat /etc/redhat-release\nCentOS Linux release 7.6.1810 (Core)\n# exit\n</code></pre>"},{"location":"2_component/image/#nodejs","title":"Node.js","text":"<pre><code>$ docker run node node --version\nv11.11.0\n$ docker run node node -p 'console.log(\"hoge\")'\nhoge\n</code></pre>"},{"location":"2_component/image/#python","title":"Python","text":"<pre><code>$ docker run python python --version\nPython 3.7.2\n$ docker run python python -c 'print(\"hoge\")'\nhoge\n</code></pre>"},{"location":"2_component/image/#tag","title":"tag\u3092\u4f7f\u7528\u3059\u308b","text":"<p>DockerImage\u306b\u306ftag\u3068\u3044\u3046\"\u30e9\u30d9\u30eb\"\u306e\u5f79\u5272\u3092\u6301\u3064\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002 \u57fa\u672c\u7684\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3092\u76ee\u7684\u306b\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002</p> <p>\u4f8b\u3048\u3070Python\u306e2.7\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u3001\u5358\u7d14\u306bpull\u3057\u3066run\u3092\u3059\u308b\u30683.7\u304c\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3059(2019\u5e743\u6708\u73fe\u5728)\u3002  </p> <pre><code>$ docker run python python --version\nPython 3.7.2\n</code></pre> <p>\u516c\u5f0f\u30a4\u30e1\u30fc\u30b8\u30672.7\u304c\u30db\u30b9\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002  </p> <p>https://hub.docker.com/_/python</p> <p></p> <p><code>2.7</code> \u3068\u3044\u3046\u30bf\u30b0\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u65e9\u901f\u8d70\u3089\u305b\u3066Python\u306e2.7\u306e\u74b0\u5883\u304c\u624b\u306b\u5165\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ docker run python:2.7 python --version\nPython 2.7.16\n</code></pre> <p>Tag\u306e\u547d\u540d\u898f\u5247</p> <p>Docker\u306f\u516c\u5f0f\u30673\u30d1\u30bf\u30fc\u30f3\u306e\u547d\u540d\u898f\u5247\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002  </p> <ol> <li>Docker\u516c\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8<ul> <li><code>&lt;\u30a4\u30e1\u30fc\u30b8\u540d&gt;:&lt;\u30bf\u30b0&gt;</code></li> </ul> </li> <li>\u30e6\u30fc\u30b6\u30fc\u304c\u4f5c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8<ul> <li><code>&lt;\u30e6\u30fc\u30b6\u30fc\u540d&gt;/&lt;\u30a4\u30e1\u30fc\u30b8\u540d&gt;:&lt;\u30bf\u30b0&gt;</code></li> </ul> </li> <li>\u975e\u516c\u5f0f\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u30a4\u30e1\u30fc\u30b8<ul> <li><code>&lt;\u30ec\u30b8\u30b9\u30c8\u30ea\u540d&gt;/&lt;\u30e6\u30fc\u30b6\u30fc\u540d&gt;/&lt;\u30a4\u30e1\u30fc\u30b8\u540d&gt;:&lt;\u30bf\u30b0&gt;</code></li> </ul> </li> </ol> <p><code>:&lt;\u30bf\u30b0&gt;</code> \u306e\u6307\u5b9a\u3092\u3057\u306a\u3044\u5834\u5408\u306f <code>:latest</code> \u30bf\u30b0\u304c\u81ea\u52d5\u7684\u306b\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002 \u307e\u305f\u3001DockerHub\u3092\u4f7f\u7528\u3057\u306a\u3044\u5834\u5408(ECR\u3084GCR\u306a\u3069\u306e\u975e\u516c\u5f0f\u30ec\u30b8\u30b9\u30c8\u30ea)\u306ftag\u306e\u8a2d\u5b9a\u304c\u5fc5\u9808\u306b\u306a\u308a\u307e\u3059(3\u756a\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059)\u3002</p>"},{"location":"2_component/image/#_1","title":"\u307e\u3068\u3081","text":"<ul> <li>Docker Image\u306f\u7279\u5b9a\u306e\u74b0\u5883\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3067\u3001Image\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u3067\u74b0\u5883\u3092\u518d\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b</li> <li>DockerHub\u304b\u3089\u69d8\u3005\u306aDocker Image\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b</li> <li>tag\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u7279\u5b9a\u306e\u30d0\u30fc\u30b8\u30e7\u30f3(\u3068\u30ec\u30b8\u30b9\u30c8\u30ea)\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b</li> </ul>"},{"location":"2_component/network/","title":"Network\u306b\u3064\u3044\u3066","text":""},{"location":"2_component/network/#network","title":"Network\u3092\u4f7f\u7528\u3059\u308b","text":"<p>Docker\u3067\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u6271\u3044\u304c\u91cd\u8981\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002 \u5148\u8ff0\u3057\u305fDocker Container \u306e\u52d5\u304d\u306e\u901a\u308a 1\u30b3\u30f3\u30c6\u30ca\u3067\u306f1\u30d7\u30ed\u30bb\u30b9\u3092\u52d5\u304b\u3059 \u8a2d\u8a08\u3067\u3059\u3002 nginx\u3068php-fpm\u306e\u3088\u3046\u306b\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u3092\u5354\u8abf\u3057\u3066\u52d5\u304b\u3059\u5fc5\u8981\u304c\u3042\u308b\u6642\u306f\u30bd\u30b1\u30c3\u30c8\u3067\u306f\u306a\u304f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u901a\u4fe1\u3092\u884c\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>Docker\u3067\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f\u7279\u306bKubernetes\u30fbECS\u30fbdocker-compose\u306e\u3088\u3046\u306a\u5404\u7a2e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"2_component/network/#driver","title":"Driver\u306e\u7a2e\u985e","text":"<p>Docker\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f2\u7a2e\u985e\u306eNetwork Driver \u304c\u5b58\u5728\u3057\u307e\u3059\u3002</p>"},{"location":"2_component/network/#1-bridge","title":"1. <code>bridge</code>","text":"<p>Docker\u3092\u4f7f\u7528\u3059\u308b\u969b\u306f\u57fa\u672c\u7684\u306b\u3053\u306eNetwork Driver\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002 Linux\u30ab\u30fc\u30cd\u30eb\u306ebridge\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd</p> <p>\u307e\u305f\u3001\u4f55\u3082\u6307\u5b9a\u305b\u305aDocker Container \u3092\u8d77\u52d5\u3059\u308b\u3068 <code>docker0</code> \u3068\u3044\u3046\u540d\u524d\u306ebridge\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u6240\u5c5e\u3057\u307e\u3059\u3002</p>"},{"location":"2_component/network/#2-host","title":"2. <code>host</code>","text":"<p>\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306eeth0\u3092\u76f4\u63a5\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002</p>"},{"location":"2_component/network/#3-none","title":"(3. <code>none</code> )","text":"<p>\u3069\u306eDriver\u3082\u4f7f\u7528\u305b\u305a\u3001\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u6240\u5c5e\u3055\u305b\u306a\u3044\u305f\u3081\u306e\u8a2d\u5b9a\u3067\u3059\u3002</p>"},{"location":"2_component/network/#_1","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u8a66\u3059","text":""},{"location":"2_component/network/#1","title":"1. \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b58\u5728\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u78ba\u8a8d","text":"<p>\u73fe\u5728Docker\u304c\u7ba1\u7406\u3057\u3066\u3044\u308bNetwork\u4e00\u89a7\u3092\u51fa\u529b\u3057\u307e\u3059\u3002 <pre><code>$ docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n5d465d8f421e        bridge              bridge              local\n8ca0ba4f70cb        host                host                local\nf4c209eabaad        none                null                local\n</code></pre></p> <p>\u30db\u30b9\u30c8\u5074\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <code>docker0</code> \u3068\u3044\u3046\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5b58\u5728\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>$ ip a\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n2: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN\n    link/ether 02:42:bb:3c:72:1d brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n14170: eth1@if14171: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP\n    link/ether 02:42:ac:12:00:03 brd ff:ff:ff:ff:ff:ff\n    inet 172.18.0.3/16 scope global eth1\n       valid_lft forever preferred_lft forever\n14172: eth0@if14173: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP\n    link/ether ee:7a:0c:ea:1e:70 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.0.28/23 scope global eth0\n       valid_lft forever preferred_lft forever\n</code></pre></p>"},{"location":"2_component/network/#2","title":"2. \u65b0\u3057\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u4f5c\u6210","text":"<p>\u6b21\u306f\u65b0\u3057\u3044Bridge\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002</p> <pre><code>$ docker network create myapp\n5d170daf5b6e90fadf9ba0fc647cbf52dc8a442e79e258f9c8c617b3aeef4778\n</code></pre> <p>network\u306b <code>myapp</code> \u304c\u5897\u3048\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n5d465d8f421e        bridge              bridge              local\n8ca0ba4f70cb        host                host                local\n+5d170daf5b6e        myapp               bridge              local\nf4c209eabaad        none                null                local\n</code></pre></p> <p>\u30db\u30b9\u30c8\u5074\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3082\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ ip a\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n2: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN\n    link/ether 02:42:bb:3c:72:1d brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n+3: br-5d170daf5b6e: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN\n+    link/ether 02:42:d7:12:d9:88 brd ff:ff:ff:ff:ff:ff\n+    inet 172.19.0.1/16 brd 172.19.255.255 scope global br-5d170daf5b6e\n+       valid_lft forever preferred_lft forever\n14170: eth1@if14171: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP\n    link/ether 02:42:ac:12:00:03 brd ff:ff:ff:ff:ff:ff\n    inet 172.18.0.3/16 scope global eth1\n       valid_lft forever preferred_lft forever\n14172: eth0@if14173: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP\n    link/ether ee:7a:0c:ea:1e:70 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.0.28/23 scope global eth0\n       valid_lft forever preferred_lft forever\n</code></pre></p>"},{"location":"2_component/network/#3-networknginx","title":"3. \u4f5c\u6210\u3057\u305fNetwork\u3078nginx\u3092\u53c2\u52a0\u3055\u305b\u308b","text":"<p>\u901a\u4fe1\u3092\u53d7\u3051\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066nginx\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002 <pre><code>$ docker run --name nginx --network=myapp -d nginx\n</code></pre></p>"},{"location":"2_component/network/#3-amazonlinux2nginx","title":"3. AmazonLinux2\u3092\u8d77\u52d5\u3057\u3001Nginx\u30b3\u30f3\u30c6\u30ca\u3078\u63a5\u7d9a\u3059\u308b","text":"<p>Bridge\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5834\u5408\u3001\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u306f\u30b3\u30f3\u30c6\u30ca\u540d\u3067\u540d\u524d\u89e3\u6c7a\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <p>Nginx\u3068\u758e\u901a\u3067\u304d\u308b\u304b <code>myapp</code> \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306bAmazonLinux2 \u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3001 <code>curl</code> \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ docker run --network=myapp -it amazonlinux:2 curl nginx:80\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\"http://nginx.org/\"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\"http://nginx.com/\"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n$ \n</code></pre>"},{"location":"2_component/network/#4","title":"4. \u65b0\u3057\u304f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f5c\u6210\u3057\u3001\u758e\u901a\u3067\u304d\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b","text":"<p><code>myapp2</code> \u3068\u3044\u3046\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f5c\u6210\u3057\u3001 <code>nginx2</code> \u3068\u3044\u3046\u547d\u540d\u3067nginx\u3092\u8d77\u52d5\u3059\u308b\u3002 <pre><code>$ docker network create myapp2\n$ docker run --name nginx2 --network=myapp2 -d nginx\n</code></pre></p> <p><code>myapp</code> \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u6240\u5c5e\u3057\u3066\u3044\u308bAmazonLinux2\u304b\u3089curl\u3092\u5b9f\u884c\u3057\u3001\u758e\u901a\u3067\u304d\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002 <pre><code>$ docker run --network=myapp -it amazonlinux:2 curl nginx2:80\ncurl: (6) Could not resolve host: nginx2\n</code></pre></p>"},{"location":"2_component/network/#_2","title":"\u307e\u3068\u3081","text":"<ul> <li>1\u30d7\u30ed\u30bb\u30b91\u30b3\u30f3\u30c6\u30ca\u3001\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u901a\u3057\u3066\u901a\u4fe1\u3092\u884c\u3046\u3002</li> <li>Bridge\u3092\u57fa\u672c\u7684\u306b\u4f7f\u7528\u3059\u308b\u3002</li> </ul>"},{"location":"2_component/volume/","title":"Volume\u306b\u3064\u3044\u3066","text":""},{"location":"2_component/volume/#volume","title":"Volume\u306b\u3064\u3044\u3066","text":"<p>\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3067\u3059\u3002</p> <p>Docker Container\u306f\u57fa\u672c\u7684\u306b\u30a8\u30d5\u30a7\u30e1\u30e9\u30eb\u306a\u3082\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u4f5c\u6210\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u7d42\u4e86\u3068\u5171\u306b\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002 Volume\u306f\u30c7\u30fc\u30bf\u4fdd\u6301\u30fb\u6c38\u7d9a\u5316\u306e\u305f\u3081\u306b\u8a2d\u8a08\u3055\u308c\u3066\u304a\u308a\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3068\u306f\u72ec\u7acb\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u3092\u884c\u3044\u307e\u3059\u3002 \u4f8b\u3048\u3070fluentd\u306e\u3088\u3046\u306a\u30ed\u30ac\u30fc\u3067\u30ed\u30ae\u30f3\u30b0\u3092\u3057\u305f\u3044\u5834\u5408\u304c\u30a4\u30e1\u30fc\u30b8\u3057\u3084\u3059\u3044\u3068\u304a\u3082\u3044\u307e\u3059\u3002  </p>"},{"location":"2_component/volume/#volume-type","title":"Volume Type","text":"<p>Volume\u306f2\u3064\u306e\u7a2e\u985e\u304c\u5b58\u5728\u3057\u307e\u3059\u3002</p>"},{"location":"2_component/volume/#data-volume","title":"Data Volume","text":"<p>Docker Container \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u5916\u3067\u7ba1\u7406\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u8a2d\u5b9a\u3067\u3059\u3002</p>"},{"location":"2_component/volume/#_1","title":"\u30aa\u30d7\u30b7\u30e7\u30f3","text":""},{"location":"2_component/volume/#-v-container-path","title":"<code>-v &lt;CONTAINER PATH&gt;</code>","text":"<p><code>/tmp/text</code> \u3092\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u5b9f\u884c\u5f8c\u3001volume\u304c\u4f5c\u6210\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002 <pre><code>$ docker run -v /tmp/text ubuntu touch /tmp/text/hogefugapiyo\n$ docker volume ls\nDRIVER              VOLUME NAME\nlocal               ec960f53dd549aa8d771ae12b8f489b218c39fd8aea98baa2c9dca00731f245c\n</code></pre></p> <p>\u8a73\u7d30\u3092\u53d6\u5f97\u3057\u3066\u3001volume\u306e\u5b9f\u4f53\u3092\u898b\u306b\u884c\u304d\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker volume inspect ec960f53dd549aa8d771ae12b8f489b218c39fd8aea98baa2c9dca00731f245c\n[\n    {\n        \"CreatedAt\": \"2019-03-18T18:34:15Z\",\n        \"Driver\": \"local\",\n        \"Labels\": null,\n        \"Mountpoint\": \"/var/lib/docker/volumes/ec960f53dd549aa8d771ae12b8f489b218c39fd8aea98baa2c9dca00731f245c/_data\",\n        \"Name\": \"ec960f53dd549aa8d771ae12b8f489b218c39fd8aea98baa2c9dca00731f245c\",\n        \"Options\": null,\n        \"Scope\": \"local\"\n    }\n]\n</code></pre></p> <p><code>docker volume inspect</code> \u30b3\u30de\u30f3\u30c9\u304b\u3089 <code>Mountpoint</code> \u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3059\u3002 \u65e9\u901f\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ ls -l /var/lib/docker/volumes/b29ba9e3f10d67d8fd81718dbd346ff0992832a2bd9927087a6c8c0fe8f2932a/_data\ntotal 0\n-rw-r--r--    1 root     root             0 Mar 18 18:38 hogefugapiyo\n</code></pre> <p>Volume\u306f\u3053\u306e\u3088\u3046\u306b\u30b3\u30f3\u30c6\u30ca\u306e\u5916\u5074\u3078\u30d5\u30a1\u30a4\u30eb\u304c\u4fdd\u7ba1\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"2_component/volume/#-v-host-pathcontainer-path","title":"<code>-v &lt;HOST PATH&gt;:&lt;CONTAINER PATH&gt;</code>","text":"<p>\u5148\u7a0b\u306f <code>&lt;CONTAINER PATH&gt;</code> \u3060\u3051\u6307\u5b9a\u3057\u307e\u3057\u305f\u304c\u3001\u4eca\u5ea6\u306f\u30db\u30b9\u30c8\u5074\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 \u3053\u306e\u3088\u3046\u306b <code>:</code> \u3067\u533a\u5207\u308b\u3053\u3068\u3067\u5de6\u306b\u6307\u5b9a\u3057\u305f\u30db\u30b9\u30c8\u306e\u30d1\u30b9\u3092\u53f3\u306b\u6307\u5b9a\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306e\u30d1\u30b9\u3068\u5171\u6709\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u30c7\u30d0\u30c3\u30b0\u6642\u306b\u4fbf\u5229\u3067\u3001\u30db\u30b9\u30c8\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30f3\u30c6\u30ca\u3078\u540c\u671f\u3055\u305b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u3053\u3068\u306b\u3088\u304f\u4f7f\u3044\u307e\u3059\u3002</p>"},{"location":"2_component/volume/#data-volume-container","title":"Data Volume Container","text":"<p>\u4ed6\u306eDocker Container \u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bVolume\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3067\u3059\u3002</p> <p>\u53c2\u7167\u5143\u3068\u306a\u308b\u30b3\u30f3\u30c6\u30ca\u3092 <code>volume-test</code> \u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u3067\u30d5\u30a1\u30a4\u30eb\u30923\u3064\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002 <pre><code>$ docker run --name volume-test -v /tmp/test ubuntu touch /tmp/test/{hoge,fuga,piyo}\n</code></pre></p> <p>\u65b0\u3057\u304f\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u3001 <code>volume-test</code> \u30b3\u30f3\u30c6\u30ca\u306e\u30d5\u30a1\u30a4\u30eb\u3078\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002</p> <p>\u307e\u305a\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u305b\u305a\u306b <code>ls</code> \u3092\u5b9f\u884c\u3057\u3001\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker run ubuntu ls -l /tmp/test\nls: cannot access '/tmp/test': No such file or directory\n</code></pre></p> <p>\u6b21\u306b <code>--volumes-from</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5148\u7a0b\u4f5c\u6210\u3057\u305f <code>volume-test</code> \u3092\u6307\u5b9a\u3057\u3066\u3001 <code>ls</code> \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ docker run --volumes-from volume-test ubuntu ls -l /tmp/test\ntotal 0\n-rw-r--r-- 1 root root 0 Mar 18 18:49 fuga\n-rw-r--r-- 1 root root 0 Mar 18 18:49 hoge\n-rw-r--r-- 1 root root 0 Mar 18 18:49 piyo\n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u9593\u3067Volume\u306e\u5171\u6709\u304c\u3067\u304d\u307e\u3057\u305f\u3002</p>"},{"location":"2_component/volume/#_2","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30c7\u30fc\u30bf\u306e\u6c38\u7d9a\u5316\u306bVolume\u3092\u4f7f\u7528\u3059\u308b</li> <li>\u30b3\u30f3\u30c6\u30ca\u9593\u3067Volume\u306e\u5171\u6709\u306f\u53ef\u80fd</li> <li>Docker\u306f\u30a8\u30d5\u30a7\u30e1\u30e9\u30eb\u306b\u306a\u308b\u3088\u3046\u306a\u8a2d\u8a08\u3092\u6c42\u3081\u3089\u308c\u308b\u305f\u3081\u3001\u57fa\u672c\u7684\u306bVolume\u306f\u4f7f\u7528\u3057\u306a\u3044\u3053\u3068\u304c\u597d\u307e\u3057\u3044\u3002</li> </ul>"},{"location":"3_production/docker-compose/","title":"docker compose","text":"<p>docker compose(\u4ee5\u4e0bcompose)\u306f\u8907\u6570\u306e\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3067\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5354\u8abf\u3055\u305b\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3067\u3059\u3002</p> <p>\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u958b\u767a\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30fb\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30fb\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u306a\u3069\u306a\u3069\u3001\u8907\u6570\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 compose\u306f\u7c21\u5358\u306b\u3044\u3046\u3068\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u306b\u5fc5\u8981\u306a\u6b20\u304b\u305b\u306a\u3044\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u304f\u308c\u307e\u3059\u3002 \u4f8b\u3048\u3070\u305d\u308c\u305e\u308c\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\u30fb\u30b3\u30f3\u30c6\u30ca\u306e\u540c\u6642\u8d77\u52d5\u30fb\u30b3\u30f3\u30c6\u30ca\u3068\u30db\u30b9\u30c8\u9593\u306e\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u30fb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7ba1\u7406\u306a\u3069\u3002</p>"},{"location":"3_production/docker-compose/#compose","title":"compose\u306e\u8a2d\u5b9a","text":"<p>\u4e00\u898b\u96e3\u3057\u305d\u3046\u3067\u3059\u304c\u3001\u5b9f\u969b\u306b\u30b5\u30f3\u30d7\u30eb\u3092\u304a\u898b\u305b\u3057\u307e\u3059\u3002 compose\u306e\u30b7\u30f3\u30d7\u30eb\u3055\u3092\u4f53\u9a13\u3057\u3066\u3082\u3089\u3048\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002</p> <p></p> <p>Next.js\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3092PostgreSQL\u306b\u3059\u308b\u4f8b\u3067\u3059\u3002</p> <p>compose\u6a5f\u80fd\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001 <code>compose.yaml</code> \u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 \u4eca\u56de\u306e\u4f8b\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u306a\u308a\u307e\u3059\u3002  </p> <pre><code>services:\n  next:\n    image: node:22-slim\n    # \u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u3092 \"/app\" \u306b\u8a2d\u5b9a\n    working_dir: /app\n    # \u30db\u30b9\u30c8\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e \"/app\" \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u5171\u6709\n    volumes:\n      - ./:/app\n    # 3000\u756a\u30dd\u30fc\u30c8\u3092\u516c\u958b\n    ports:\n      - 3000:3000\n    # \u8d77\u52d5\u30b3\u30de\u30f3\u30c9\n    command: npm run dev\n\n  postgres:\n    image: postgres:16-alpine\n    # Docker\u306evolume\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30bf\u306e\u6c38\u7d9a\u5316\n    volumes:\n      - db-data:/var/lib/postgresql/data\n    # \u74b0\u5883\u5909\u6570\u3067\u30e6\u30fc\u30b6\u30fc\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: next\n\nvolumes:\n  db-data:\n</code></pre> <p>1\u3064\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u306e\u5909\u66f4\u306f\u4e0d\u8981\u3067\u3059\u3002  </p> <p>compose\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002</p> <pre><code>$ docker compose up -d\n</code></pre> <p>\u5b9f\u969b\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3057\u3001compose\u306e\u7d42\u4e86\u307e\u3067\u884c\u3044\u307e\u3059\u3002 <pre><code>$ curl localhost:3000\n  :\n$ docker compose down\n</code></pre></p> <p>compose\u5185\u306e\u30b3\u30f3\u30c6\u30ca\u9593\u901a\u4fe1</p> <p>compose\u5185\u3067\u306f\u72ec\u81ea\u306eBright network\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u305d\u306enetwork\u5185\u3067\u306f <code>services</code> \u3067\u547d\u540d\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u30db\u30b9\u30c8\u540d\u3068\u4f7f\u7528\u3057\u901a\u4fe1\u53ef\u80fd\u3067\u3059\u3002 \u4f8b\u3048\u3070\u4eca\u56de\u306e\u4f8b\u3067\u3042\u308c\u3070\u3001 <code>postgres</code> \u306b\u63a5\u7d9a\u3057\u305f\u3044\u5834\u5408\u3001 <code>postgresql://postgres:postgres@postgres:5432/db</code> \u3068\u3044\u3046uri\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"3_production/docker-compose/#compopseyaml","title":"compopse.yaml\u306e\u8a2d\u5b9a","text":"<p>compose.yaml \u3092\u66f8\u304f\u969b\u3001\u3088\u304f\u4f7f\u7528\u3055\u308c\u308b\u8981\u7d20\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p> <p>ref: Services top-level elements | Docker Docs</p>"},{"location":"3_production/docker-compose/#services","title":"services","text":"<pre><code>services:\n  &lt;CONTAINER_1&gt;:\n    :\n\n  &lt;CONTAINER_2&gt;:\n    :\n</code></pre> <p>compose\u306f\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5354\u8abf\u3055\u305b\u3066\u52d5\u304b\u3059\u30c4\u30fc\u30eb\u3067\u3059\u3002  </p> <p><code>services:</code> \u306f\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u7fa4\u3092\u5b9a\u7fa9\u3059\u308b\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 \u4ee5\u4e0b\u306e\u4f8b\u306e\u3088\u3046\u306b <code>&lt;CONTAINER_1&gt;:</code> \u3068\u7d9a\u3051\u3066\u30b3\u30f3\u30c6\u30ca\u306e\u5b9a\u7fa9\u3092\u884c\u3044\u307e\u3059\u3002 <code>&lt;CONTAINER_1&gt;</code> \u306f\u4efb\u610f\u306e\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u4ed8\u3051\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3001\u3053\u306e\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u5143\u306b\u30b3\u30f3\u30c6\u30ca\u9593\u901a\u4fe1\u3092\u884c\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u540c\u3058\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u4ed8\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002</p>"},{"location":"3_production/docker-compose/#image","title":"image","text":"<pre><code>services:\n  postgres:\n    image: postgres\n</code></pre> <p>\u4f7f\u7528\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u5ba3\u8a00\u3059\u308b\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 \u4f8b\u3048\u3070postgres\u3084mysql\u306e\u3088\u3046\u306a\u30a4\u30e1\u30fc\u30b8\u306f\u81ea\u8eab\u3067Dockerfile\u3092\u4f5c\u6210\u305b\u305a\u3001Docker Hub\u306e\u516c\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u4e00\u822c\u7684\u3067\u3059\u3002</p>"},{"location":"3_production/docker-compose/#build","title":"build","text":"<pre><code>services:\n  next:\n    build: .\n</code></pre> <p>Dockerfile\u3092\u4f7f\u7528\u3057\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u5ba3\u8a00\u3059\u308b\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 Next.js\u3084Laravel\u306a\u3069\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3092Dockerfile\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p><pre><code>services:\n  front:\n    build:\n      context: ./front\n\n  api:\n    build:\n      context: ./api\n      target: builder\n\n  postgres:\n    image: postgres\n</code></pre> \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u305d\u308c\u305e\u308c\u3092 <code>context</code> \u30d6\u30ed\u30c3\u30af\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3001postgres\u306f\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u4f8b\u3067\u3059\u3002  </p> <p>\u3053\u306e\u969b\u305d\u308c\u305e\u308c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bDockerfile\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u307e\u305f\u3001 <code>target</code> \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u306e\u30b9\u30c6\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"3_production/docker-compose/#volumes","title":"volumes","text":"<pre><code>services:\n  next:\n    build: .\n    volumes:\n      - .:/app\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8\u3059\u308b\u305f\u3081\u306e\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30f3\u30c6\u30ca\u306e\u7279\u5b9a\u306e\u30d1\u30b9\u3068\u540c\u671f\u3055\u305b\u305f\u308a\u3001Docker Volume\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>services:\n  next:\n    build: .\n    volumes:\n      - .:/app\n      - node_modules:/app/node_modules\n\nvolumes:\n  node_modules:\n</code></pre> <p>io\u306e\u6fc0\u3057\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u306fDocker Volume\u3092\u4f7f\u3046\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002 \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306enode_modules\u306f\u7121\u8996\u3055\u308c\u3001Docker Volume\u3092\u53c2\u7167\u3057\u307e\u3059\u3002</p>"},{"location":"3_production/docker-compose/#ports","title":"ports","text":"<pre><code>services:\n  postgres:\n    image: postgres\n    ports:\n      - 5432:5432\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u306e\u30dd\u30fc\u30c8\u3092\u30db\u30b9\u30c8\u306b\u516c\u958b\u3059\u308b\u5ba3\u8a00\u3092\u884c\u3046\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002  </p>"},{"location":"3_production/docker-compose/#environment","title":"environment","text":"<pre><code>services:\n  postgres:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: next\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u74b0\u5883\u5909\u6570\u306e\u5b9a\u7fa9\u3092\u884c\u3046\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 postgres\u3084mysql\u306e\u3088\u3046\u306a\u30a4\u30e1\u30fc\u30b8\u306f\u7279\u5b9a\u306e\u74b0\u5883\u5909\u6570\u3092\u5ba3\u8a00\u3059\u308b\u3053\u3068\u3067\u30e6\u30fc\u30b6\u30fc\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u53c2\u7167: Docker Hub</p>"},{"location":"3_production/docker-compose/#env_file","title":"env_file","text":"<pre><code>services:\n  postgres:\n    image: postgres:16-alpine\n    env_file:\n      - .env\n</code></pre> <p>\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5143\u306b\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u74b0\u5883\u5909\u6570\u306e\u5b9a\u7fa9\u3092\u884c\u3046\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 dotenv\u306e\u3088\u3046\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001 <code>env_file</code> \u3067\u4ee3\u66ff\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"3_production/docker-compose/#command","title":"command","text":"<pre><code>services:\n  next:\n    build: .\n    command: npm install &amp; npm run dev\n</code></pre> <p>\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9( <code>CMD</code> )\u3092\u4e0a\u66f8\u304d\u3059\u308b\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002 <code>CMD</code> \u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u3092\u4e0a\u66f8\u304d\u3057\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u53ef\u80fd\u3067\u3059\u3002  </p>"},{"location":"3_production/docker-compose/#depends_on-healthcheck","title":"depends_on &amp; healthcheck","text":"<p><pre><code>services:\n  next:\n    # postgres\u306e\u8d77\u52d5\u3092\u5f85\u3064\n    depends_on:\n      postgres:\n        condition: service_healthy\n\n  postgres:\n    image: postgres:16-alpine    \n    # \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n</code></pre> <code>depends_on</code> \u306f\u4f9d\u5b58\u95a2\u4fc2\u3092\u793a\u3059\u3082\u306e\u3067\u3001\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u3092\u524d\u63d0\u3068\u3057\u3066\u8d77\u52d5\u3092\u884c\u3046\u305f\u3081\u306e\u30d6\u30ed\u30c3\u30af\u3067\u3059\u3002  </p> <p>\u307e\u305f\u3001 <code>healthcheck</code> \u30d6\u30ed\u30c3\u30af\u3092\u4f75\u7528\u3059\u308b\u3053\u3068\u3067\u30b3\u30f3\u30c6\u30ca\u304c\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u3066\u304b\u3089\u9806\u756a\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002  </p>"},{"location":"3_production/docker-compose/#compose_1","title":"compose\u3092\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3067\u4f7f\u3046\u305f\u3081\u306b","text":"<p>\u6700\u521d\u306b\u8a18\u8f09\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u8d77\u52d5\u3059\u308b\u305f\u3081\u306e\u4f8b\u3067\u3057\u305f\u3002 \u300ccompopse.yaml\u306e\u8a2d\u5b9a\u300d\u3067\u7d39\u4ecb\u3057\u305f\u8a2d\u5b9a\u3092\u5143\u306b\u3001\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3067\u4f7f\u3046\u305f\u3081\u306b\u30b5\u30f3\u30d7\u30eb\u306eyaml\u3092\u5143\u306b\u66f8\u304d\u76f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <p>\u5b9f\u969b\u306b\u306f\u4ee5\u4e0b\u306e\u8981\u4ef6\u304c\u51fa\u3066\u304f\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002 * \u81ea\u4f5c\u306eDockerfile\u3092\u4f7f\u7528\u3059\u308b * \u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u306e\u7279\u5b9a\u306e\u30b9\u30c6\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b * postgres\u306e\u30dd\u30fc\u30c8\u3092\u30db\u30b9\u30c8\u306b\u3082\u958b\u653e\u3059\u308b * volume\u6a5f\u80fd\u3067\u306f\u306a\u304f\u30db\u30b9\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3059\u308b</p> <p>\u305d\u308c\u305e\u308c\u5bfe\u5fdc\u3057\u305f\u4f8b\u304c\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u306a\u308a\u307e\u3059\u3002 <pre><code>services:\n  next:\n    # \u81ea\u4f5c\u306eDockerfile\u3092\u4f7f\u7528\u3059\u308b\n    build:\n      # \u30d3\u30eb\u30c9\u3092\u884c\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n      context: .\n      # \u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u4f7f\u7528\u3059\u308b\u30b9\u30c6\u30fc\u30b8\u3092\u6307\u5b9a\n      target: deps\n      # e.g. \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fDockerfile\u3092\u8aad\u307f\u307e\u3059\u304c\u3001 \"./Dockerfile.dev\" \u3068\u66f8\u304f\u3053\u3068\u3067\u5225\u306eDockerfile\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n    volumes:\n      - ./:/app\n    ports:\n      - 3000:3000\n    command: npm install &amp;&amp; npm run dev\n\n  postgres:\n    image: postgres:16-alpine\n    # tmp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u6c38\u7d9a\u5316\u3002\n    volumes:\n      - ./tmp/db-data:/var/lib/postgresql/data:cached\n    # \u30db\u30b9\u30c8\u306b\u3082\u30dd\u30fc\u30c8\u3092\u516c\u958b\n    ports:\n      - 5432:5432\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: next\n</code></pre></p>"},{"location":"3_production/docker-compose/#docker-composedocker-compose","title":"\u300cdocker-compose\u300d\u304b\u3089\u300cdocker compose\u300d\u3078\u306e\u79fb\u884c","text":"<p>compose\u6a5f\u80fd\u306f\u30e1\u30b8\u30e3\u30fc\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3067v2\u3068\u306a\u308a\u3001docker-compose\u306fcompose\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3068\u306a\u308a\u307e\u3057\u305f\u3002  </p> <p>\u3053\u3053\u3067\u306f\u7c21\u5358\u306b\u3001docker-compose\u3068compose\u306e\u5dee\u5206\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002</p> <p>\u53c2\u7167: Docker Compose: \u65b0\u6a5f\u80fd\u3001\u5909\u66f4\u70b9\u3001\u4eca\u5f8c\u306e\u4e88\u5b9a | Docker</p>"},{"location":"3_production/docker-compose/#docker-compose","title":"docker-compose\u30b3\u30de\u30f3\u30c9\u306e\u5ec3\u6b62","text":"<p>\u4e00\u756a\u306e\u5909\u66f4\u70b9\u304b\u3064\u3001\u552f\u4e00\u5909\u66f4\u304c\u5fc5\u8981\u306a\u70b9\u3067\u3059\u3002</p> <p><code>docker-compose</code> \u30b3\u30de\u30f3\u30c9\u304c\u5ec3\u6b62\u3055\u308c\u3001 <code>docker compose</code> \u306b\u7d71\u4e00\u3055\u308c\u307e\u3059\u3002 \u65e2\u5b58\u306e\u30d7\u30ed\u30c0\u30af\u30c8\u3067 <code>docker-compose</code> \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001 <code>docker compose</code> \u3078\u79fb\u884c\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3084makefile\u306a\u3069\u3067 <code>docker-compose</code> \u3092\u30e9\u30c3\u30d7\u3057\u3066\u3044\u308b\u5834\u5408\u3092\u8003\u616e\u3057\u3066\u3001\u4e00\u5ea6\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306e\u691c\u7d22\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"3_production/docker-compose/#_1","title":"\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5909\u66f4","text":"<p><code>docker-compose.yaml</code> \u304b\u3089 <code>compose.yaml</code> \u304c\u30c7\u30d5\u30a1\u30af\u30c8\u3068\u306a\u308a\u307e\u3057\u305f\u3002  </p> <p><code>compose.yaml</code> \u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001 <code>docker-compose.yaml</code> \u3092\u8aad\u307f\u306b\u884c\u304f\u4ed5\u69d8\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"3_production/docker-compose/#composeyamlversion","title":"compose.yaml\u306eversion\u30d6\u30ed\u30c3\u30af\u304c\u4e0d\u8981\u306b\u3002","text":"<p>\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4eca\u307e\u3067\u306f <code>docker-compose.yaml</code> \u306e1\u884c\u76ee\u306b <code>version</code> \u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002 <pre><code>version: '3'\n\nservices:\n  :\n</code></pre></p> <p>\u3053\u3061\u3089\u306b\u95a2\u3057\u3066\u306f\u5358\u7d14\u306b <code>version</code> \u30d6\u30ed\u30c3\u30af\u3092\u524a\u9664\u3059\u308b\u3060\u3051\u3067\u3059\u3002 <pre><code>- version: '3'\n- \nservices:\n  :\n</code></pre></p>"},{"location":"3_production/docker-compose/#_2","title":"\u307e\u3068\u3081","text":"<ul> <li>compose\u306fDocker\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u306b\u6b20\u304b\u305b\u306a\u3044\u6280\u8853\u3067\u3059\u3002</li> <li>compose\u306e\u8a2d\u5b9a\u306f1\u30d5\u30a1\u30a4\u30eb\u3067\u5b8c\u7d50\u3059\u308b\u305f\u3081\u30b7\u30f3\u30d7\u30eb\u304b\u3064\u3001\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u3078\u306e\u5909\u66f4\u306f\u4e0d\u8981\u3067\u3059\u3002</li> <li>compose\u306fv2\u306b\u30e1\u30b8\u30e3\u30fc\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"3_production/dockerfile/","title":"Dockerfile\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"<p>\u3053\u306e\u7ae0\u3067\u306fDockerfile\u3092\u8a18\u8ff0\u3059\u308b\u969b\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002 \u4eca\u307e\u3067\u306e\u7ae0\u3092\u5143\u306b\u3001\u826f\u3044Dockerfile\u3092\u66f8\u304f\u30a8\u30c3\u30bb\u30f3\u30b9\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002</p>"},{"location":"3_production/dockerfile/#_1","title":"\u3053\u3053\u307e\u3067\u306e\u304a\u3055\u3089\u3044\u3067\u3059\u3002","text":"<ul> <li>\u300c \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u300d<ul> <li>\u91ce\u826f\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u306a\u3044</li> <li>\u69d8\u3005\u306a\u30b5\u30fc\u30c9\u30d1\u30c6\u30a3\u88fd\u54c1\u3082\u3042\u308a\u307e\u3059\u304c\u3001Dockerfile\u3060\u3051\u3067\u3082\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u308f\u306a\u3044\u306a\u3069\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002</li> </ul> </li> <li>\u300c \u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9 \u300d<ul> <li>\u30a4\u30e1\u30fc\u30b8\u306f\u8efd\u91cf\u3067\u3042\u308b\u307b\u3069\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u304c\u77ed\u304f\u306a\u308a\u6709\u5229\u3067\u3059\u3002</li> <li>\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u3092\u4f7f\u3046\u3053\u3068\u3067\u8efd\u91cf\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ul> </li> <li>\u300c \u30a4\u30e1\u30fc\u30b8\u306e\u4ed5\u7d44\u307f\u3068\u8a2d\u8a08 \u300d<ul> <li>\u300c1\u30b3\u30f3\u30c6\u30ca = 1\u30d7\u30ed\u30bb\u30b9\u300d\u306e\u539f\u5247\u3001\u3082\u3057\u304f\u306f\u300c1\u30b3\u30f3\u30c6\u30ca\u306b\u3064\u304d1\u3064\u306e\u8cac\u52d9\u300d\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u8a2d\u8a08\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u30b3\u30f3\u30c6\u30ca\u306f\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u30ed\u30b0\u306f\u6a19\u6e96\u51fa\u529b\u306b\u3001\u6c38\u7d9a\u30c7\u30fc\u30bf\u306f\u5916\u90e8\u306e\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u306b\u5165\u308c\u307e\u3057\u3087\u3046\u3002</li> </ul> </li> </ul>"},{"location":"3_production/dockerfile/#_2","title":"\u8efd\u91cf\u306a\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3059\u308b","text":"<p>\u8efd\u91cf\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u307e\u305a\u8efd\u91cf\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002  </p> <p>Docker Hub\u3067\u516c\u5f0f\u304c\u63d0\u4f9b\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u306f\u8efd\u91cf\u306a <code>slim</code> \u3068\u3044\u3046\u30bf\u30b0\u304c\u4ed8\u3044\u305f\u30a4\u30e1\u30fc\u30b8\u304c\u5b58\u5728\u3057\u307e\u3059\u3002 \u307e\u305f\u3001Google Cloud\u306fdistroless\u3068\u3044\u3046\u30b7\u30a7\u30eb\u306a\u3069\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u30b7\u30f3\u30d7\u30eb\u3067\u8efd\u91cf\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>Docker Hub\u306enode\u30a4\u30e1\u30fc\u30b8\u3068\u305d\u306enode\u306e\u8efd\u91cf\u306a\u30a4\u30e1\u30fc\u30b8\u306e2\u7a2e\u3001\u305d\u3057\u3066Google Cloud\u304c\u63d0\u4f9b\u3059\u308bdistroless\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker image list | grep node\nnode                                  latest            8994b3212f10   8 days ago          1.12GB\nnode                                  22-slim           ba83b0f18f30   8 days ago          240MB\ngcr.io/distroless/nodejs22-debian12   latest            3e738efc87dc   N/A                 152MB\n</code></pre></p> <p>\u5358\u7d14\u306anode\u30a4\u30e1\u30fc\u30b8\u306f1GB\u4ee5\u4e0a\u3068\u975e\u5e38\u306b\u5927\u304d\u304f\u3001\u9006\u306b\u8efd\u91cf\u5316\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u6570\u767eMB\u306b\u306a\u308a\u307e\u3059\u3002 \u4e00\u756a\u8efd\u91cf\u306adistroless\u3092\u4f7f\u3046\u3053\u3068\u304c\u7406\u60f3\u3067\u3059\u304c\u3001\u30b7\u30a7\u30eb\u306a\u3069\u306e\u30c4\u30fc\u30eb\u7fa4\u304c\u5165\u3063\u3066\u306a\u3044\u306a\u3044\u305f\u3081\u3001\u307e\u305a\u306fslim\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p> <ul> <li>GoogleContainerTools/distroless: \ud83e\udd51 Language focused docker images, minus the operating system.</li> </ul> <p>Alpine\u30a4\u30e1\u30fc\u30b8</p> <p>Alpine\u30a4\u30e1\u30fc\u30b8\u306f\u975e\u5e38\u306b\u8efd\u91cf\u3067\u3059\u304c\u3001Alpine\u30a4\u30e1\u30fc\u30b8\u306e\u30d9\u30fc\u30b9OS\u306e\u6b74\u53f2\u7684\u7d4c\u7def\u4e0a\u6271\u3044\u304c\u975e\u5e38\u306b\u96e3\u3057\u3044\u305f\u3081\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u30aa\u30b9\u30b9\u30e1\u3067\u304d\u307e\u305b\u3093\u3002 \u5143\u3005\u30d5\u30ed\u30c3\u30d4\u30fc\u30c7\u30a3\u30b9\u30af\u306b\u5165\u308b\u3088\u3046\u306a\u8efd\u91cf\u306aOS\u3068\u3057\u3066\u958b\u767a\u3055\u308c\u305f\u3001\u30a4\u30e1\u30fc\u30b8\u30b5\u30a4\u30ba\u306e\u8efd\u91cf\u5316\u306b\u7279\u5316\u3055\u308c\u305f\u3082\u306e\u3067\u3001\u9006\u306b\u305d\u308c\u4ee5\u5916\u306e\u975e\u6a5f\u80fd\u8981\u4ef6\u304c\u6e80\u305f\u305b\u306a\u3044\u3053\u3068\u304c\u591a\u3005\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"3_production/dockerfile/#dockerignore","title":".dockerignore\u3092\u4f7f\u3046","text":"<p>Docker\u306e\u30d3\u30eb\u30c9\u6642\u306b\u7121\u8996\u3059\u308b\u30d5\u30a1\u30a4\u30eb/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <code>.git</code> \u306e\u3088\u3046\u306a\u30d3\u30eb\u30c9\u6642\u306b\u4e0d\u8981\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3001 <code>node_modules</code> \u306e\u3088\u3046\u306aDockerfile\u5185\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3082\u306e\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p><code>.dockerignore</code> \u306f\u57fa\u672c\u7684\u306b <code>.gitignore</code> \u3068\u540c\u3058\u66f8\u304d\u65b9\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>Dockerfile\ncompose.yaml\n.dockerignore\n\n.git/*\nnode_modules/*\ndist/*\nspec/*\n\n.env*\n.mk*\n\n  :\n</code></pre>"},{"location":"3_production/dockerfile/#_3","title":"\u30d3\u30eb\u30c9\u6642\u306b\u8907\u6570\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u5bfe\u5fdc\u3055\u305b\u308b","text":"<p>\u306f\u3058\u3081\u306b\u3001Docker v19\u304b\u3089buildx\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u5897\u3048\u3001Docker\u306e\u30d3\u30eb\u30c9\u306f <code>docker buildx build</code> \u304c\u4f7f\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002  </p> <p>\u5f93\u6765\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30b7\u30e5\u30ac\u30fc\u3092\u7528\u3044\u3066\u3044\u305f\u3082\u306e\u304c\u4e0d\u8981\u306b\u306a\u308a\u3001\u30de\u30eb\u30c1\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306a\u3069\u6a5f\u80fd\u306e\u62e1\u5f35\u304c\u884c\u308f\u308c\u307e\u3057\u305f\u3002 <pre><code># syntax=docker/dockerfile:1\n</code></pre></p> <pre><code>FROM --platform=$TARGETPLATFORM golang:1.22\n\nWORKDIR /app\n\nCOPY . .\n\nRUN go build -o main /bin/main\n\nCMD [\"main\"]\n</code></pre> <pre><code>$ docker buildx build \\\n  --load \\\n  --platform linux/amd64,linux/arm64 \\\n  -t multi-platform \\\n  .\n</code></pre> <p><code>buildx</code> \u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u306f\u5f93\u6765\u306e <code>docker build</code> \u306e\u9593\u306b\u631f\u3080\u3060\u3051\u3067\u7c21\u5358\u306b\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002 \u307e\u305f\u3001 <code>docker buildx build</code> \u6642\u306b <code>--push</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u540c\u6642\u306b\u30ec\u30b8\u30b9\u30c8\u30ea\u306bpush\u3092\u884c\u3046\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u4e00\u5ea6\u306e\u30d3\u30eb\u30c9\u3067\u5225\u3005\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3057\u3001push\u3067\u304d\u307e\u3059\u3002</p> <p>\u8907\u6570\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6271\u3046\u30e1\u30ea\u30c3\u30c8\u3068\u3057\u3066\u3001\u4f8b\u3048\u3070\u4f7f\u7528\u3057\u305f\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7279\u5b9a\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3057\u304b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u3067\u3082\u3001push\u6e08\u307f\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6697\u9ed9\u7684\u306b\u4f7f\u3044\u5206\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u6700\u65b0\u306eGPU\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u307e\u3060amd64\u3057\u304b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u3084\u3001Windows\u3067\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u304c\u4ed6\u306e\u30e1\u30f3\u30d0\u30fc\u304carm\u3067\u3042\u3063\u305f\u308a\u3001\u672c\u756a\u3068\u30ed\u30fc\u30ab\u30eb\u3067\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u7570\u306a\u308b\u5834\u5408\u306b\u4fbf\u5229\u3067\u3057\u3087\u3046\u3002  </p> <p>\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u8907\u6570\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6271\u3044\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"3_production/dockerfile/#typescript-x-express","title":"TypeScript x Express\u306e\u30b5\u30f3\u30d7\u30eb","text":"<p>\u4ee5\u4e0b\u306fTypeScript\u3067Express\u306eAPI\u3092\u69cb\u7bc9\u3059\u308bDockerfile\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002 \u30b3\u30e1\u30f3\u30c8\u30d9\u30fc\u30b9\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002</p> <pre><code># === Builder\n\n# --platform=${BUILDPLATFORM:-linux/arm64} \u3068\u3059\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u6642\u306b\u3001 \"--platform\" \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u30c7\u30d5\u30a9\u30eb\u30c8\u3067linux/arm64\u3067\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3059\u3002\nFROM --platform=${BUILDPLATFORM:-linux/arm64} node:22-slim AS builder\n\n# /app \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nWORKDIR /app\n\n# package.json\u3068package-lock.json\u3092\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nCOPY package* .\n\n# \u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRUN npm ci\n\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306a\u3069\u3092\u30b3\u30d4\u30fc\nCOPY . .\n\n# \u30d3\u30eb\u30c9\nRUN npm run build\n\n# === Runner\nFROM --platform=${BUILDPLATFORM:-linux/arm64} gcr.io/distroless/nodejs22-debian12 AS runner\n\n# /app \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nWORKDIR /app\n\n# \"--from=builder\" \u30a4\u30e1\u30fc\u30b8\u306e\u30d5\u30a1\u30a4\u30eb\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30d4\u30fc\u3002\n# \"--chown=nonroot:nonroot\" \u3067\u6a29\u9650\u3092\"nonroot\"\u306b\u5909\u66f4\u3059\u308b\u3002\nCOPY --from=builder --chown=nonroot:nonroot /app/dist ./dist\nCOPY --from=builder --chown=nonroot:nonroot /app/package*.json ./\nCOPY --from=builder --chown=nonroot:nonroot /app/node_modules ./node_modules\n\n# \"nonroot\" \u3068\u3059\u308b\u3053\u3068\u3067\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\u3092\u5272\u308a\u5f53\u3066\u306a\u3044\u3002\nUSER nonroot\n\n# 3000\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u660e\u793a\u7684\u306b\u8a18\u8f09\u3002\nEXPOSE 3000\n\n# \u5b9f\u884c\u3059\u308b\u30b3\u30fc\u30c9\u3092\u5ba3\u8a00\u3002\n# MEMO: gcr.io/distroless/nodejs22-debian12 \u30a4\u30e1\u30fc\u30b8\u306b\u306fENTRYPOINT\u306b \"node\" \u76f8\u5f53\u306e\u30b3\u30de\u30f3\u30c9\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3002\nCMD [\"dist/app.js\"]\n</code></pre> <pre><code>$ docker buildx build \\\n  --platform linux/amd64 \\\n  --load \\\n  -t myapp:latest \\\n  .\n</code></pre> <p>\u53c2\u7167: introduction-docker/handson/express</p>"},{"location":"3_production/dockerfile/#_4","title":"\u307e\u3068\u3081","text":"<ul> <li>\u8efd\u91cf\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308b\u305f\u3081\u306b\u3001\u8efd\u91cf\u3067\u5b89\u5168\u306a\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046</li> <li><code>.dockerignore</code> \u3067\u4e0d\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30d3\u30eb\u30c9\u6642\u306b\u7121\u8996\u3092\u3057\u307e\u3057\u3087\u3046</li> <li>\u62e1\u5f35\u69cb\u6587\u3092\u666e\u6bb5\u304b\u3089\u5229\u7528\u3059\u308b\u5834\u5408\u3001 <code>docker buildx build</code> \u30b3\u30de\u30f3\u30c9\u306e\u63a1\u7528\u3092\u691c\u8a0e\u3057\u3066\u307f\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002</li> </ul>"},{"location":"3_production/dockerfile/#_5","title":"\u53c2\u7167","text":"<ul> <li>Building best practices | Docker Docs</li> <li>\u516c\u5f0f\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u3059\u3002</li> </ul>"},{"location":"3_production/image-design/","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u4ed5\u7d44\u307f\u3068\u8a2d\u8a08","text":"<p>Docker\u30a4\u30e1\u30fc\u30b8\u306fDockerfile\u306b\u3088\u3063\u3066\u4f5c\u6210\u3055\u308c\u308b\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3067\u3057\u305f\u3002 \u30b3\u30f3\u30c6\u30ca\u306fDocker\u30a4\u30e1\u30fc\u30b8\u3092\u5143\u306b\u8d77\u52d5\u304c\u884c\u3046\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <p>\u3053\u306e\u7ae0\u3067\u306f\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u3068\u30b3\u30f3\u30c6\u30ca\u306b\u3064\u3044\u3066\u4ed5\u7d44\u307f\u306b\u3064\u3044\u3066\u5b66\u3093\u3067\u9802\u304d\u3001\u3088\u308a\u826f\u3044\u8a2d\u8a08\u306e\u4e00\u52a9\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059</p>"},{"location":"3_production/image-design/#1-1","title":"\u300c1\u30b3\u30f3\u30c6\u30ca = 1\u30d7\u30ed\u30bb\u30b9\u300d","text":"<p>\u30b3\u30f3\u30c6\u30ca\u306f1\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u6280\u8853\u3067\u3059\u3002  </p> <p>\u57fa\u672c\u7684\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u5b9f\u884c\u3059\u308b\u30681\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u304c1\u30d7\u30ed\u30bb\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u4ed6\u306e\u30d7\u30ed\u30bb\u30b9\u540c\u69d8\u3001\u8907\u6570\u306e\u30d7\u30ed\u30bb\u30b9\u30921\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u3067\u540c\u6642\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u306f\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002  </p> <p>\u30a4\u30e1\u30fc\u30b8\u3092\u5b9f\u884c\u3059\u308b\u30681\u3064\u306e\u30b3\u30f3\u30c6\u30ca(1\u3064\u306e\u30d7\u30ed\u30bb\u30b9)\u304c\u4f5c\u6210\u3055\u308c\u3001\u8cac\u52d9\u304c\u5b8c\u4e86\u3059\u308b\u3068\u30b3\u30f3\u30c6\u30ca\u306f\u7d42\u4e86\u3055\u308c\u307e\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u306f\u5ec3\u68c4\u5bb9\u6613\u3092\u91cd\u8996\u3057\u3066\u304a\u308a\u3001\u9700\u8981\u306b\u5fdc\u3058\u3066\u7c21\u5358\u306b\u5897\u3084\u305b\u3001\u5ec3\u68c4\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3092\u5b9f\u73fe\u3057\u3001\u81ea\u7136\u3068\u7279\u5b9a\u306e\u74b0\u5883\u306b\u4f9d\u5b58\u3057\u306a\u3044\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u304c\u5b9f\u73fe\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u3057\u304b\u3057\u3001\u3082\u3057\u3001\u8907\u6570\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u52d5\u304b\u3059\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306f\u30a4\u30e1\u30fc\u30b8\u3092\u5206\u3051\u308b\u76ee\u5b89\u3067\u3057\u3087\u3046\u3002 \u305f\u3060\u3001\u30ea\u30a2\u30eb\u30ef\u30fc\u30eb\u30c9\u3067\u306f\u5168\u3066\u306e\u30b1\u30fc\u30b9\u3067\u4e00\u6982\u306b\u300c1\u30b3\u30f3\u30c6\u30ca = 1\u30d7\u30ed\u30bb\u30b9\u300d\u3067\u5b8c\u7d50\u3057\u306a\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002 \u305d\u306e\u5834\u5408\u306f\u300c1\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u3064\u304d1\u3064\u306e\u8cac\u52d9\u300d\u3092\u76ee\u5b89\u306b\u3059\u308b\u3053\u3068\u304c\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002  </p> <p>The Twelve-Factor App</p> <p>Heroku\u793e\u304c\u63d0\u5531\u3059\u308b\u30e2\u30c0\u30f3\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e12\u306e\u65b9\u6cd5\u8ad6\u3067\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u306e\u8a2d\u8a08\u306b\u8ff7\u3063\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u3001\u307e\u305a\u306fThe Twelve-Factor App\u3092\u53c2\u8003\u306b\u8a2d\u8a08\u958b\u767a\u3092\u884c\u3046\u3053\u3068\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002</p> <p>The Twelve-Factor App \uff08\u65e5\u672c\u8a9e\u8a33\uff09</p>"},{"location":"3_production/image-design/#_1","title":"\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0","text":"<p>\u30a4\u30e1\u30fc\u30b8\u306fRead-Only\u3067\u3001\u305d\u306e\u4e0a\u306bRead-Write\u53ef\u80fd\u306a\u30b3\u30f3\u30c6\u30ca\u30ec\u30a4\u30e4\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u308b\u306e\u304c\u30a4\u30e1\u30fc\u30b8\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u306a\u3093\u3089\u304b\u306e\u5909\u66f4\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u30b3\u30f3\u30c6\u30ca\u30ec\u30a4\u30e4\u30fc\u306b\u306e\u307f\u5909\u66f4\u304c\u884c\u308f\u308c\u30a4\u30e1\u30fc\u30b8\u306b\u5909\u66f4\u306f\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002</p> <p></p> <p>Docker\u306e\u73fe\u884c\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306fOverlayFS2\u304c\u63a1\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u904e\u53bb\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u8907\u6570\u306e\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u751f\u6210\u3055\u308c\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u304c\u7acb\u3061\u4e0a\u304c\u308b\u5f62\u3067\u3057\u305f\u3002  </p> <p>\u73fe\u884c\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u6642\u306b\u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\uff08\u30b3\u30f3\u30c6\u30ca\uff09\u3068\u4e0b\u4f4d\u30ec\u30a4\u30e4\u30fc\uff08\u30a4\u30e1\u30fc\u30b8\uff09\u306e2\u3064\u306b\u306a\u308a\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002 \u3057\u304b\u3057\u3001\u958b\u767a\u6642\u306b\u306f\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u6301\u3063\u3066\u304f\u308c\u308b\u305f\u3081\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u610f\u8b58\u3059\u308b\u3053\u3068\u306b\u306f\u5909\u308f\u308a\u307e\u305b\u3093\u3002</p> <p>\u904e\u53bb\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0</p> <p>Docker\u306f\u904e\u53bbUnison FileSystem(\u3068AUFS)\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3067\u306fOverlayFS2\u3068\u306f\u7570\u306a\u308a\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u5f37\u304f\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002</p>"},{"location":"3_production/image-design/#container","title":"Container","text":"<p>Read-Only\u30a4\u30e1\u30fc\u30b8\u306e\u4e0a\u306b\u3001Read-Write\u3092\u884c\u3046\u30b3\u30f3\u30c6\u30ca\u30ec\u30a4\u30e4\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u306f\u5909\u308f\u308a\u307e\u305b\u3093\u3002 </p>"},{"location":"3_production/image-design/#image","title":"Image","text":"<p>\u3057\u304b\u3057\u3001 <code>RUN</code> \u3084 <code>COPY</code> \u306a\u3069\u3067\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u5897\u3084\u3059\u305f\u3073\u306b\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u4ed5\u69d8\u4e0a\u30b3\u30f3\u30c6\u30ca\u304b\u3089 \u4e2d\u9593\u30ec\u30a4\u30e4\u30fc1\u3064\u305a\u3064\u306b\u30a2\u30af\u30bb\u30b9\u304c\u8d70\u308a \u3001\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u554f\u984c\u3067\u3057\u305f\u3002 </p> <p>\u73fe\u884c\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308bOverlayFS2\u3067\u306f\u5b9f\u884c\u6642\u306b\u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\uff08\u30b3\u30f3\u30c6\u30ca\uff09\u3068\u3001\u4e0b\u4f4d\u30ec\u30a4\u30e4\u30fc\uff08\u30a4\u30e1\u30fc\u30b8\uff09\u306e2\u3064\u306b\u5206\u3051\u3089\u308c\u3001\u4e0b\u4f4d\u30ec\u30a4\u30e4\u30fc\u306f\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002</p>"},{"location":"3_production/image-design/#_2","title":"\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u884c\u3046","text":"<p>Docker\u3067\u306f\u30d3\u30eb\u30c9\u306e\u9ad8\u901f\u5316\u3092\u884c\u3046\u305f\u3081\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u306b\u5909\u66f4\u304c\u7121\u3051\u308c\u3070\u53e4\u3044\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002  </p> <p>\u958b\u767a\u4e2d\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u983b\u7e41\u306b\u8ffd\u52a0\u3057\u307e\u305b\u3093\u304c\u3001\u30b3\u30fc\u30c9\u306f\u983b\u7e41\u306b\u5909\u66f4\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306eDockerfile\u306e\u4f8b\u3060\u3068\u6bce\u56de\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u30d3\u30eb\u30c9\u6642\u306b\u751f\u6210\u3055\u308c\u308b\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u3092\u6709\u52b9\u6d3b\u7528\u3067\u304d\u307e\u305b\u3093\u3002</p> <pre><code>FROM python:3.12-slim\n\nWORKDIR /app\n\n# \u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3080\u305f\u3081\u3001\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3055\u308c\u308b\u305f\u3073\u306b\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u304c\u518d\u751f\u6210\u3055\u308c\u308b\nCOPY . .\n\n# \u6700\u521d\u304b\u3089\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u76f4\u3059\nRUN pip install -r requirements.txt\n\nEXPOSE 8888\n\nCMD [\"python\", \"main.py\"]\n</code></pre> <p>\u53c2\u7167: introduction-docker/handson/cache-layer</p> <p>\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5909\u66f4\u304c\u3042\u3063\u305f\u5834\u5408\u306e\u307f\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u76f4\u3059\u3053\u3068\u3067\u30d3\u30eb\u30c9\u30bf\u30a4\u30e0\u3092\u77ed\u7e2e\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> <pre><code>FROM python:3.12-slim\n\nWORKDIR /app\n\n# requirements.txt \u306e\u5909\u66f4\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u304c\u518d\u751f\u6210\u3055\u308c\u308b\nCOPY requirements.txt .\n\n# requirements.txt\u306e\u5909\u66f4\u304c\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u524d\u56de\u306e\u30d3\u30eb\u30c9\u6642\u306e\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u4f7f\u7528\u3055\u308c\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u884c\u306f\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\nRUN pip install -r requirements.txt\n\n# \u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3080\nCOPY . .\n\nEXPOSE 8888\n\nCMD [\"python\", \"main.py\"]\n</code></pre>"},{"location":"3_production/image-design/#_3","title":"\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u306a\u30b3\u30f3\u30c6\u30ca\u306b\u3059\u308b","text":"<p>\u7d50\u8ad6\u304b\u3089\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306f\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u30de\u30cd\u30fc\u30b8\u30c9\u306a\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3057\u3087\u3046\uff08S3, RDS, etc\uff09\u3002</p> <p>\u57fa\u672c\u7684\u306b\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306f\u5ec3\u68c4\u5bb9\u6613\u6027\u306b\u512a\u308c\u305f\u6280\u8853\u3067\u3042\u308b\u53cd\u9762\u3001\u5ec3\u68c4\u3068\u76f8\u53cd\u3059\u308b\u300c\u30c7\u30fc\u30bf\u306e\u6c38\u7d9a\u5316\u300d\u3092\u82e6\u624b\u3068\u3057\u3066\u3044\u307e\u3059\u3002 \u6700\u521d\u306b\u3082\u8a18\u8f09\u3057\u305f\u901a\u308a\u3001\u30b9\u30c6\u30fc\u30c8\u306f\u5916\u90e8\u306e\u30c7\u30fc\u30bf\u306e\u6c38\u7d9a\u5316\u3092\u5f97\u610f\u3068\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306b\u4efb\u305b\u307e\u3057\u3087\u3046\u3002 \u30b3\u30f3\u30c6\u30ca\u306f\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u3067\u3042\u308b\u3053\u3068\u3067\u5ec3\u68c4\u5bb9\u6613\u6027\u304c\u62c5\u4fdd\u3055\u308c\u3001\u30b9\u30b1\u30fc\u30eb\u30a4\u30f3/\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3092\u5f97\u610f\u3068\u3059\u308b\u305f\u3081\u8ca0\u8377\u5206\u6563\u304c\u5bb9\u6613\u3068\u306a\u308a\u307e\u3059\u3002 \u306a\u306b\u304b\u4e0d\u5177\u5408\u304c\u8d77\u304d\u305f\u5834\u5408\u3084OOM\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u7d20\u65e9\u304f\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u6368\u3066\u3001\u6b21\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3066\u76f4\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3053\u3068\u3082\u5927\u304d\u306a\u30e1\u30ea\u30c3\u30c8\u3067\u3059\u3002\u3082\u3061\u308d\u3093\u3053\u3046\u3044\u3063\u305f\u3053\u3068\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u30c7\u30d0\u30c3\u30b0\u3084\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306f\u91cd\u8981\u3067\u3059\u304c\u3001\u7d20\u65e9\u3044\u5bfe\u5fdc\u304c\u53ef\u80fd\u306a\u3053\u3068\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u4fe1\u983c\u6027\u306b\u7e4b\u304c\u308a\u307e\u3059\u3002  </p> <p>\u307e\u305f\u3001\u30b9\u30c6\u30fc\u30c8\u3092\u3082\u305f\u306a\u3044\u3053\u3068\u3067\u7279\u5b9a\u306e\u74b0\u5883\u306b\u4f9d\u5b58\u305b\u305a\u3001\u9ad8\u3044\u53ef\u642c\u6027\u304c\u3042\u308a\u307e\u3059\u3002 \u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u304f\u30b3\u30f3\u30c6\u30ca\u306f\u672c\u756a\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u5f80\u3005\u306b\u3057\u3066\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"3_production/image-design/#_4","title":"\u30ed\u30b0\u306f\u6a19\u6e96\u51fa\u529b\u306b\u51fa\u3059","text":"<p>IaaS\u306a\u3069\u3067\u306f\u30ed\u30b0\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u305f\u3081\u3001fluentd\u306a\u3069\u3067\u8ee2\u9001\u3057\u3066\u3044\u307e\u3057\u305f\u3002 \u3057\u304b\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\u3053\u3068\u3067\u30b9\u30c6\u30fc\u30c8\u3092\u6301\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u306b\u7e4b\u304c\u308a\u307e\u3059\u3002 \u57fa\u672c\u7684\u306b\u69cb\u9020\u5316\u3055\u308c\u305f1\u884c\u306e\u30ed\u30b0\uff08\u4f8b\u3048\u3070JSON\uff09\u3092\u6a19\u6e96\u51fa\u529b\u306b\u51fa\u529b\u3057\u53ce\u96c6\u3057\u307e\u3057\u3087\u3046\u3002  </p> <p>\u307e\u305f\u3001Docker\u306f\u6a19\u6e96\u51fa\u529b\u3057\u304b\u306a\u304f\u3001\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u6a19\u6e96\u51fa\u529b\u3068\u7d71\u5408\u3055\u308c\u3066\u51fa\u529b\u3055\u308c\u308b\u70b9\u306b\u3082\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"3_production/image-design/#_5","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30a4\u30e1\u30fc\u30b8\u306f\u300c1\u30b3\u30f3\u30c6\u30ca = 1\u30d7\u30ed\u30bb\u30b9\u300d\u306e\u8cac\u52d9\u306b\u306a\u308b\u3088\u3046\u8a2d\u8a08\u3057\u307e\u3059\u3002</li> <li>\u30a4\u30e1\u30fc\u30b8\u306fRead-Only\u3067\u3001\u305d\u306e\u4e0a\u306bRead-Write\u3092\u884c\u3046\u305f\u3081\u306e\u30b3\u30f3\u30c6\u30ca\uff08\u30ec\u30a4\u30e4\u30fc\uff09\u304c\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3059\u3002</li> <li>\u5b9f\u884c\u6642\u306b\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u306f\u7121\u304f\u306a\u3063\u305f\u304c\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u610f\u8b58\u3059\u308b\u5fc5\u8981\u306f\u5909\u308f\u308a\u307e\u305b\u3093\u3002</li> </ul>"},{"location":"3_production/multistage-build/","title":"\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u306b\u3064\u3044\u3066","text":"<p>\u30a4\u30e1\u30fc\u30b8\u306f\u8efd\u91cf\u3067\u3042\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306b\u306f\u30ec\u30b8\u30b9\u30c8\u30ea\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092pull\u3057\u3066\u304b\u3089\u7acb\u3061\u4e0a\u3052\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u5de8\u5927\u306a\u30a4\u30e1\u30fc\u30b8\u306fpull\u306b\u6642\u9593\u304c\u304b\u3063\u3066\u3057\u307e\u3044\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306e\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u304c\u9577\u304f\u306a\u308a\u307e\u3059\u3002</p> <p>\u30ea\u30fc\u30c9\u30bf\u30a4\u30e0\u304c\u9577\u304f\u306a\u308b\u3053\u3068\u306b\u3088\u308a\u69d8\u3005\u306a\u30ea\u30b9\u30af\u304c\u4f34\u3044\u307e\u3059\u3002</p> <ul> <li>\u30c7\u30d7\u30ed\u30a4\u30fb\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u9045\u304f\u306a\u308b\u3002</li> <li>\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u304c\u9045\u304f\u306a\u308a\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u304c\u9593\u306b\u5408\u308f\u305a\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u634c\u3051\u306a\u304f\u306a\u308b\u3002</li> <li>\u5de8\u5927\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u4fdd\u5b58\u9818\u57df\u3082\u3057\u304f\u306f\u4fdd\u5b58\u6599\u304c\u9ad8\u304f\u306a\u308b\u3002</li> </ul> <p>\u8efd\u91cf\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u304c\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u3067\u3001\u8907\u6570\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u30891\u3064\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306e\u6280\u8853\u3067\u3059\u3002</p> <p>\u4f8b\u3048\u3070golang\u3067\u3042\u308c\u3070\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3067\u5b9f\u884c\u304c\u53ef\u80fd\u306a\u305f\u3081\u3001\u30d3\u30eb\u30c9\u30ec\u30a4\u30e4\u30fc\u3067\u30d0\u30a4\u30ca\u30ea\u3092\u751f\u6210\u3057\u3001\u6700\u7d42\u30a4\u30e1\u30fc\u30b8\u306f\u8efd\u91cf\u306a\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u8efd\u91cf\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 \u4ee5\u4e0b\u304c\u305d\u306e\u30b5\u30f3\u30d7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002 \u30d0\u30a4\u30ca\u30ea\u3092\u30d3\u30eb\u30c9\u3059\u308b Builder\u30a4\u30e1\u30fc\u30b8 \u3068\u3001Builder\u30a4\u30e1\u30fc\u30b8\u3067\u751f\u6210\u3057\u305f\u30d0\u30a4\u30ca\u30ea\u3092\u30b3\u30d4\u30fc\u3057\u5b9f\u884c\u3059\u308b Runner\u30a4\u30e1\u30fc\u30b8 \u306e2\u3064\u304b\u3089\u306a\u308b\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u306e\u4f8b\u3067\u3059\u3002 <pre><code># syntax=docker/dockerfile:1\n\n# === Builder\nFROM golang:1.22 AS builder\n\nWORKDIR /app\n\nCOPY . .\n\nRUN go build -o main .\n\n# === Runner\nFROM busybox AS runner\n\nWORKDIR /app\n\nRUN adduser \\\n  --disabled-password \\\n  --gecos \"\" \\\n  --home \"/nonexistent\" \\\n  --shell \"/sbin/nologin\" \\\n  --no-create-home \\\n  --uid \"1001\" \\\n  app\n\nUSER app\n\nCOPY --from=builder --chown=app:app /app/main /bin/main\n\nEXPOSE 8080\n\nCMD [\"main\"]\n</code></pre></p> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u6700\u7d42\u30a4\u30e1\u30fc\u30b8\u306f Builder\u30a4\u30e1\u30fc\u30b8 \u306e\u30d0\u30a4\u30ca\u30ea\u3092\u6240\u6709\u3057\u305f\u8efd\u91cf\u306a Runner\u30a4\u30e1\u30fc\u30b8 \u304c\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002</p> <pre><code>$ docker build -t multistage-build .\n</code></pre> <p><code>--target</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4e2d\u9593\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u4e2d\u9593\u30a4\u30e1\u30fc\u30b8\u306e\u307f\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>$ docker buildx build -t multi-builder --target builder .\n$ docker run -p 8080:8080 multi-builder ./main\n</code></pre> <p>\u53c2\u7167: introduction-docker/handson/multistage-build</p>"},{"location":"3_production/security/","title":"VM\u3068Docker","text":"<p>Docker\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u3082\u4ed6\u306e\u6280\u8853\u3068\u540c\u69d8\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"3_production/security/#root","title":"root\u30e6\u30fc\u30b6\u3092\u4f7f\u308f\u306a\u3044","text":"<p>root\u30e6\u30fc\u30b6\u306fCapability\u3067\u5236\u5fa1\u3055\u308c\u3066\u306f\u3044\u307e\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u4fb5\u5165\u3055\u308c\u305f\u3068\u304d\u306b\u6700\u5c0f\u9650\u306e\u5f71\u97ff\u306b\u7559\u3081\u308b\u305f\u3081\u306b\u3082\u904e\u5270\u306a\u6a29\u9650\u306f\u57fa\u672c\u7684\u306b\u4e0d\u8981\u3067\u3059\u3002 Docker\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u57fa\u672c\u7684\u306broot\u30e6\u30fc\u30b6\u30fc\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 <code>USER</code> \u30b3\u30de\u30f3\u30c9\u4f7f\u7528\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u3092\u5909\u66f4\u3057\u3001chmod\u306a\u3069\u3067\u6a29\u9650\u3092\u6700\u9069\u5316\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"3_production/security/#_1","title":"\u516c\u5f0f\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u3092\u78ba\u8a8d","text":"<p>\u516c\u5f0f\u306enode\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3001\u73fe\u5728\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u78ba\u8a8d\u3059\u308b <code>whoami</code> \u3092\u5b9f\u884c\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002 <pre><code>FROM node:22-slim\n\nCMD whoami\n</code></pre></p> <p>\u30d3\u30eb\u30c9\u3057\u3001\u5b9f\u884c\u3059\u308b\u3068root\u30e6\u30fc\u30b6\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 <pre><code>$ docker build -t whoami .\n$ docker run whoami\nroot\n</code></pre></p> <p>\u3067\u306f\u3001 <code>USER</code> \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u30e6\u30fc\u30b6\u30fc\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002 <pre><code>FROM node:22-slim\n\nUSER node\n\nCMD whoami\n</code></pre></p> <p>node\u30e6\u30fc\u30b6\u30fc\u306b\u5909\u66f4\u3067\u304d\u305f\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 <pre><code>$ docker build -t whoami-node .\n$ docker run whoami-node\nnode\n</code></pre></p>"},{"location":"3_production/security/#docker","title":"\u91ce\u826f\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u306a\u3044","text":"<p>\u975e\u516c\u5f0f\u306e\u30e6\u30fc\u30b6\u30fc\u88fd\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u4f7f\u3046\u3053\u3068\u306f\u975e\u5e38\u306b\u5371\u967a\u3067\u3059\u3002  </p> <p>\u60aa\u610f\u3092\u6301\u3063\u305f\u91ce\u826f\u30a4\u30e1\u30fc\u30b8\u306f\u904e\u53bb\u306b\u4f55\u5ea6\u3082\u767b\u5834\u3057\u3001\u30a4\u30e1\u30fc\u30b8\u5185\u306b\u60aa\u610f\u306e\u3042\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002 \u307e\u305f\u3001GitHub\u306a\u3069\u3067Dockerfile\u304c\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u3001\u9078\u5b9a\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u306f\u554f\u984c\u304c\u306a\u304b\u3063\u305f\u3082\u306e\u306e\u66f4\u65b0\u3055\u308c\u30ea\u30b9\u30af\u306e\u3042\u308b\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u3082\u3042\u308a\u307e\u3057\u305f\u3002  </p> <p>\u57fa\u672c\u7684\u306b\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u516c\u5f0f\u306e\u3082\u306e\u3092\u3057\u3088\u3046\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"3_production/security/#_2","title":"\u30d3\u30eb\u30c9\u6642\u306b\u6a5f\u5fae\u60c5\u5831\u3092\u4e0e\u3048\u306a\u3044","text":"<p>\u30d3\u30eb\u30c9\u6642\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3084\u79d8\u5bc6\u9375\u306e\u3088\u3046\u306a\u6a5f\u5fae\u60c5\u5831\u3092\u4e0e\u3048\u3001\u6700\u7d42\u30a4\u30e1\u30fc\u30b8\u306b\u6b8b\u3089\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002 \u57fa\u672c\u7684\u306b\u30d3\u30eb\u30c9\u5f8c\u306b\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3069\u306e\u6a5f\u5fae\u60c5\u5831\u3092\u6e21\u3059\u3053\u3068\u304c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u3059\u3002  </p> <p>Private Repository\u306eclone\u306a\u3069\u3001\u3069\u3046\u3057\u3066\u3082\u6a5f\u5fae\u60c5\u5831\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f <code>--secret</code> \u3084 <code>--ssh</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30bb\u30ad\u30e5\u30a2\u306b\u30d3\u30eb\u30c9\u3092\u3057\u307e\u3057\u3087\u3046\u3002  </p> <p>\u73fe\u5728\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308bBuildKit\u3067\u3042\u308c\u3070\u30ec\u30a4\u30e4\u30fc\u5185\u3067\u6a5f\u5fae\u60c5\u5831\u3092\u524a\u9664\u3057\u3001 \u6700\u7d42\u30a4\u30e1\u30fc\u30b8\u306b\u6a5f\u5fae\u60c5\u5831\u304c\u6b8b\u3089\u306a\u3051\u308c\u3070 \u57fa\u672c\u7684\u306b\u554f\u984c\u306a\u3044\u3067\u3059\u3002</p>"},{"location":"3_production/security/#dockerignore","title":".dockerignore \u30d5\u30a1\u30a4\u30eb\u3067\u30ed\u30fc\u30ab\u30eb\u306e\u4e0d\u8981\u306a\u30d1\u30b9\u3092\u7121\u8996\u3059\u308b","text":"<p>Docker\u30d3\u30eb\u30c9\u6642\u306b\u7121\u8996\u3059\u308b\u30d1\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3001 <code>.gitignore</code> \u306e\u3088\u3046\u306a\u30a4\u30e1\u30fc\u30b8\u306b\u8fd1\u3044\u3067\u3059\u3002  </p> <p><code>.git</code> \u3084  <code>node_modules</code> \u306e\u3088\u3046\u306a\u30d3\u30eb\u30c9\u6642\u306b\u4e0d\u8981\u306a\u30d1\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u304c\u9ad8\u901f\u304b\u3064\u30a4\u30e1\u30fc\u30b8\u304c\u8efd\u91cf\u306b\u306a\u308b\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002 \u9006\u306b\u3001 <code>.env</code> \u306e\u3088\u3046\u306aDB\u3078\u306e\u63a5\u7d9a\u60c5\u5831\u3084API\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d3\u30eb\u30c9\u306b\u542b\u3081\u3066\u3057\u307e\u3046\u3053\u3068\u306f\u6700\u7d42\u30a4\u30e1\u30fc\u30b8\u306b\u6a5f\u5fae\u60c5\u5831\u304c\u5165\u3063\u3066\u3057\u307e\u3046\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30b9\u30af\u306b\u7e4b\u304c\u308a\u307e\u3059\u3002  </p> <p>e.g. <code>.dockerignore</code> <pre><code>.git/*\n.github/*\n.node_modules/*\ntest/*\ntmp/*\n\n.env*\n\nDockerfile\ncompose.yaml\n</code></pre></p>"},{"location":"3_production/security/#_3","title":"\u30a4\u30e1\u30fc\u30b8\u3092\u5869\u6f2c\u3051\u306b\u3057\u306a\u3044","text":"<p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3068\u3057\u3066\u305d\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u3001\u826f\u304f\u3082\u60aa\u304f\u3082\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u306f\u6642\u9593\u3068\u3068\u3082\u306b\u5897\u3048\u3066\u3044\u304d\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3068\u306a\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u8106\u5f31\u6027\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u6b21\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u307e\u305f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3060\u3051\u3067\u306a\u304f\u3001\u5185\u90e8\u306e\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3084\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u66f4\u65b0\u3082\u540c\u69d8\u306b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>1\u5ea6\u5b8c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u8106\u5f31\u6027\u306e\u30b9\u30ad\u30e3\u30f3\u3084\u3001\u4ed6\u306e\u6280\u8853\u540c\u69d8\u65e5\u9803\u304b\u3089\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u60c5\u5831\u3092\u8ffd\u3046\u3053\u3068\u306f\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"3_production/security/#_4","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u8106\u5f31\u6027\u30b9\u30ad\u30e3\u30f3\u3092\u6709\u52b9\u5316\u3059\u308b","text":"<p>\u30a4\u30e1\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u8106\u5f31\u6027\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u6280\u8853\u306f\u4e00\u822c\u7684\u306b\u666e\u53ca\u3057\u3066\u3044\u307e\u3059\u3002  </p>"},{"location":"3_production/security/#cicd","title":"CI/CD","text":"<p>docker\u793e\u304c\u63d0\u4f9b\u3059\u308bGitHub Action\u304c\u5b58\u5728\u3057\u307e\u3059\u3002 CI/CD\u306a\u3069\u306eworkflow\u5185\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067CVE\u30d9\u30fc\u30b9\u3067\u8106\u5f31\u6027\u306e\u691c\u77e5\u3092\u884c\u306a\u3063\u3066\u304f\u308c\u307e\u3059\u3002  </p> <p>docker/scout-action: Docker Scout GitHub Action</p>"},{"location":"3_production/security/#_5","title":"\u30ec\u30b8\u30b9\u30c8\u30ea","text":"<p>\u30af\u30e9\u30a6\u30c9\u30d9\u30f3\u30c0\u30fc\u304c\u63d0\u4f9b\u3059\u308b\u30de\u30cd\u30fc\u30b8\u30c9\u306a\u30a4\u30e1\u30fc\u30b8\u306e\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u306f\u30a4\u30e1\u30fc\u30b8\u306e\u30b9\u30ad\u30e3\u30f3\u6a5f\u80fd\u304c\u3064\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u3092\u6e1b\u3089\u3059\u305f\u3081\u306b\u6709\u52b9\u5316\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p> <ul> <li>AWS\u3067\u3042\u308c\u3070Amazon Elastic Container Registry</li> <li>Amazon ECR \u3067\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u8106\u5f31\u6027\u304c\u306a\u3044\u304b\u30a4\u30e1\u30fc\u30b8\u3092\u30b9\u30ad\u30e3\u30f3\u3059\u308b - Amazon ECR</li> <li>Google Cloud\u3067\u3042\u308c\u3070Artifact Artifact Registry</li> <li>Container scanning overview \u00a0|\u00a0 Documentation \u00a0|\u00a0 Google Cloud</li> </ul>"},{"location":"3_production/security/#dockerfile","title":"Dockerfile\u5185","text":"<p>\u5225\u306e\u7ae0\u3067\u7d39\u4ecb\u3059\u308b\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u3092\u5229\u7528\u3057\u3001Dockerfile\u5185\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c4\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3082\u3042\u308a\u307e\u3059\u3002</p> <pre><code>FROM aquasec/trivy:latest AS trivy\n\nFROM myapp:latest\n\nCOPY --from=trivy /usr/local/bin/trivy /usr/local/bin/trivy\n\nRUN trivy filesystem --exit-code 1 --no-progress /\n</code></pre> <p>Trivy Home - Trivy</p>"},{"location":"3_production/security/#_6","title":"\u30b5\u30a4\u30c9\u30ab\u30fc","text":"<p>Snyk\u3092\u4f7f\u7528\u3057\u3001\u5b9f\u884c\u4e2d\u3082\u30b5\u30a4\u30c9\u30ab\u30fc\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u52d5\u691c\u77e5\u3092\u884c\u3046\u9078\u629e\u80a2\u3082\u3042\u308a\u307e\u3059\u3002</p> <p>sidecar vulnerabilities | Snyk</p>"},{"location":"3_production/security/#_7","title":"\u305d\u306e\u4ed6","text":"<p>\u4ed6\u306b\u3082\u3069\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u304c\u3042\u308b\u306e\u304b\u3001CNCF\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u4e00\u89a7\u3092\u898b\u308b\u3053\u3068\u3082\u304a\u52e7\u3081\u3067\u3059\u3002</p> <p>CNCF Landscape</p>"},{"location":"3_production/security/#_8","title":"\u30d5\u30a1\u30a4\u30eb\u306e\u30de\u30a6\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u6700\u5c0f\u9650\u306b\u3002","text":"<p>\u30db\u30b9\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u969b\u306f\u5341\u5206\u306b\u6ce8\u610f\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3092\u884c\u3044\u307e\u3057\u3087\u3046\u3002 \u6700\u5c0f\u9650\u306e\u6a29\u9650(Read-Only\u306b\u3059\u308b\u306a\u3069)\u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u30d1\u30b9\u306f\u5fc5\u8981\u6700\u4f4e\u9650\u306b\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u307e\u305f\u3001\u7279\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u306a\u306e\u306fdocker\u30bd\u30b1\u30c3\u30c8\u3067\u3059\u3002 docker\u30bd\u30b1\u30c3\u30c8\u304c\u4e57\u3063\u53d6\u3089\u308c\u3066\u3057\u307e\u3046\u3068\u305d\u308c\u3092\u8e0f\u307f\u53f0\u306b\u4efb\u610f\u306edocker\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3055\u308c\u3066\u3057\u307e\u3046\u306a\u3069\u5927\u304d\u306a\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u3057\u304b\u3057\u3001CI\u3084\u76e3\u8996\u306a\u3069\u3067docker\u30bd\u30b1\u30c3\u30c8\u306e\u30de\u30a6\u30f3\u30c8\u3092\u8981\u6c42\u3059\u308b\u30c4\u30fc\u30eb\u3082\u5b58\u5728\u3057\u307e\u3059\u3002 \u5b89\u6613\u306b\u4e0e\u3048\u308b\u306e\u306f\u63a7\u3048\u3001\u30bd\u30b1\u30c3\u30c8\u3092\u30de\u30a6\u30f3\u30c8\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u5834\u5408\u306fRead-Only\u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"3_production/security/#_9","title":"\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u6a5f\u5fae\u60c5\u5831\u3092\u629c\u304d\u51fa\u3059\u4f8b","text":"<p>Docker\u306e\u30d3\u30eb\u30c9\u306f\u30ec\u30a4\u30e4\u30fc\u6bce\u306b\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304c\u3068\u3089\u308c\u3001\u6b21\u306e\u30d3\u30eb\u30c9\u306e\u9ad8\u901f\u5316\u306e\u305f\u3081\u306b\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002 Docker\u306ev20\u304b\u3089\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067BuildKit\u304c\u6709\u52b9\u306b\u306a\u308a\u5bb9\u6613\u306b\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3002 \u3057\u304b\u3057\u3001 <code>docker save</code> \u30b3\u30de\u30f3\u30c9\u3067tar\u3068\u3057\u3066\u51fa\u529b\u3057\u3066\u304b\u3089\u4efb\u610f\u306e\u30ec\u30a4\u30e4\u30fc\u3092\u5410\u304d\u51fa\u3059\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u66f8\u304d\u63db\u3048\u3066 <code>docker load</code> \u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u3002</p> <p>\u4eca\u56de\u306f\u308f\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u3001BuildKit\u3092\u7121\u52b9\u5316\u3057\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u6a5f\u5fae\u60c5\u5831\u3092\u629c\u304d\u51fa\u3057\u3066\u307f\u307e\u3059\u3002</p> <p>\u4e00\u6642\u7684\u306b \"mypassword\" \u3068\u8a18\u8f09\u3055\u308c\u305f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092 /tmp/pass.txt \u306b\u914d\u7f6e\u3057\u3001\u305d\u306e\u5f8c /tmp/pass.txt \u3092\u524a\u9664\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002 <pre><code>FROM node:22-slim\n\nRUN echo \"mypassword\" &gt; /tmp/pass.txt\n\nRUN echo \"delete password\" &gt; /tmp/pass.txt\n\nCMD cat /tmp/pass.txt\n</code></pre></p> <p>BuildKit\u3092\u7121\u52b9\u5316\u3057\u3001\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ DOCKER_BUILDKIT=0 docker build -t pass .\nDEPRECATED: The legacy builder is deprecated and will be removed in a future release.\n            BuildKit is currently disabled; enable it by removing the DOCKER_BUILDKIT=0\n            environment-variable.\n\nSending build context to Docker daemon  3.072kB\nStep 1/4 : FROM node:22-slim\n ---&gt; ba83b0f18f30\nStep 2/4 : RUN echo \"mypassword\" &gt; /tmp/pass.txt\n ---&gt; Using cache\n ---&gt; b48e7229fe78\nStep 3/4 : RUN echo \"delete password\" &gt; /tmp/pass.txt\n ---&gt; Using cache\n ---&gt; cdf556ff4f4b\nStep 4/4 : CMD cat /tmp/pass.txt\n ---&gt; Running in a5c245f8588e\n ---&gt; Removed intermediate container a5c245f8588e\n ---&gt; 26a1e198ef63\nSuccessfully built 26a1e198ef63\nSuccessfully tagged pass:latest\n</code></pre></p> <p>\u6210\u679c\u30a4\u30e1\u30fc\u30b8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001 delete password \u3068\u51fa\u529b\u3055\u308c\u60f3\u5b9a\u901a\u308a\u306e\u51fa\u529b\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002 <pre><code>$ docker run pass\ndelete password\n</code></pre></p> <p>\u30d3\u30eb\u30c9\u6642\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30ec\u30a4\u30e4\u30fc\u3092\u6307\u5b9a\u3057\u3066\u3001 <code>/tmp/pass.txt</code> \u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002 <pre><code>Step 2/4 : RUN echo \"mypassword\" &gt; /tmp/pass.txt\n ---&gt; Using cache\n ---&gt; b48e7229fe78\n</code></pre></p> <p>mypassword \u3068\u51fa\u529b\u3055\u308c\u3066\u3057\u307e\u3044\u3001\u4e2d\u9593\u30ec\u30a4\u30e4\u30fc\u306b\u6a5f\u5fae\u60c5\u5831\u304c\u6b8b\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002 <pre><code>$ docker run b48e7229fe78 cat /tmp/pass.txt\nmypassword\n</code></pre></p>"},{"location":"4_tips/debug/","title":"VM\u3068Docker","text":"<p>Docker\u306e\u52d5\u4f5c\u78ba\u8a8d\u65b9\u6cd5\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"4_tips/debug/#_1","title":"\u6e96\u5099","text":"<p>\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u304d\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u3044\u304f\u3064\u304b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u304d\u307e\u3057\u305f\u3002\u305d\u306e\u305f\u3081Image/Container/Volume/Network\u304c\u6b8b\u3063\u3066\u3044\u307e\u3059\u3002 \u524a\u9664\u3057\u3066\u4f7f\u7528\u3059\u308b\u306e\u3082\u3042\u308a\u306a\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u304b\u3089\u306f\u65b0\u3057\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\u3057\u3066\u65b0\u3057\u3044\u74b0\u5883\u3067\u4f5c\u696d\u3092\u884c\u3044\u307e\u3057\u3087\u3046\u3002</p> <p></p>"},{"location":"4_tips/debug/#_2","title":"\u73fe\u5728\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>\u307e\u305a\u3001\u65b0\u3057\u3044\u74b0\u5883\u3067\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3068\u7d50\u679c\u3068\u540c\u3058\u3001Docker\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u4f55\u3082\u306a\u3044\u72b6\u614b\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \"NETWORK ID\" \u306f\u74b0\u5883\u6bce\u306b\u7570\u306a\u308b\u305f\u3081\u30013\u3064\u5b58\u5728\u3059\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 <pre><code>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n$ docker volume ls\nDRIVER              VOLUME NAME\n$ docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n57b365c4c259        bridge              bridge              local\n0de6477937b5        host                host                local\nfcb28176b5e7        none                null                local\n</code></pre></p>"},{"location":"4_tips/debug/#_3","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb","text":"<p>\u3069\u3093\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3082\u8a00\u3048\u308b\u3053\u3068\u3067\u3059\u304c\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u610f\u8b58\u3059\u308b\u3053\u3068\u306f\u91cd\u8981\u3067\u3059\u3002 \u3053\u3053\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u72b6\u614b\u306e\u78ba\u8a8d\u65b9\u6cd5\u3092\u5b66\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"4_tips/debug/#_4","title":"\u77ed\u547d\u306a\u30b3\u30f3\u30c6\u30ca","text":"<p><code>docker run</code> \u3067python\u3067\"hoge\"\u3068\u51fa\u529b\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002  </p> <pre><code>$ docker run python python -c 'print(\"hoge\")'\nUnable to find image 'python:latest' locally\nlatest: Pulling from library/python\ne79bb959ec00: Pull complete\nd4b7902036fe: Pull complete\n1b2a72d4e030: Pull complete\nd54db43011fd: Pull complete\n69d473365bb3: Pull complete\n7dc3a6a0e509: Pull complete\n68cd774d0852: Pull complete\n2ef86095a118: Pull complete\n42c091edeef0: Pull complete\nDigest: sha256:7e6c00cc553fdce06c1bcfcbf34c73a0f3623a8fc9ce88c8fb91671f2cbc0dab\nStatus: Downloaded newer image for python:latest\nhoge\n</code></pre> <p>Docker\u30a4\u30e1\u30fc\u30b8\u3092pull\u3057\u305f\u5f8c\u306b\u3001\u5f15\u6570\u306b\u6e21\u3057\u305f <code>python -c 'print(\"hoge\")'</code> \u3092\u5b9f\u884c\u3057\u3066\u304f\u308c\u307e\u3057\u305f\u3002  </p> <p><code>docker container ls -a</code> \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u73fe\u5728\u306e\u30db\u30b9\u30c8\u4e0a\u306e\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u898b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 <pre><code>$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                   CREATED              STATUS                          PORTS               NAMES\n910343e33060        python              \"python -c print(\\\"ho\u2026\"   About a minute ago   Exited (0) About a minute ago                       determined_visvesvaraya\n</code></pre></p> <p>\"STATUS\"\u306e\u5217\u3092\u78ba\u8a8d\u3059\u308b\u3068 \"Exited (0) About a minute ago\" \u3068\u3042\u308a\u307e\u3059\u3002 \u300c\u7d42\u4e86\u30b3\u30fc\u30c9\u304c0 (\u6b63\u5e38\u7d42\u4e86) \u3067\u3001\u65e2\u306b\u7d42\u4e86\u3057\u3066\u3044\u308b\u300d\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002</p> <p>\u3082\u3046\u4e00\u5ea6\u540c\u3058\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker run python python -c 'print(\"fuga\")'\nfuga\n</code></pre></p> <p>\u4eca\u5ea6\u306fDocker\u30a4\u30e1\u30fc\u30b8\u306epull\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002 \u65e2\u306bPull\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u304c\u3042\u308b\u5834\u5408\u306f\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3067\u3059\u3002  </p> <p>\u30b3\u30f3\u30c6\u30ca\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                   CREATED             STATUS                      PORTS               NAMES\n0d99a0e9e15a        python              \"python -c print(\\\"fu\u2026\"   5 seconds ago       Exited (0) 4 seconds ago                        nervous_laland\n910343e33060        python              \"python -c print(\\\"ho\u2026\"   14 minutes ago      Exited (0) 14 minutes ago                       determined_visvesvaraya\n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u304c2\u3064\u306b\u5897\u3048\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u306f\u30b3\u30f3\u30c6\u30ca\u306f\u5b9f\u884c\u3055\u308c\u308b\u5ea6\u306b \u65b0\u3057\u3044\u74b0\u5883 \u304c\u7acb\u3061\u4e0a\u304c\u308b\u305f\u3081\u3067\u3059\u3002</p> <p>\u7d42\u4e86\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u3082\u3046\u4e00\u5ea6\u8d77\u52d5\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002 <pre><code>$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                   CREATED             STATUS                      PORTS               NAMES\n0d99a0e9e15a        python              \"python -c print(\\\"fu\u2026\"   5 seconds ago       Exited (0) 4 seconds ago                        nervous_laland\n910343e33060        python              \"python -c print(\\\"ho\u2026\"   14 minutes ago      Exited (0) 14 minutes ago                       determined_visvesvaraya\n$ docker start -a 910343e33060\nhoge\n$ docekr start -a 0d99a0e9e15a\nfuga\n</code></pre></p>"},{"location":"4_tips/debug/#_5","title":"\u9577\u547d\u306a\u30b3\u30f3\u30c6\u30ca","text":"<p>\u6b21\u306b\u3001Web\u30b5\u30fc\u30d0\u306e\u3088\u3046\u306a\u57fa\u672c\u7684\u306b\u8d77\u52d5\u3057\u7d9a\u3051\u308b\u9577\u3044\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u3069\u306e\u3088\u3046\u306a\u72b6\u614b\u306b\u306a\u308b\u306e\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002  </p> <p>\u4f8b\u306e\u3054\u3068\u304fnginx\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>$ docker run -P -d nginx\n491f97ab763b2e3fca78211350f45f5bd0f7311155a8214980d3c804f5f2a44f\n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                   CREATED             STATUS                      PORTS                   NAMES\n491f97ab763b        nginx               \"nginx -g 'daemon of\u2026\"    23 seconds ago      Up 21 seconds               0.0.0.0:32769-&gt;80/tcp   silly_hellman\n0d99a0e9e15a        python              \"python -c print(\\\"fu\u2026\"   39 minutes ago      Exited (0) 39 minutes ago                           nervous_lalande\n910343e33060        python              \"python -c print(\\\"ho\u2026\"   About an hour ago   Exited (0) 35 minutes ago                           determined_visvesvaraya\n</code></pre></p> <p>nginx\u306e\u30b3\u30f3\u30c6\u30ca\u304c\"STATUS\" \u304c \"Up 21 seconds\" \u3068\u306a\u3063\u3066\u304a\u308a\u3001\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059</p> <p>\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u307f\u8868\u793a\u3055\u305b\u308b</p> <p>\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3060\u3051\u3092\u8868\u793a\u3057\u305f\u3044\u5834\u5408\u306f <code>-a</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u306a\u3044\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <pre><code>$ docker container ls\n</code></pre></p> <p>\u3082\u3046\u4e00\u3064nginx\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker run -P -d nginx\ndbd0565d0ca200224125f9d995186f0e6a49e14be20498ae0204a667f033d7ce\n$ docker container ls\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                   NAMES\ndbd0565d0ca2        nginx               \"nginx -g 'daemon of\u2026\"   4 seconds ago       Up 3 seconds        0.0.0.0:32770-&gt;80/tcp   pedantic_mclaren\n491f97ab763b        nginx               \"nginx -g 'daemon of\u2026\"   3 minutes ago       Up 2 minutes        0.0.0.0:32769-&gt;80/tcp   silly_hellman\n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u304c2\u3064\u8d77\u52d5\u8d77\u52d5\u3055\u308c\u3066\u3044\u307e\u3059\u3002 Play with Docker\u4e0a\u3067\u3082\u30dd\u30fc\u30c8\u304c2\u3064\u958b\u653e\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002</p> <p>\u8a66\u3057\u306b\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u30921\u3064\u505c\u6b62\u3055\u305b\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <code>docker stop</code> \u306e\u5f15\u6570\u306b\u30b3\u30f3\u30c6\u30caID\u3092\u6e21\u3059\u3053\u3068\u3067\u505c\u6b62\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <pre><code>$ docker stop 491f97ab763b\n491f97ab763b\n$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                   CREATED             STATUS                      PORTS                   NAMES\ndbd0565d0ca2        nginx               \"nginx -g 'daemon of\u2026\"    2 minutes ago       Up 2 minutes                0.0.0.0:32770-&gt;80/tcp   pedantic_mclaren\n491f97ab763b        nginx               \"nginx -g 'daemon of\u2026\"    5 minutes ago       Exited (0) 5 seconds ago                            silly_hellman\n0d99a0e9e15a        python              \"python -c print(\\\"fu\u2026\"   44 minutes ago      Exited (0) 44 minutes ago                           nervous_lalande\n910343e33060        python              \"python -c print(\\\"ho\u2026\"   About an hour ago   Exited (0) 41 minutes ago                           determined_visvesvaraya\n</code></pre></p> <p>\"STATUS\" \u304c \"Exited\" \u306b\u306a\u308a\u3001\u505c\u6b62\u3055\u308c\u307e\u3057\u305f\u3002 Play with Docker\u4e0a\u3067\u306f\u958b\u653e\u3055\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u304c1\u3064\u306b\u306a\u3063\u305f\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"4_tips/debug/#_6","title":"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u524a\u9664","text":"<p>\u6700\u5f8c\u306b\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3068\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3057\u3087\u3046\u3002  </p> <p>\u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62 <pre><code>$ docker stop $(docker container ls -q) \n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664 <pre><code>$ docker rm $(docker container ls -aq)\n</code></pre></p> <p>\u30a4\u30e1\u30fc\u30b8\u306e\u524a\u9664 <pre><code>$ docker rmi $(docker images -q)\n</code></pre></p> <p>\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306e\u78ba\u8a8d <pre><code>$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n</code></pre></p>"},{"location":"4_tips/debug/#_7","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u306b\u5165\u308b","text":"<p>\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u306b\u5165\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002  </p> <p>\u8a66\u3057\u306b\u5148\u7a0b\u8d77\u52d5\u3057\u305fnginx\u306e\u4e2d\u306b\u5165\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <code>docker exec</code> \u30b3\u30de\u30f3\u30c9\u306b\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306eID\u3092\u6e21\u3059\u3053\u3068\u3067\u5165\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002  </p> <p>\u30b3\u30f3\u30c6\u30ca\u5185\u306bbash\u3067\u5165\u3063\u3066nginx\u30d5\u30a1\u30a4\u30eb\u306e\u5b58\u5728\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046 <pre><code>$ docker exec -it 85a6b023ba49 bash\nroot@85a6b023ba49:/# ls /usr/share/nginx/html/\n50x.html  index.html\n</code></pre></p> <p>\u307e\u305a\u306f\u3044\u304f\u3064\u304b\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002 <pre><code>root@85a6b023ba49:/# apt-get update\nroot@85a6b023ba49:/# apt-get install -y curl procps\n</code></pre></p> <p>\u73fe\u5728\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002 nginx\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002 <pre><code>root@85a6b023ba49:/# ps -ae\n   PID TTY          TIME CMD\n     1 ?        00:00:00 nginx\n     6 ?        00:00:00 nginx\n    28 pts/0    00:00:00 bash\n  3716 pts/0    00:00:00 ps\n</code></pre></p> <p>\u5b9f\u969bnginx\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u3001 <code>localhost:80</code> \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>root@85a6b023ba49:/# curl localhost:80\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\"http://nginx.org/\"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\"http://nginx.com/\"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p> <p>nginx\u304c\u53c2\u7167\u3057\u3066\u3044\u308bhtml\u3092\u66f4\u65b0\u3057\u3001Play with Docker \u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30ea\u30f3\u30af\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u5b9f\u969b\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002 <pre><code>root@85a6b023ba49:/# echo \"&lt;h1&gt;hello docker&lt;/h1&gt;\" &gt; /usr/share/nginx/html/index.html\nroot@85a6b023ba49:/# cat /usr/share/nginx/html/index.html\n&lt;h1&gt;hello docker&lt;/h1&gt;\nroot@85a6b023ba49:/# exit\n</code></pre></p> <p></p>"},{"location":"4_tips/debug/#_8","title":"\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001nginx\u3092\u30c7\u30fc\u30e2\u30f3\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002 <pre><code>$ docker run -P -d nginx\nUnable to find image 'nginx:latest' locally\nlatest: Pulling from library/nginx\n27833a3ba0a5: Pull complete\ne83729dd399a: Pull complete\nebc6a67df66d: Pull complete\nDigest: sha256:c8a861b8a1eeef6d48955a6c6d5dff8e2580f13ff4d0f549e082e7c82a8617a2\nStatus: Downloaded newer image for nginx:latest\n85a6b023ba49f8f29b1f35eeebbbd2f49811fe1420952538429cf71ea5a92436\n</code></pre></p> <p>\u4f55\u5ea6\u304b\u5148\u7a0b\u8d77\u52d5\u3057\u305fnginx\u3078\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3063\u305f\u5f8c\u3001nginx\u30b3\u30f3\u30c6\u30ca\u306eID\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <pre><code>$ docker logs 85a6b023ba49f8f29b1f35eeebbbd2f49811fe1420952538429cf71ea5a92436\n2019/03/30 18:53:31 [error] 6#6: *1 open() \"/usr/share/nginx/html/robots.txt\" failed (2: No such file or directory), client: 172.18.0.1, server: localhost, request: \"GET /robots.txt HTTP/1.1\", host: \"ip172-18-0-55-bifrfpo6chi000dv93cg-32768.direct.labs.play-with-docker.com\"\n172.18.0.1 - - [30/Mar/2019:18:53:31 +0000] \"GET /robots.txt HTTP/1.1\" 404 556 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36\" \"-\"\n172.18.0.1 - - [30/Mar/2019:18:53:31 +0000] \"GET / HTTP/1.1\" 200 612 \"-\"\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36\" \"-\"\n172.18.0.1 - - [30/Mar/2019:18:53:31 +0000] \"GET /favicon.ico HTTP/1.1\" 404 556 \"http://ip172-18-0-55-bifrfpo6chi000dv93cg-32768.direct.labs.play-with-docker.com/\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36\" \"-\"\n2019/03/30 18:53:31 [error] 6#6: *2 open() \"/usr/share/nginx/html/favicon.ico\" failed (2: No such file or directory), client: 172.18.0.1, server:localhost, request: \"GET /favicon.ico HTTP/1.1\", host: \"ip172-18-0-55-bifrfpo6chi000dv93cg-32768.direct.labs.play-with-docker.com\", referrer: \"http://ip172-18-0-55-bifrfpo6chi000dv93cg-32768.direct.labs.play-with-docker.com/\"\n</code></pre></p> <p><code>docker logs</code> \u3067\u8868\u793a\u3055\u308c\u308b\u30ed\u30b0\u306f\u8d77\u52d5\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u306e \u6a19\u6e96\u51fa\u529b\u3068\u6a19\u6e96\u30a8\u30e9\u30fc \u3067\u3059\u3002 \u30d5\u30a1\u30a4\u30eb\u306b\u5410\u304d\u51fa\u3055\u308c\u305f\u30ed\u30b0\u306f <code>docker logs</code> \u30b3\u30de\u30f3\u30c9\u3067\u306f\u57fa\u672c\u7684\u306b\u95b2\u89a7\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002  </p>"},{"location":"4_tips/debug/#_9","title":"\u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u306b\u5165\u308b","text":"<p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30b3\u30f3\u30c6\u30ca\u3067\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u4e88\u671f\u305b\u306c\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30b3\u30f3\u30c6\u30ca(\u4e0a\u3067\u52d5\u304b\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9)\u304c\u6b7b\u3093\u3067\u3057\u307e\u3046\u3053\u3068\u304c\u591a\u3005\u3042\u308a\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001\u30b3\u30f3\u30c6\u30ca\u4e0a\u306b\u66f8\u304d\u8fbc\u3093\u3060\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u304b\u3089\u3057\u304b\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u306f\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u305f\u969b\u306e\u60c5\u5831\u3092\u30d5\u30a1\u30a4\u30eb\u3078\u66f8\u304d\u8fbc\u3080\u3053\u3080\u3088\u3046\u306a\u3082\u306e\u3082\u3042\u308a\u307e\u3059\u3002 \u305d\u3046\u3044\u3063\u305f\u30b3\u30f3\u30c6\u30ca\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u591a\u304f\u3001\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c8\u306e\u969b\u306b\u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u306b\u5165\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002 <code>docker start</code> \u3092\u4f7f\u7528\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001 <code>docker start</code> \u306e\u5834\u5408\u8d77\u52d5\u6642\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002 \u305d\u306e\u30b3\u30de\u30f3\u30c9\u304c\u539f\u56e0\u3067\u8d77\u52d5\u76f4\u5f8c\u306b\u843d\u3061\u3066\u3057\u307e\u3046\u5834\u5408\u3001 <code>docker start</code> \u304c\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002</p> <p>\u3053\u3053\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u4e0a\u3078\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u78ba\u8a8d\u3059\u308b\u624b\u9806\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p> <p><code>mkdir</code> \u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u5b9f\u884c\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u304c\u505c\u6b62\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002 <pre><code>$ docker run amazonlinux:2 mkdir /tmp/hoge\nUnable to find image 'amazonlinux:2' locally\n2: Pulling from library/amazonlinux\nf64ae36417d7: Pull complete\nDigest: sha256:d4a4328d679534af47c7a765d62a9195eb27f9a95c03213fca0a18f95aa112cd\nStatus: Downloaded newer image for amazonlinux:2\n$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES\n32eec81f3aaa        amazonlinux:2       \"mkdir hoge\"        3 minutes ago       Exited (0) 3 minutes ago                       angry_hypatia\n</code></pre></p> <p><code>docker commit</code> \u3067\u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u304b\u3089 <code>exited-container</code> \u3068\u3044\u3046\u540d\u524d\u306e\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 <pre><code>$ docker commit 32eec81f3aaa exited-container\nsha256:497ce4f6a88aef387a4c78864fb6f3c06e03d9458f69168f10500e1f643e8af6\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nexited-container    latest              497ce4f6a88a        2 minutes ago       162MB\namazonlinux         2                   01da4f8f9748        4 weeks ago         162MB\n</code></pre></p> <p><code>exited-container</code> \u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002 <pre><code>$ docker run -it exited-container bash\nbash-4.2# ls /tmp/\nhoge\n</code></pre></p> <p>amazonlinux:2 \u30a4\u30e1\u30fc\u30b8</p> <p>\"amazonlinux:2\"\u306fAmazon\u304c\u958b\u767a\u3057\u305fCentOS7\u30d9\u30fc\u30b9\u306eAmazonLinux2\u3068\u3044\u3046OS\u3067\u3059\u3002 AWS\u3067EC2(VM)\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u57fa\u672c\u7684\u306b\u9078\u629e\u3055\u308c\u308bOS\u306a\u306e\u3067\u3059\u304c\u3001Docker\u30a4\u30e1\u30fc\u30b8\u3082\u914d\u5e03\u3055\u308c\u3066\u3044\u307e\u3059\u3002 Docker\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u3082\u914d\u5e03\u3055\u308c\u3066\u304a\u308a\u3001\u8efd\u91cf\u3067\u975e\u5e38\u306b\u512a\u79c0\u306a\u305f\u3081\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"4_tips/docker-compose/","title":"Docker compose","text":""},{"location":"4_tips/docker-compose/#docker-composetips","title":"docker-compose\u3067\u3088\u304f\u4f7f\u3046Tips\u96c6\u3067\u3059\u3002","text":"<p>title: VM\u3068Docker description: VM\u3068Docker\u306e\u9055\u3044\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"4_tips/docker-compose/#_1","title":"\u74b0\u5883\u5909\u6570\u306e\u8aad\u307f\u8fbc\u307f","text":"<p>\u4e00\u822c\u7684\u306bDocker\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u306e\u3063\u3068\u3063\u305f\u8a2d\u8a08\u3092\u3059\u308b\u3068\u74b0\u5883\u5909\u6570\u3067\u5404\u7a2e\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5b9a\u7fa9\u304c\u91cd\u8981\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002 \u4f8b\u3048\u3070MySQL\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3084\u5404\u7a2e\u63a5\u7d9a\u60c5\u5831\u3084\u79d8\u533f\u60c5\u5831\u306a\u3069\u3001\u74b0\u5883\u306b\u3088\u3063\u3066\u5909\u66f4\u3055\u308c\u308b\u3082\u306e\u306f\u57fa\u672c\u7684\u306b\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u6642\u306b\u74b0\u5883\u5909\u6570\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002  </p> <p>docker-compose\u3092\u4f7f\u7528\u3057\u305f\u5834\u5408\u3069\u306e\u3088\u3046\u306a\u65b9\u6cd5\u3067\u5b9a\u7fa9\u3059\u308b\u306e\u304b\u3001\u4ee3\u8868\u7684\u306a4\u3064\u306e\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"4_tips/docker-compose/#1-docker-compose","title":"1. docker-compose\u306b\u8d77\u52d5\u6642\u306b\u6e21\u3059","text":"<pre><code>$ docker-compose up -e MYSQL_PASSWORD=mypassword\n</code></pre>"},{"location":"4_tips/docker-compose/#2-docker-composeyaml","title":"2. docker-compose.yaml\u3078\u8a18\u8ff0","text":"<pre><code>version: '3.7'\n\nservices:\n  app:\n    build: .\n+   environment:\n+     - MYSQL_PASSWORD=mypassword\n</code></pre>"},{"location":"4_tips/docker-compose/#3","title":"3. \u30b7\u30a7\u30eb\u306e\u74b0\u5883\u5909\u6570\u304b\u3089\u8aad\u307f\u8fbc\u307f","text":"<p><code>docker-compose.yaml</code> <pre><code>version: '3.7'\n\nservices:\n  app:\n    build: .\n    environment:\n-     - MYSQL_PASSWORD=mypassword\n+     - MYSQL_PASSWORD=${MYSQL_PASSWORD}\n</code></pre></p> <pre><code>$ export MYSQL_PASSWORD=mypassword\n$ docker-compose up\n</code></pre>"},{"location":"4_tips/docker-compose/#4","title":"4. \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3080","text":"<p><code>docker-compose.yaml</code> <pre><code>version: '3.7'\n\nservices:\n  app:\n    build: .\n-   environment:\n-     - MYSQL_PASSWORD=mypassword\n+   env_file:\n+     - .env\n</code></pre></p> <p><code>.env</code> <pre><code>MYSQL_PASSWORD=mypassword\n</code></pre></p> <pre><code>$ docker-compose up\n</code></pre>"},{"location":"4_tips/docker-compose/#_2","title":"\u30db\u30b9\u30c8\u3068\u30b3\u30f3\u30c6\u30ca\u9593\u306e\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u306e\u901f\u5ea6\u5411\u4e0a","text":"<p>\u3042\u308b\u7a0b\u5ea6\u958b\u767a\u304c\u9032\u3080\u3068\u30b3\u30f3\u30c6\u30ca\u3068\u30db\u30b9\u30c8\u9593\u3067\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u901f\u5ea6\u304c\u8ab2\u984c\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002 Docker\u3067\u306f\u305d\u306e\u5bfe\u7b56\u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306e\u5171\u6709\u901f\u5ea6\u3092\u6539\u5584\u3059\u308b\u305f\u3081\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e3\u3064\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u5fdc\u3058\u3066\u8a2d\u5b9a\u3059\u308b\u3068\u3088\u308a\u9ad8\u901f\u306a\u74b0\u5883\u3092\u624b\u306b\u5165\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"4_tips/docker-compose/#_3","title":"\u30aa\u30d7\u30b7\u30e7\u30f3","text":"<ul> <li><code>consistend</code> (default)<ul> <li>\u30db\u30b9\u30c8\u3068\u30b3\u30f3\u30c6\u30ca\u9593\u306e\u4e00\u8cab\u6027\u3092\u62c5\u4fdd\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3</li> <li>\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u7528\u3055\u308c\u308b\u306e\u3067\u3059\u304c\u3001\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u5927\u304d\u3044\u306e\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u66f4\u65b0\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u306f\u4f7f\u7528\u3057\u306a\u3044\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002</li> </ul> </li> <li><code>cached</code><ul> <li>\u30db\u30b9\u30c8\u5074\u306e\u66f4\u65b0\u3092\u512a\u5148\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3</li> <li>e.g.<ul> <li>\u30b5\u30fc\u30d3\u30b9\u30b3\u30fc\u30c9\u306e\u3088\u3046\u306a\u30db\u30b9\u30c8\u5074\u3067\u66f4\u65b0\u3059\u308b\u30b1\u30fc\u30b9</li> </ul> </li> </ul> </li> <li><code>delegated</code><ul> <li>\u30b3\u30f3\u30c6\u30ca\u5074\u306e\u66f4\u65b0\u3092\u512a\u5148\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3</li> <li>e.g.<ul> <li>MySQL\u306e\u3088\u3046\u306a\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u30db\u30b9\u30c8\u3078\u306e\u66f8\u304d\u8fbc\u307f\u3057\u304b\u306a\u3044\u30b1\u30fc\u30b9\u3002</li> <li>\u30b3\u30f3\u30c6\u30ca\u4e0a\u304b\u3089\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3059\u308b\u30b3\u30de\u30f3\u30c9(<code>composer install</code> , <code>npm install</code> ,etc )\u3092\u4f7f\u7528\u3059\u308b\u969b\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"4_tips/docker-compose/#docker-compose","title":"docker-compose\u306e\u30b5\u30f3\u30d7\u30eb","text":"<p>node.js x MySQL\u3092\u60f3\u5b9a\u3057\u305fdocker-compose\u30d5\u30a1\u30a4\u30eb <pre><code>version: '3.7'\n\nservices:\n  app:\n    build: .\n    volumes:\n-     - .:/app\n-     - ./node_modules:/app/node_modules\n+     - .:/app:cached\n+     - ./node_modules:/app/node_modules:delegated\n\n  mysql:\n    image: mysql:5.7\n    volumes:\n-     - ./mysql:/var/lib/mysql\n+     - ./mysql:/var/lib/mysql:delegated\n</code></pre></p> <ul> <li>Performance tuning for volume mounts (shared filesystems) | Docker Documentation</li> </ul>"},{"location":"4_tips/docker-compose/#_4","title":"\u6a19\u6e96\u5165\u529b\u3092\u6709\u52b9\u306b\u3059\u308b","text":"<p>\u6a19\u6e96\u5165\u529b\u3092docker-compose\u3067\u3082\u4f7f\u7528\u3057\u305f\u3044\u30d1\u30bf\u30fc\u30f3\u304c\u5ea6\u3005\u5b58\u5728\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070Ruby on Rails\u306epry\u306e\u3088\u3046\u306a\u30c7\u30d0\u30c3\u30ac\u30fc\u3092\u4f7f\u3046\u5834\u5408\u3067\u3059\u3002 docker-compose\u3067\u306f\u6a19\u6e96\u5165\u529b\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u660e\u793a\u7684\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> <pre><code>version: '3.7'\nservices:\n  rails:\n    build: .\n+   tty: true\n+   stdin_open: true\n    ports:\n      - '3000:3000'\n    volumes:\n      - './:/app:cached'\n</code></pre>"},{"location":"4_tips/docker-compose/#multi-stage-build","title":"Multi-Stage Build\u306e\u30ed\u30fc\u30ab\u30eb\u6d3b\u7528","text":"<p>Golang\u306e\u3088\u3046\u306a\u30d3\u30eb\u30c9\u3092\u884c\u3046\u8a00\u8a9e\u3067Multi-Stage Build\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u904e\u53bb\u306e\u30ec\u30a4\u30e4\u30fc\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308b\u3068\u304a\u3082\u3044\u307e\u3059\u3002 \u4f8b\u3048\u3070\u6700\u7d42\u6210\u679c\u3068\u306a\u308b\u30ec\u30a4\u30e4\u30fc\u306f\u8efd\u91cf\u306a\u3082\u306e\u306b\u3057\u305f\u3044\u304c\u3001\u30d3\u30eb\u30c9\u306b\u4f7f\u7528\u3057\u305f\u30ec\u30a4\u30e4\u30fc\u3092\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3067\u3082\u7528\u3044\u308b\u306a\u3069\u3002  </p> <p>docker-compose\u306e\u5834\u5408\u660e\u793a\u7684\u306b\u30ec\u30a4\u30e4\u30fc\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>FROM golang:1.12-alpine as build\n\nWORKDIR /go/app\n\nCOPY . .\n\nRUN apk add --no-cache git \\\n  &amp;&amp; go build -o app\n\nFROM alpine\n\nWORKDIR /app\n\nCOPY --from=build /go/app/app .\n\nRUN addgroup go \\\n  &amp;&amp; adduser -D -G go go \\\n  &amp;&amp; chown -R go:go /app/app\n\nCMD [\"./app\"]\n</code></pre> <pre><code>version: '3.7'\n\nservices:\n  app:\n    build:\n      context: .\n+     target: build\n    volumes:\n      - ./:/go/app\n    command: go run main.go\n</code></pre>"},{"location":"4_tips/docker-compose/#docker-composenetwork","title":"docker-compose\u9593\u306enetwork\u306e\u5171\u6709","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5316\u306b\u3088\u3063\u3066\u30d5\u30ed\u30f3\u30c8\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5206\u304b\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u3068\u304a\u3082\u3044\u307e\u3059\u3002 \u305d\u306e\u969b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5171\u6709\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u5171\u6709\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"4_tips/docker-compose/#backend","title":"backend","text":"<p><code>internal</code> \u3068 <code>external</code> \u306e2\u3064\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u7528\u610f\u3057\u307e\u3059\u3002  </p> <p><code>internal</code> \u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306e\u5185\u90e8\u7684\u306a\u901a\u4fe1\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3059\u3002MySQL\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3092\u4e0d\u7528\u610f\u306b\u516c\u958b\u3057\u306a\u3044\u305f\u3081\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002 <code>externla</code> \u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u5916\u3078\u516c\u958b\u3059\u308b\u305f\u3081\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3059\u3002</p> <pre><code>version: '3.7'\n\nservices:\n  api:\n    build: .\n    ports:\n      - 8000:80\n+   networks:\n+     - internal\n+     - external\n\n  mysql:\n    image: mysql:5.7\n    environment:\n      MYSQL_ALLOW_EMPTY_PASSWORD: 'yes'\n+   networks:\n+     - internal\n\n+networks:\n+  internal:\n+    internal: true\n+  external:\n+    name: api_network\n</code></pre>"},{"location":"4_tips/docker-compose/#web","title":"web","text":"<pre><code>version: '3.7'\n\nservices:\n  web:\n    #XXX API\u30a2\u30af\u30bb\u30b9\u306fcurl\u3067\u4ee3\u7528\u3002\n    image: amazonlinux:2\n    command: curl api:80\n\n+networks:\n+  default:\n+    external:\n+      name: api_network\n</code></pre> <p>\u53c2\u7167: introduction-docker/handson/next</p>"},{"location":"4_tips/introduction/","title":"\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3078\u306e\u5c0e\u5165","text":""},{"location":"4_tips/introduction/#_1","title":"\u65b0\u898f\u958b\u767a\u306e\u5834\u5408","text":"<p>\u65b0\u898f\u958b\u767a\u3067\u5c0e\u5165\u3059\u308b\u5834\u5408\u3001\u6700\u521d\u304b\u3089Docker\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002  </p> <p>\u958b\u767a\u30c1\u30fc\u30e0\u3067\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u540c\u671f\u3084\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u3088\u3046\u306a\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306f\u975e\u5e38\u306b\u7169\u96d1\u3067\u3059\u304c\u3001\u9006\u306bDocker\u304c\u5f97\u610f\u3068\u3059\u308b\u9818\u57df\u3067\u3059\u3002 \u6700\u521d\u304b\u3089Dockerfile\u3092\u66f8\u304f\u3053\u3068\u304c\u96e3\u3057\u3051\u308c\u3070\u3001 <code>compose.yaml</code> \u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u307f\u7ba1\u7406\u3092\u3059\u308b\u306a\u3069\u30df\u30cb\u30de\u30eb\u30b9\u30bf\u30fc\u30c8\u3082\u8003\u616e\u3057\u3066\u3082\u3088\u3044\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"4_tips/introduction/#iaas","title":"IaaS\u304b\u3089\u306e\u30b3\u30f3\u30c6\u30ca\u5316","text":"<p>\u65e2\u5b58\u306eIaaS\u304b\u3089\u306e\u79fb\u884c\u3067\u3042\u308c\u3070\u30b9\u30c6\u30c3\u30d7\u3092\u8e0f\u3093\u3067\u884c\u304f\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p> <ol> <li>\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306eDocker\u5316<ul> <li>\u307e\u305a\u306f\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u306e\u5c0e\u5165\u304b\u3089\u884c\u3044\u307e\u3059</li> <li>\u30c1\u30fc\u30e0\u306e\u958b\u767a\u74b0\u5883\u3092Docker\u3067\u7d71\u4e00\u3057\u3001Docker\u306b\u6163\u308c\u3066\u3044\u304f\u3068\u3053\u308d\u304b\u3089\u59cb\u3081\u3066\u3044\u304d\u307e\u3057\u3087\u3046</li> </ul> </li> <li>\u30c6\u30b9\u30c8/CI\u3078\u306e\u5c0e\u5165<ul> <li>\u6b21\u306b\u30c6\u30b9\u30c8/CI\u74b0\u5883\u3078\u306e\u5c0e\u5165\u3092\u884c\u3044\u307e\u3059</li> <li>\u307e\u305f\u3001CI\u3092\u5c0e\u5165\u3057\u3066\u306a\u3044\u306e\u3067\u3042\u308c\u3070Docker\u3068\u306e\u76f8\u6027\u304c\u826f\u3044\u306e\u3067\u3053\u306e\u6a5f\u4f1a\u306b\u5c0e\u5165\u3059\u308b\u306e\u3082\u3042\u308a\u3067\u3057\u3087\u3046\u3002</li> </ul> </li> <li>\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3078\u306e\u5c0e\u5165<ul> <li>\u672c\u756a\u3078\u3044\u304d\u306a\u308a\u5c0e\u5165\u3059\u308b\u524d\u306b\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u74b0\u5883\u3067Docker\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046</li> </ul> </li> <li>\u672c\u756a\u3078\u306e\u5c0e\u5165<ul> <li>\u6700\u5f8c\u306b\u672c\u756a\u74b0\u5883\u3078\u306e\u5c0e\u5165\u3092\u884c\u3044\u307e\u3057\u3087\u3046</li> </ul> </li> </ol>"},{"location":"4_tips/orchestration/","title":"\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb","text":""},{"location":"4_tips/orchestration/#_1","title":"\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3068\u306f","text":"<p>1\u3064\u4ee5\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002</p> <p>\u30b3\u30f3\u30c6\u30ca\u306f\u975e\u5e38\u306b\u8efd\u91cf\u3067\u53ef\u642c\u6027\u30fb\u79fb\u690d\u53ef\u80fd\u6027\u304c\u9ad8\u304f\u3001\u958b\u767a\u74b0\u5883\u304b\u3089\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u74b0\u5883\u30fb\u672c\u756a\u74b0\u5883\u307e\u30671\u3064\u306e\u30a4\u30e1\u30fc\u30b8\u30671\u3064\u306e\u74b0\u5883\u3092\u5b8c\u7d50\u3055\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 \u3057\u304b\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u306f\u672c\u756a\u904b\u7528\u306e\u305f\u3081\u306e\u6a5f\u80fd\u306f\u5099\u308f\u3063\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u30b3\u30f3\u30c6\u30ca\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306b\u306f\u30b3\u30f3\u30c6\u30ca\u3092\u7ba1\u7406\u3057\u3001\u904b\u7528\u3059\u308b\u305f\u3081\u306e\u69d8\u3005\u306a\u6a5f\u80fd\u304c\u5099\u308f\u3063\u3066\u3044\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u305f\u3081\u306e\u30ea\u30bd\u30fc\u30b9\u30d7\u30fc\u30eb\u306e\u7ba1\u7406\u30fb\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d7\u30ed\u30a4\u30fb\u30bb\u30eb\u30d5\u30d2\u30fc\u30ea\u30f3\u30b0\u30fb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30fb\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30eb\u306a\u3069\u3067\u3059\u3002</p> <p>\u30b3\u30f3\u30c6\u30ca\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u8cac\u52d9\u3084\u6a5f\u80fd\u304c\u7570\u306a\u308b\u306e\u3067\u3001\u4ee3\u8868\u7684\u306a\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"4_tips/orchestration/#_2","title":"\u4ee3\u8868\u7684\u306a\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb","text":""},{"location":"4_tips/orchestration/#compose","title":"compose","text":"<p>Docker\u793e\u304c\u63d0\u4f9b\u3059\u308b\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u3002 \u30ed\u30fc\u30ab\u30eb\u3067docker\u3092\u52d5\u304b\u3059\u969b\u306e\u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u3068\u306a\u3063\u3066\u3044\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002  </p>"},{"location":"4_tips/orchestration/#swarm","title":"swarm","text":"<p>\u540c\u3058\u304fDocker\u793e\u304c\u63d0\u4f9b\u3059\u308bOSS\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u3002 docker compose\u3068\u76f8\u6027\u304c\u3088\u304f\u3001 <code>compose.yaml</code> \u3092\u62e1\u5f35\u3059\u308b\u3053\u3068\u3067\u672c\u756a\u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3067Docker\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002  </p>"},{"location":"4_tips/orchestration/#ecs-elastic-container-service","title":"ECS (Elastic Container Service)","text":"<p>AWS\u304c\u63d0\u4f9b\u3059\u308b\u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u306e1\u3064\u3067\u3059\u3002 \u4ed6\u306eAWS\u30b5\u30fc\u30d3\u30b9\u306e\u9023\u643a\u304c\u5f97\u610f\u3067\u3001AWS\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306b\u306f\u5019\u88dc\u306b\u4e0a\u304c\u308b\u3082\u306e\u3067\u3059\u3002</p>"},{"location":"4_tips/orchestration/#kubernetes","title":"Kubernetes","text":"<p>Google\u793e\u304c\u958b\u767a\u3057\u305fOSS\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u3002 \u6a5f\u80fd\u304c\u591a\u304f\u8c4a\u5bcc\u306a\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u304c\u3042\u308a\u3001CNCF\u306a\u3069\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3082\u975e\u5e38\u306b\u6d3b\u767a\u3067\u3059\u3002  </p> <p>\u30af\u30e9\u30a6\u30c9\u30d9\u30f3\u30c0\u30fc\u3082\u305d\u308c\u305e\u308c\u30de\u30cd\u30fc\u30b8\u30c9Kubernetes\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001\u30ed\u30c3\u30af\u30a4\u30f3\u3055\u308c\u306a\u3044\u74b0\u5883\u3092\u6c42\u3081\u308b\u5834\u5408\u306f\u9078\u629e\u80a2\u306b\u4e0a\u304c\u308a\u307e\u3059\u3002 \u3057\u304b\u3057\u3001\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u9ad8\u304f\u30013\u30f6\u6708\u6bce\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308b\u306a\u3069\u3001\u63a1\u7528\u3059\u308b\u969b\u306f\u4ed6\u306e\u9078\u629e\u80a2\u3068PoC\u3092\u884c\u306a\u3063\u3066\u304b\u3089\u304c\u671b\u307e\u3057\u3044\u3067\u3057\u3087\u3046\u3002</p>"},{"location":"4_tips/tools/","title":"VM\u3068Docker","text":"<p>docker\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u4fbf\u5229\u306a\u30c4\u30fc\u30eb</p>"},{"location":"4_tips/tools/#kitematic","title":"Kitematic","text":"<p>Kitematic\u3068\u3044\u3046docker\u3092GUI\u30d9\u30fc\u30b9\u3067\u6271\u3046\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002 \u30ed\u30fc\u30ab\u30eb\u306eDocker\u306e\u7ba1\u7406\u306f\u3082\u3061\u308d\u3093DockerHub\u306e\u691c\u7d22\u306a\u3069\u3001\u975e\u5e38\u306b\u9ad8\u6a5f\u80fd\u3067\u898b\u3084\u3059\u3044\u306e\u3067GUI\u3067\u6271\u3044\u305f\u3044\u4eba\u306b\u306f\u826f\u3044\u3068\u304a\u3082\u3044\u307e\u3059\u3002 \u79c1\u306fCLI\u3067\u3057\u304b\u4f7f\u308f\u306a\u3044\u306e\u3067GUI\u306f\u77e5\u3089\u306a\u3044\u3067\u3059\u3002</p>"},{"location":"4_tips/tools/#install","title":"Install","text":"<p>mac <pre><code>$ brew cask install kitematic\n</code></pre></p> <p>windows Install Docker Toolbox on Windows | Docker Documentation</p>"},{"location":"4_tips/tools/#docker-clean","title":"<code>docker-clean</code>","text":"<p>Docker\u30ea\u30bd\u30fc\u30b9\u3092\u524a\u9664\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3002 Docker\u306f\u57fa\u672c\u7684\u306b\u30a8\u30d5\u30a7\u30e1\u30e9\u30eb\u3067\u3042\u308b\u3079\u304d\u306a\u306e\u3067\u8133\u6b7b\u3067\u5b9a\u671f\u7684\u306b\u6253\u3063\u3066\u3044\u304f\u3068\u3044\u3044\u3068\u304a\u3082\u3044\u307e\u3059\u3002\u3068\u3066\u3082\u3059\u304d\u3002\u3079\u3093\u308a\u3002  </p>"},{"location":"4_tips/tools/#example","title":"Example","text":"<p>\u5168\u3066\u306econtainer\u3092\u505c\u6b62\u3001\u524a\u9664\u3057\u307e\u3059\u3002\u95a2\u9023\u3059\u308bvolume\u3068networks\u3082\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>$ docker-clean stop\n</code></pre></p> <p>Docker\u306e\u30ea\u30bd\u30fc\u30b9\u5168\u3066\u3092\u524a\u9664\u3059\u308b\u3002 \u8d77\u52d5\u4e2d\u306econtainer\u3082\u524a\u9664\u3055\u308c\u308b\u70b9\u306b\u6ce8\u610f\u3002 <pre><code>$ docker-clean all\n</code></pre></p>"},{"location":"4_tips/tools/#install_1","title":"Install","text":"<p>mac <pre><code>$ brew install docker-clean\n</code></pre></p> <p>windows ZZROTDesign/docker-clean: A script that cleans docker containers, images, volumes, and networks.</p>"},{"location":"4_tips/tools/#dlayer","title":"dlayer","text":"<p>Docker image\u306e\u30ec\u30a4\u30e4\u30fc\u306e\u8a73\u7d30\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002 \u3069\u306e\u30d7\u30ed\u30bb\u30b9/\u30d5\u30a1\u30a4\u30eb\u304c\u5bb9\u91cf\u3092\u78ba\u4fdd\u3057\u3066\u308b\u306e\u304b\u898b\u308c\u308b\u306e\u3067\u3001image\u306e\u8efd\u91cf\u5316\u3092\u8a66\u307f\u308b\u969b\u306b\u975e\u5e38\u306b\u6709\u7528\u3067\u3059\u3002</p> <pre><code>$ docker save mylaravel | dlayer -n 5\n  : \n====================================================================================================\n 746 kB          $ #(nop) COPY dir:aa72315e7d707232431f623429d839c619de8d4dfe8ec38f8da936af37d9f359 in .\n====================================================================================================\n 337 kB          var/www/html/public/js/app.js\n 159 kB          var/www/html/composer.lock\n 128 kB          var/www/html/public/css/app.css\n  13 kB          var/www/html/bootstrap/cache/services.php\n 9.2 kB          var/www/html/config/app.php\n\n====================================================================================================\n  25 MB          $ set -x &amp;&amp; composer install --no-progress --no-dev &amp;&amp; addgroup ${GNAME} -g ${GID} &amp;&amp; adduser -D -G ${GNAME} -u ${UID} ${UNAME} &amp;&amp; chown -R ${UNAME}:${GNAME} ${WORKDIR} &amp;&amp; mv /root/.composer /home/${UNAME}/ &amp;&amp; chown -R ${UNAME}:${GNAME} /home/${UNAME}\n====================================================================================================\n 3.3 MB          var/www/html/vendor/laravel/framework/src/Illuminate\n 1.9 MB          var/www/html/vendor/nesbot/carbon/src/Carbon\n 1.5 MB          var/www/html/vendor/symfony/polyfill-iconv/Resources/charset\n 1.1 MB          home/www/.composer/cache/files/laravel/framework/9bfc7b5a4daf5af99f1c03b2fe4278aadc50b123.zip\n 743 kB          var/www/html/vendor/nikic/php-parser/lib/PhpParser\n</code></pre>"}]}